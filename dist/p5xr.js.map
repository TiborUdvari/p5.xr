{"version":3,"sources":["../node_modules/webxr-polyfill/build/webxr-polyfill.module.js","p5xr/p5vr/p5vr.js","p5xr/p5ar/p5ar.js","app.js","C:/Users/stalg/AppData/Roaming/nvm/v8.15.1/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["_global","global","self","window","PRIVATE","Symbol","EventTarget","constructor","listeners","Map","addEventListener","type","listener","Error","typedListeners","get","push","set","removeEventListener","i","length","pop","dispatchEvent","event","queue","PRIVATE$1","XR","device","requestDevice","now","startTime","Date","performance","now$1","PRIVATE$2","XRPresentationContext","canvas","ctx","glAttribs","Object","assign","EPSILON","ARRAY_TYPE","Float32Array","Array","degree","Math","PI","create","out","copy","a","identity","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","fromRotationTranslation","q","v","x","y","z","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","getTranslation","mat","getRotation","trace","S","sqrt","perspective","fovy","aspect","near","far","f","tan","nf","Infinity","PRIVATE$3","XRDevicePose","polyfill","leftViewMatrix","rightViewMatrix","poseModelMatrix","getViewMatrix","view","eye","updateFromFrameOfReference","frameOfRef","pose","getBasePoseMatrix","getBaseViewMatrix","transformBasePoseMatrix","transformBaseViewMatrix","PRIVATE$4","XRViewport","target","width","height","XREyes","PRIVATE$5","XRView","sessionId","includes","temp","viewport","projectionMatrix","getProjectionMatrix","_getViewport","layer","getViewport","undefined","PRIVATE$6","XRFrame","session","devicePose","views","immersive","getDevicePose","coordinateSystem","getInputPose","inputSource","PRIVATE$7","XRStageBoundsPoint","PRIVATE$8","XRStageBounds","boundsData","geometry","XRCoordinateSystem","getTransformTo","other","DEFAULT_EMULATION_HEIGHT","PRIVATE$9","XRFrameOfReferenceTypes","XRFrameOfReferenceOptions","freeze","disableStageEmulation","stageEmulationHeight","XRFrameOfReference","options","transform","bounds","emulatedHeight","onboundschange","PRIVATE$10","XRSessionCreationOptions","outputContext","validateSessionOptions","XRSession","sessionOptions","id","ended","suspended","suspendedCallback","frame","onPresentationEnd","requestAnimationFrame","onPresentationStart","onSelectStart","onSelectEnd","evt","onblur","onfocus","onresetpose","onend","onselect","onselectstart","onselectend","depthNear","value","depthFar","environmentBlendMode","baseLayer","onBaseLayerSet","requestFrameOfReference","TypeError","requestFrameOfReferenceTransform","e","requestStageBounds","callback","onFrameStart","onFrameEnd","cancelAnimationFrame","handle","getInputSources","end","endSession","PRIVATE$11","XRDevice","immersiveSession","nonImmersiveSessions","Set","ondeactive","supportsSession","Promise","reject","requestSession","add","onSessionEnd","delete","domPointROExport","DOMPointReadOnly","arguments","DOMPointReadOnly$1","XRRay","origin","direction","transformMatrix","defineProperties","writable","PRIVATE$12","XRInputPose","inputSourceImpl","hasGripMatrix","targetRay","gripMatrix","emulatedPosition","PRIVATE$13","XRInputSource","impl","handedness","targetRayMode","XRLayer","POLYFILLED_COMPATIBLE_XR_DEVICE","COMPATIBLE_XR_DEVICE","PRIVATE$14","XRWebGLLayerInit","antialias","depth","stencil","alpha","multiview","framebufferScaleFactor","XRWebGLLayer","context","layerInit","config","framebuffer","getParameter","FRAMEBUFFER_BINDING","framebufferWidth","drawingBufferWidth","framebufferHeight","drawingBufferHeight","requestViewportScaling","viewportScaleFactor","console","warn","API","polyfillSetCompatibleXRDevice","Context","prototype","setCompatibleXRDevice","xrDevice","resolve","then","polyfillGetContext","Canvas","renderContextType","getContext","contextType","call","compatibleXRDevice","create$1","clone$1","fromValues$1","copy$1","set$1","add$1","subtract$1","scale$1","normalize","len","dot","cross","ax","ay","az","bx","by","bz","transformMat4","m","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","tempA","tempB","cosine","acos","sub$1","forEach","vec","stride","offset","count","fn","arg","l","min","isImageBitmapSupported","ImageBitmapRenderingContext","createImageBitmap","poseMatrixToXRRay","poseMatrix","rayOrigin","rayDirection","isMobile","check","test","substr","navigator","userAgent","vendor","opera","applyCanvasStylesForMinimalRendering","style","display","position","top","left","commonjsGlobal","unwrapExports","__esModule","hasOwnProperty","createCommonjsModule","module","exports","cardboardVrDisplay","factory","classCallCheck","instance","Constructor","createClass","props","descriptor","enumerable","configurable","defineProperty","key","protoProps","staticProps","slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","iterator","_s","next","done","err","isArray","MIN_TIMESTEP","MAX_TIMESTEP","dataUri","mimeType","svg","encodeURIComponent","lerp","t","isIOS","platform","isWebViewAndroid","indexOf","isSafari","isFirefoxAndroid","getChromeVersion","match","parseInt","isChromeWithoutDeviceMotion","_match$1$split","split","_match$1$split2","major","minor","branch","build","isR7","isLandscapeMode","rtn","orientation","isTimestampDeltaValid","timestampDeltaS","isNaN","getScreenWidth","max","screen","devicePixelRatio","getScreenHeight","requestFullscreen","element","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","document","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","getFullscreenElement","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","linkProgram","gl","vertexSource","fragmentSource","attribLocationMap","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","attribName","bindAttribLocation","deleteShader","getProgramUniforms","uniforms","uniformCount","getProgramParameter","ACTIVE_UNIFORMS","uniformName","uniformInfo","getActiveUniform","name","replace","getUniformLocation","orthoMatrix","right","bottom","lr","bt","extend","dest","src","safariCssSizeWorkaround","setTimeout","frameDataFromPose","piOver180","rad45","mat4_perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","mat4_fromRotationTranslation","mat4_translate","mat4_invert","defaultOrientation","defaultPosition","updateEyeMatrices","projection","vrDisplay","frameData","timestamp","leftProjectionMatrix","_getFieldOfView","_getEyeOffset","rightProjectionMatrix","isInsideCrossOriginIFrame","isFramed","refOrigin","getOriginFromUrl","referrer","thisOrigin","location","href","url","domainIdx","protoSepIdx","domainEndIdx","substring","getQuaternionAngle","quat","warnOnce","observedWarnings","message","deprecateWarning","deprecated","suggested","alternative","WGLUPreserveGLState","bindings","boundValues","activeTexture","binding","TEXTURE_BINDING_2D","TEXTURE_BINDING_CUBE_MAP","textureUnit","TEXTURE0","TEXTURE31","error","ACTIVE_TEXTURE","boundValue","ARRAY_BUFFER_BINDING","bindBuffer","ARRAY_BUFFER","COLOR_CLEAR_VALUE","clearColor","COLOR_WRITEMASK","colorMask","CURRENT_PROGRAM","useProgram","ELEMENT_ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER","bindFramebuffer","FRAMEBUFFER","RENDERBUFFER_BINDING","bindRenderbuffer","RENDERBUFFER","bindTexture","TEXTURE_2D","TEXTURE_CUBE_MAP","VIEWPORT","BLEND","CULL_FACE","DEPTH_TEST","SCISSOR_TEST","STENCIL_TEST","enable","disable","log","toString","glPreserveState","distortionVS","join","distortionFS","CardboardDistorter","cardboardUI","bufferScale","dirtySubmitFrameBindings","ctxAttribs","getContextAttributes","meshWidth","meshHeight","bufferWidth","bufferHeight","realBindFramebuffer","realEnable","realDisable","realColorMask","realClearColor","realViewport","realCanvasWidth","getOwnPropertyDescriptor","__proto__","realCanvasHeight","isPatched","lastBoundFramebuffer","cullFace","depthTest","blend","scissorTest","stencilTest","attribs","texCoord","viewportOffsetScale","setTextureBounds","vertexBuffer","createBuffer","indexBuffer","indexCount","renderTarget","createTexture","createFramebuffer","depthStencilBuffer","depthBuffer","stencilBuffer","createRenderbuffer","patch","onResize","destroy","unpatch","deleteProgram","deleteBuffer","deleteTexture","deleteFramebuffer","deleteRenderbuffer","glState","clear","COLOR_BUFFER_BIT","texImage2D","RGBA","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","renderbufferStorage","DEPTH_STENCIL","framebufferRenderbuffer","DEPTH_STENCIL_ATTACHMENT","DEPTH_COMPONENT16","DEPTH_ATTACHMENT","STENCIL_INDEX8","STENCIL_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","apply","pname","r","g","h","leftBounds","rightBounds","submitFrame","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","diffuse","uniform4fv","drawElements","TRIANGLES","UNSIGNED_SHORT","renderNoState","preserveDrawingBuffer","updateDeviceInfo","deviceInfo","vertices","computeMeshVertices_","bufferData","STATIC_DRAW","indices","computeMeshIndices_","lensFrustum","getLeftEyeVisibleTanAngles","noLensFrustum","getLeftEyeNoLensTanAngles","getLeftEyeVisibleScreenRect","vidx","j","u","s","d","distortion","distortInverse","p","Uint16Array","halfwidth","halfheight","iidx","getOwnPropertyDescriptor_","proto","attrName","getAttribute","val","setAttribute","uiVS","uiFS","DEG2RAD","kAnglePerGearSection","kOuterRimEndAngle","kInnerRimBeginAngle","kOuterRadius","kMiddleRadius","kInnerRadius","kCenterLineThicknessDp","kButtonWidthDp","kTouchSlopFactor","CardboardUI","gearOffset","gearVertexCount","arrowOffset","arrowVertexCount","projMat","listen","optionsCallback","backCallback","midline","clientWidth","buttonSize","clientX","clientY","clientHeight","physicalPixels","scalingRatio","dps","lineWidth","buttonScale","buttonBorder","addGearSegment","theta","cos","sin","segmentTheta","addArrowVertex","angledLineWidth","render","uniform4f","color","uniformMatrix4fv","projectionMat","drawArrays","TRIANGLE_STRIP","Distortion","coefficients","radius","r0","r1","dr0","distort","abs","dr1","r2","ret","degToRad","radToDeg","Vector3","scalar","invScalar","multiplyScalar","applyQuaternion","ix","iy","iz","iw","crossVectors","Quaternion","quaternion","setFromEulerXYZ","c1","c2","c3","s1","s2","s3","setFromEulerYXZ","setFromAxisAngle","axis","halfAngle","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","inverse","slerp","qb","cosHalfTheta","halfTheta","sinHalfTheta","ratioA","ratioB","setFromUnitVectors","v1","EPS","vFrom","vTo","Device","params","widthMeters","heightMeters","bevelMeters","DEFAULT_ANDROID","DEFAULT_IOS","Viewers","CardboardV1","CardboardViewer","label","interLensDistance","baselineLensDistance","screenLensDistance","distortionCoefficients","inverseCoefficients","CardboardV2","DeviceInfo","deviceParams","additionalViewers","viewer","updateDeviceParams","determineDevice_","getDevice","setViewer","METERS_PER_INCH","metersPerPixelX","xdpi","metersPerPixelY","ydpi","bevelMm","getDistortedFieldOfViewLeftEye","eyeToScreenDistance","outerDist","innerDist","bottomDist","topDist","outerAngle","atan","innerAngle","bottomAngle","topAngle","fovLeft","fovTop","fovRight","fovBottom","halfWidth","halfHeight","verticalLensOffset","centerX","centerY","centerZ","screenLeft","screenTop","screenRight","screenBottom","result","undistortedFrustum","dist","eyeX","eyeY","getFieldOfViewLeftEye","opt_isUndistorted","getUndistortedFieldOfViewLeftEye","getFieldOfViewRightEye","getUndistortedParams_","getUndistortedViewportLeftEye","screenWidth","screenHeight","xPxPerTanAngle","yPxPerTanAngle","round","eyePosX","eyePosY","halfLensDistance","maxFov","viewerMax","format","last_updated","devices","DPDB_CACHE","Dpdb","onDeviceParamsUpdated","dpdb","recalculateDeviceParams_","xhr","XMLHttpRequest","obj","open","loading","status","JSON","parse","response","send","getDeviceParams","newDeviceParams","calcDeviceParams_","db","rules","matched","rule","ruleMatches_","dpi","DeviceParams","bw","ua","res","resX","resY","SensorSample","sample","timestampS","sensorSample","ComplementaryFilter","kFilter","isDebug","currentAccelMeasurement","currentGyroMeasurement","previousGyroMeasurement","filterQ","previousFilterQ","accelQ","isOrientationInitialized","estimatedGravity","measuredGravity","gyroIntegralQ","addAccelMeasurement","vector","addGyroMeasurement","deltaT","run_","accelToQuaternion_","gyroDeltaQ","gyroToQuaternionDelta_","invFilterQ","deltaQ","toFixed","targetQ","getOrientation","accel","normAccel","gyro","dt","PosePredictor","predictionTimeS","previousQ","previousTimestampS","outQ","getPrediction","currentQ","angularSpeed","predictAngle","FusionPoseSensor","predictionTime","yawOnly","accelerometer","gyroscope","filter","posePredictor","chromeVersion","isDeviceMotionInRadians","isWithoutDeviceMotion","filterToWorldQ","inverseWorldToScreenQ","worldToScreenQ","originalPoseAdjustQ","setScreenTransform_","resetQ","orientationOut_","start","getPosition","_deviceOrientationQ","deviceOrientationFixQ","deviceOrientationFilterToWorldQ","filterOrientation","resetPose","onDeviceOrientation_","beta","gamma","onDeviceMotion_","deviceMotion","updateDeviceMotion_","accGravity","accelerationIncludingGravity","rotRate","rotationRate","timeStamp","deltaS","onOrientationChange_","screenOrientation","onMessage_","data","toLowerCase","deviceMotionEvent","onDeviceMotionCallback_","bind","onOrientationChangeCallback_","onMessageCallback_","onDeviceOrientationCallback_","stop","SENSOR_FREQUENCY","X_AXIS","Z_AXIS","SENSOR_TO_VR","PoseSensor","sensor","fusionSensor","_out","api","errors","_sensorQ","_outQ","_onSensorRead","_onSensorError","init","RelativeOrientationSensor","frequency","referenceFrame","useDeviceMotion","K_FILTER","PREDICTION_TIME_S","YAW_ONLY","DEBUG","rotateInstructionsAsset","RotateInstructions","loadIcon_","overlay","createElement","backgroundColor","fontFamily","zIndex","img","icon","marginLeft","marginTop","appendChild","text","textAlign","fontSize","lineHeight","margin","innerHTML","snackbar","padding","boxSizing","snackbarText","float","snackbarButton","fontWeight","textTransform","borderLeft","paddingLeft","textDecoration","hide","show","parent","parentElement","body","removeChild","querySelector","showTemporarily","ms","timer","disableShowTemporarily","clearTimeout","update","DEFAULT_VIEWER","VIEWER_KEY","CLASS_NAME","ViewerSelector","defaultViewer","selectedKey","localStorage","getItem","dialog","createDialog_","root","onChangeCallbacks_","selected","checked","contains","getCurrentViewer","getSelectedKey_","input","onChange","cb","fireOnChange_","onSave_","setItem","container","classList","background","overflow","boxShadow","createH1_","createChoice_","createButton_","h1","marginBottom","div","onclick","button","letterSpacing","border","commonjsGlobal$$1","unwrapExports$$1","createCommonjsModule$$1","NoSleep","webpackUniversalModuleDefinition","modules","installedModules","__webpack_require__","moduleId","c","getter","o","n","getDefault","getModuleExports","object","property","_createClass","_classCallCheck","mediaFile","oldIOS","parseFloat","exec","MSStream","noSleepTimer","noSleepVideo","currentTime","random","setInterval","play","clearInterval","pause","NoSleep$1","nextDisplayId","defaultLeftBounds","defaultRightBounds","raf","caf","VRFrameData","VRDisplayCapabilities","hasPosition","hasExternalDisplay","canPresent","maxLayers","hasOrientation","VRDisplay","USE_WAKELOCK","wakelock","isPolyfilled","displayId","displayName","isPresenting","capabilities","stageParameters","waitingForPresent_","layer_","originalParent_","fullscreenElement_","fullscreenWrapper_","fullscreenElementCachedStyle_","fullscreenEventTarget_","fullscreenChangeHandler_","fullscreenErrorHandler_","wakelock_","getFrameData","_getPose","getPose","_resetPose","getImmediatePose","wrapForFullscreen","cssProperties","insertBefore","firstChild","applyFullscreenElementStyle","removeFullscreenWrapper","removeAttribute","requestPresent","layers","wasPresenting","incomingLayer","source","updatePresent_","predistorted","slice","onFullscreenChange","actualFullscreenElement","lock","catch","beginPresent_","unlock","disableWakeLock","endPresent_","removeFullscreenListeners_","fireVRDisplayPresentChange_","onFullscreenError","addFullscreenListeners_","enableWakeLock","exitPresent","getLayers","CustomEvent","detail","fireVRDisplayConnect_","changeHandler","errorHandler","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","getEyeParameters","whichEye","ADDITIONAL_VIEWERS","MOBILE_WAKE_LOCK","DPDB_URL","CARDBOARD_UI_DISABLED","ROTATE_INSTRUCTIONS_DISABLED","BUFFER_SCALE","DIRTY_SUBMIT_FRAME_BINDINGS","Eye","LEFT","RIGHT","CardboardVRDisplay","config$$1","defaults","bufferScale_","poseSensor_","distorter_","cardboardUI_","dpdb_","onDeviceParamsUpdated_","deviceInfo_","viewerSelector_","onViewerChanged_","rotateInstructions_","onResize_","linearVelocity","linearAcceleration","angularVelocity","angularAcceleration","fieldOfView","eyeParams","renderWidth","renderHeight","newParams","updateBounds_","stopPropagation","preventDefault","orientationHandler","vrdisplaypresentchangeHandler","fireVRDisplayDeviceParamsChange_","lastWidth","lastHeight","vrdisplay","PolyfilledXRDevice","onWindowResize","create$2","create$3","clone$3","copy$3","normalize$1","forEach$1","create$4","setAxisAngle","rad","multiply$4","aw","omega","cosom","sinom","scale0","scale1","invert$2","a0","a1","a2","a3","dot$$1","invDot","fromMat3","fTrace","fRoot","k","fromEuler","halfToRad","sx","cx","sy","cy","sz","cz","clone$4","copy$4","normalize$2","rotationTo","tmpvec3","xUnitVec3","yUnitVec3","sqlerp","temp1","temp2","setAxes","matr","up","HEAD_ELBOW_OFFSET_RIGHTHANDED","HEAD_ELBOW_OFFSET_LEFTHANDED","ELBOW_WRIST_OFFSET","WRIST_CONTROLLER_OFFSET","ARM_EXTENSION_OFFSET","ELBOW_BEND_RATIO","EXTENSION_RATIO_WEIGHT","MIN_ANGULAR_SPEED","MIN_ANGLE_DELTA","MIN_EXTENSION_COS","MAX_EXTENSION_COS","RAD_TO_DEG","eulerFromQuaternion","order","clamp","min$$1","max$$1","sqx","sqy","sqz","sqw","atan2","asin","OrientationArmModel","hand","headElbowOffset","controllerQ","lastControllerQ","headQ","headPos","elbowPos","wristPos","time","lastTime","rootQ","setHandedness","controllerOrientation","headPoseMatrix","headYawQ","getHeadYawOrientation_","angleDelta","quatAngle_","timeDelta","controllerAngularSpeed","controllerForward","controllerDotY","extensionRatio","clamp_","controllerCameraQ","elbowOffset","totalAngle","totalAngleDeg","lerpSuppression","pow","elbowRatio","wristRatio","lerpValue","wristQ","invWristQ","elbowQ","headEuler","destinationQ","q1","q2","vec1","vec2","GamepadXRInputSource","primaryButtonIndex","gamepad","lastPosition","basePoseMatrix","inputPoses","WeakMap","primaryActionPressed","armModel","updateFromGamepad","updateBasePoseMatrix","getXRInputPose","inputPose","rayTransformMatrix","TEST_ENV","EXTRA_PRESENTATION_ATTRIBUTES","highRefreshRate","PRIMARY_BUTTON_MAP","oculus","openvr","SESSION_ID","Session","polyfillOptions","modifiedCanvasLayer","renderContext","WebVRDevice","sessions","baseModelMatrix","gamepadInputSources","tempVec3","onVRDisplayPresentChange","CAN_USE_GAMEPAD","HAS_BITMAP_SUPPORT","attributes","getPrimaryButtonIndex","primaryButton","buttons","prevInputSources","gamepads","getGamepads","pressed","outputCanvas","oWidth","offsetWidth","oHeight","offsetHeight","mirroring","iCanvas","iWidth","iHeight","oCanvas","transferToImageBitmap","transferFromImageBitmap","resizeWidth","resizeHeight","bitmap","drawImage","sizeX","sizeZ","sittingToStandingTransform","inputSources","CardboardXRDevice","getXRDevice","xr","getVRDisplay","displays","getVRDisplays","webvr","cardboard","CONFIG_DEFAULTS","partials","WebXRPolyfill","nativeWebXR","injected","_injectPolyfill","_patchRequestDevice","every","iface","className","keys","polyfilledCtx","WebGLRenderingContext","HTMLCanvasElement","OffscreenCanvas","WebGL2RenderingContext","xrSession","xrFrameOfRef","curClearColor","p5","createVRCanvas","noLoop","versionShim","WebXRVersionShim","initVR","onVRSessionStarted","onSessionEnded","createCanvas","windowWidth","windowHeight","WEBGL","_decrementPreload","onXRFrame","xrButton","XRDeviceButton","onRequestSession","onVRButtonClicked","onEndSession","domElement","setDevice","_clearVR","_renderer","uMVMatrix","uPMatrix","_drawEye","setVRBackgroundColor","isP3D","userSetup","setup","userDraw","draw","scale","_pixelDensity","callMethod","_update","_setProperty","frameCount","_registeredMethods","pre","_inUserDraw","post","RendererGL","ambientLightColors","directionalLightDirections","directionalLightColors","pointLightPositions","pointLightColors","arDevice","arSession","arFrameOfRef","createARCanvas","initAR","onEnterAR","textEnterXRTitle","textXRNotFoundTitle","textExitXRTitle","environmentIntegration","onARSessionStarted","onNoXRDevice","onSessionStarted","onClick","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","createErrorOverlay","getElementById","remove","stackTrace","innerText","getParents","parents","dep","concat","Function","deps","cached","cache","some"],"mappings":"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","file":"p5xr.js","sourceRoot":"..\\src","sourcesContent":["/**\n * @license\n * webxr-polyfill\n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * cardboard-vr-display\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * webvr-polyfill-dpdb \n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * wglu-preserve-state\n * Copyright (c) 2016, Brandon Jones.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @license\n * nosleep.js\n * Copyright (c) 2017, Rich Tibbett\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nconst _global = typeof global !== 'undefined' ? global :\n                typeof self !== 'undefined' ? self :\n                typeof window !== 'undefined' ? window : {};\n\nconst PRIVATE = Symbol('@@webxr-polyfill/EventTarget');\nclass EventTarget {\n  constructor() {\n    this[PRIVATE] = {\n      listeners: new Map(),\n    };\n  }\n  addEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    typedListeners.push(listener);\n    this[PRIVATE].listeners.set(type, typedListeners);\n  }\n  removeEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    for (let i = typedListeners.length; i >= 0; i--) {\n      if (typedListeners[i] === listener) {\n        typedListeners.pop();\n      }\n    }\n  }\n  dispatchEvent(type, event) {\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    const queue = [];\n    for (let i = 0; i < typedListeners.length; i++) {\n      queue[i] = typedListeners[i];\n    }\n    for (let listener of queue) {\n      listener(event);\n    }\n    if (typeof this[`on${type}`] === 'function') {\n      this[`on${type}`](event);\n    }\n  }\n}\n\nconst PRIVATE$1 = Symbol('@@webxr-polyfill/XR');\nclass XR extends EventTarget {\n  constructor(device) {\n    super();\n    this[PRIVATE$1] = {\n      device,\n    };\n  }\n  async requestDevice() {\n    const device = await this[PRIVATE$1].device;\n    if (device) {\n      return device;\n    }\n    throw new Error('NotFoundError');\n  }\n}\n\nlet now;\nif ('performance' in _global === false) {\n  let startTime = Date.now();\n  now = () => Date.now() - startTime;\n} else {\n  now = () => performance.now();\n}\nvar now$1 = now;\n\nconst PRIVATE$2 = Symbol('@@webxr-polyfill/XRPresentationContext');\nclass XRPresentationContext {\n  constructor(canvas, ctx, glAttribs) {\n    this[PRIVATE$2] = { canvas, ctx, glAttribs };\n    Object.assign(this, ctx);\n  }\n  get canvas() { return this[PRIVATE$2].canvas; }\n}\n\nconst EPSILON = 0.000001;\nlet ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n\n\nconst degree = Math.PI / 180;\n\nfunction create() {\n  let out = new ARRAY_TYPE(16);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\nfunction invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n\n\nfunction multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n  out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n  out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n  out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\nfunction fromRotationTranslation(out, q, v) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\nfunction getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n\nfunction getRotation(out, mat) {\n  let trace = mat[0] + mat[5] + mat[10];\n  let S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if ((mat[0] > mat[5]) && (mat[0] > mat[10])) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n  return out;\n}\n\n\n\n\nfunction perspective(out, fovy, aspect, near, far) {\n  let f = 1.0 / Math.tan(fovy / 2), nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = (2 * far * near) * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n  return out;\n}\n\nconst PRIVATE$3 = Symbol('@@webxr-polyfill/XRDevicePose');\nclass XRDevicePose {\n  constructor(polyfill) {\n    this[PRIVATE$3] = {\n      polyfill,\n      leftViewMatrix: identity(new Float32Array(16)),\n      rightViewMatrix: identity(new Float32Array(16)),\n      poseModelMatrix: identity(new Float32Array(16)),\n    };\n  }\n  get poseModelMatrix() { return this[PRIVATE$3].poseModelMatrix; }\n  getViewMatrix(view) {\n    switch (view.eye) {\n      case 'left': return this[PRIVATE$3].leftViewMatrix;\n      case 'right': return this[PRIVATE$3].rightViewMatrix;\n    }\n    throw new Error(`view is not a valid XREye`);\n  }\n  updateFromFrameOfReference(frameOfRef) {\n    const pose = this[PRIVATE$3].polyfill.getBasePoseMatrix();\n    const leftViewMatrix = this[PRIVATE$3].polyfill.getBaseViewMatrix('left');\n    const rightViewMatrix = this[PRIVATE$3].polyfill.getBaseViewMatrix('right');\n    if (pose) {\n      frameOfRef.transformBasePoseMatrix(this[PRIVATE$3].poseModelMatrix, pose);\n    }\n    if (leftViewMatrix && rightViewMatrix) {\n      frameOfRef.transformBaseViewMatrix(this[PRIVATE$3].leftViewMatrix,\n                                         leftViewMatrix,\n                                         this[PRIVATE$3].poseModelMatrix);\n      frameOfRef.transformBaseViewMatrix(this[PRIVATE$3].rightViewMatrix,\n                                         rightViewMatrix,\n                                         this[PRIVATE$3].poseModelMatrix);\n    }\n  }\n}\n\nconst PRIVATE$4 = Symbol('@@webxr-polyfill/XRViewport');\nclass XRViewport {\n  constructor(target) {\n    this[PRIVATE$4] = { target };\n  }\n  get x() { return this[PRIVATE$4].target.x; }\n  get y() { return this[PRIVATE$4].target.y; }\n  get width() { return this[PRIVATE$4].target.width; }\n  get height() { return this[PRIVATE$4].target.height; }\n}\n\nconst XREyes = ['left', 'right'];\nconst PRIVATE$5 = Symbol('@@webxr-polyfill/XRView');\nclass XRView {\n  constructor(polyfill, eye, sessionId) {\n    if (!XREyes.includes(eye)) {\n      throw new Error(`XREye must be one of: ${XREyes}`);\n    }\n    const temp = Object.create(null);\n    const viewport = new XRViewport(temp);\n    this[PRIVATE$5] = {\n      polyfill,\n      eye,\n      viewport,\n      temp,\n      sessionId,\n    };\n  }\n  get eye() { return this[PRIVATE$5].eye; }\n  get projectionMatrix() { return this[PRIVATE$5].polyfill.getProjectionMatrix(this.eye); }\n  _getViewport(layer) {\n    const viewport = this[PRIVATE$5].viewport;\n    if (this[PRIVATE$5].polyfill.getViewport(this[PRIVATE$5].sessionId,\n                                           this.eye,\n                                           layer,\n                                           this[PRIVATE$5].temp)) {\n      return this[PRIVATE$5].viewport;\n    }\n    return undefined;\n  }\n}\n\nconst PRIVATE$6 = Symbol('@@webxr-polyfill/XRFrame');\nclass XRFrame {\n  constructor(polyfill, session, sessionId) {\n    const devicePose = new XRDevicePose(polyfill);\n    const views = [\n      new XRView(polyfill, 'left', sessionId),\n    ];\n    if (session.immersive) {\n      views.push(new XRView(polyfill, 'right', sessionId));\n    }\n    this[PRIVATE$6] = {\n      polyfill,\n      devicePose,\n      views,\n      session,\n    };\n  }\n  get session() { return this[PRIVATE$6].session; }\n  get views() { return this[PRIVATE$6].views; }\n  getDevicePose(coordinateSystem) {\n    this[PRIVATE$6].devicePose.updateFromFrameOfReference(coordinateSystem);\n    return this[PRIVATE$6].devicePose;\n  }\n  getInputPose(inputSource, coordinateSystem) {\n    return this[PRIVATE$6].polyfill.getInputPose(inputSource, coordinateSystem);\n  }\n}\n\nconst PRIVATE$7 = Symbol('@@webxr-polyfill/XRStageBoundsPoint');\nclass XRStageBoundsPoint {\n  constructor(x, z) {\n    this[PRIVATE$7] = { x, z };\n  }\n  get x() { return this[PRIVATE$7].x; }\n  get z() { return this[PRIVATE$7].z; }\n}\n\nconst PRIVATE$8 = Symbol('@@webxr-polyfill/XRStageBounds');\nclass XRStageBounds {\n  constructor(boundsData) {\n    const geometry = [];\n    for (let i = 0; i < boundsData.length; i += 2) {\n      geometry.push(new XRStageBoundsPoint(boundsData[i], boundsData[i + 1]));\n    }\n    this[PRIVATE$8] = { geometry };\n  }\n  get geometry() { return this[PRIVATE$8].geometry; }\n}\n\nclass XRCoordinateSystem {\n  constructor() {}\n  getTransformTo(other) {\n    throw new Error('Not yet supported');\n  }\n}\n\nconst DEFAULT_EMULATION_HEIGHT = 1.6;\nconst PRIVATE$9 = Symbol('@@webxr-polyfill/XRFrameOfReference');\nconst XRFrameOfReferenceTypes = ['head-model', 'eye-level', 'stage'];\nconst XRFrameOfReferenceOptions = Object.freeze({\n  disableStageEmulation: false,\n  stageEmulationHeight: 0,\n});\nclass XRFrameOfReference extends XRCoordinateSystem {\n  constructor(polyfill, type, options, transform, bounds) {\n    options = Object.assign({}, XRFrameOfReferenceOptions, options);\n    if (!XRFrameOfReferenceTypes.includes(type)) {\n      throw new Error(`XRFrameOfReferenceType must be one of ${XRFrameOfReferenceTypes}`);\n    }\n    super();\n    if (type === 'stage' && options.disableStageEmulation && !transform) {\n      throw new Error(`XRFrameOfReference cannot use 'stage' type, if disabling emulation and platform does not provide`);\n    }\n    const { disableStageEmulation, stageEmulationHeight } = options;\n    let emulatedHeight = 0;\n    if (type === 'stage' && !transform) {\n      emulatedHeight = stageEmulationHeight !== 0 ? stageEmulationHeight : DEFAULT_EMULATION_HEIGHT;\n    }\n    if (type === 'stage' && !transform) {\n      transform = identity(new Float32Array(16));\n      transform[13] = emulatedHeight;\n    }\n    this[PRIVATE$9] = {\n      disableStageEmulation,\n      stageEmulationHeight,\n      emulatedHeight,\n      type,\n      transform,\n      polyfill,\n      bounds,\n    };\n    this.onboundschange = undefined;\n  }\n  get bounds() { return this[PRIVATE$9].bounds; }\n  get emulatedHeight() { return this[PRIVATE$9].emulatedHeight; }\n  get type() { return this[PRIVATE$9].type; }\n  transformBasePoseMatrix(out, pose) {\n    if (this[PRIVATE$9].transform) {\n      multiply(out, this[PRIVATE$9].transform, pose);\n      return;\n    }\n    switch (this.type) {\n      case 'head-model':\n        if (out !== pose) {\n          copy(out, pose);\n        }\n        out[12] = out[13] = out[14] = 0;\n        return;\n      case 'eye-level':\n        if (out !== pose) {\n          copy(out, pose);\n        }\n        return;\n    }\n  }\n  transformBaseViewMatrix(out, view) {\n    let frameOfRef = this[PRIVATE$9].transform;\n    if (frameOfRef) {\n      invert(out, frameOfRef);\n      multiply(out, view, out);\n    }\n    else if (this.type === 'head-model') {\n      invert(out, view);\n      out[12] = 0;\n      out[13] = 0;\n      out[14] = 0;\n      invert(out, out);\n      return out;\n    }\n    else {\n      copy(out, view);\n    }\n    return out;\n  }\n}\n\nconst PRIVATE$10 = Symbol('@@webxr-polyfill/XRSession');\nconst XRSessionCreationOptions = Object.freeze({\n  immersive: false,\n  outputContext: undefined,\n});\nconst validateSessionOptions = options => {\n  const { immersive, outputContext } = options;\n  if (!immersive && !outputContext) {\n    return false;\n  }\n  if (outputContext !== undefined && !(outputContext instanceof XRPresentationContext)) {\n    return false;\n  }\n  return true;\n};\nclass XRSession extends EventTarget {\n  constructor(polyfill, device, sessionOptions, id) {\n    sessionOptions = Object.assign({}, XRSessionCreationOptions, sessionOptions);\n    super();\n    const { immersive, outputContext } = sessionOptions;\n    this[PRIVATE$10] = {\n      polyfill,\n      device,\n      immersive,\n      outputContext,\n      ended: false,\n      suspended: false,\n      suspendedCallback: null,\n      id,\n    };\n    const frame = new XRFrame(polyfill, this, this[PRIVATE$10].id);\n    this[PRIVATE$10].frame = frame;\n    this[PRIVATE$10].onPresentationEnd = sessionId => {\n      if (sessionId !== this[PRIVATE$10].id) {\n        this[PRIVATE$10].suspended = false;\n        this.dispatchEvent('focus', { session: this });\n        const suspendedCallback = this[PRIVATE$10].suspendedCallback;\n        this[PRIVATE$10].suspendedCallback = null;\n        if (suspendedCallback) {\n          this.requestAnimationFrame(suspendedCallback);\n        }\n        return;\n      }\n      this[PRIVATE$10].ended = true;\n      polyfill.removeEventListener('@webvr-polyfill/vr-present-end', this[PRIVATE$10].onPresentationEnd);\n      polyfill.removeEventListener('@webvr-polyfill/vr-present-start', this[PRIVATE$10].onPresentationStart);\n      polyfill.removeEventListener('@@webvr-polyfill/input-select-start', this[PRIVATE$10].onSelectStart);\n      polyfill.removeEventListener('@@webvr-polyfill/input-select-end', this[PRIVATE$10].onSelectEnd);\n      this.dispatchEvent('end', { session: this });\n    };\n    polyfill.addEventListener('@@webxr-polyfill/vr-present-end', this[PRIVATE$10].onPresentationEnd);\n    this[PRIVATE$10].onPresentationStart = sessionId => {\n      if (sessionId === this[PRIVATE$10].id) {\n        return;\n      }\n      this[PRIVATE$10].suspended = true;\n      this.dispatchEvent('blur', { session: this });\n    };\n    polyfill.addEventListener('@@webxr-polyfill/vr-present-start', this[PRIVATE$10].onPresentationStart);\n    this[PRIVATE$10].onSelectStart = evt => {\n      if (evt.sessionId !== this[PRIVATE$10].id) {\n        return;\n      }\n      this.dispatchEvent('selectstart', {\n        frame: this[PRIVATE$10].frame,\n        inputSource: evt.inputSource\n      });\n    };\n    polyfill.addEventListener('@@webxr-polyfill/input-select-start', this[PRIVATE$10].onSelectStart);\n    this[PRIVATE$10].onSelectEnd = evt => {\n      if (evt.sessionId !== this[PRIVATE$10].id) {\n        return;\n      }\n      this.dispatchEvent('selectend', {\n        frame: this[PRIVATE$10].frame,\n        inputSource: evt.inputSource\n      });\n      this.dispatchEvent('select',  {\n        frame: this[PRIVATE$10].frame,\n        inputSource: evt.inputSource\n      });\n    };\n    polyfill.addEventListener('@@webxr-polyfill/input-select-end', this[PRIVATE$10].onSelectEnd);\n    this.onblur = undefined;\n    this.onfocus = undefined;\n    this.onresetpose = undefined;\n    this.onend = undefined;\n    this.onselect = undefined;\n    this.onselectstart = undefined;\n    this.onselectend = undefined;\n  }\n  get device() { return this[PRIVATE$10].device; }\n  get immersive() { return this[PRIVATE$10].immersive; }\n  get outputContext() { return this[PRIVATE$10].outputContext; }\n  get depthNear() { return this[PRIVATE$10].polyfill.depthNear; }\n  set depthNear(value) { this[PRIVATE$10].polyfill.depthNear = value; }\n  get depthFar() { return this[PRIVATE$10].polyfill.depthFar; }\n  set depthFar(value) { this[PRIVATE$10].polyfill.depthFar = value; }\n  get environmentBlendMode() {\n    return this[PRIVATE$10].polyfill.environmentBlendMode || 'opaque';\n  }\n  get baseLayer() { return this[PRIVATE$10].baseLayer; }\n  set baseLayer(value) {\n    if (this[PRIVATE$10].ended) {\n      return;\n    }\n    this[PRIVATE$10].baseLayer = value;\n    this[PRIVATE$10].polyfill.onBaseLayerSet(this[PRIVATE$10].id, value);\n  }\n  async requestFrameOfReference(type, options={}) {\n    if (this[PRIVATE$10].ended) {\n      return;\n    }\n    options = Object.assign({}, XRFrameOfReferenceOptions, options);\n    if (!XRFrameOfReferenceTypes.includes(type)) {\n      throw new TypeError(`XRFrameOfReferenceType must be one of ${XRFrameOfReferenceTypes}`);\n    }\n    let transform = null;\n    let bounds = null;\n    try {\n      transform = await this[PRIVATE$10].polyfill.requestFrameOfReferenceTransform(type, options);\n    } catch (e) {\n      if (type !== 'stage' || options.disableStageEmulation) {\n        throw e;\n      }\n    }\n    if (type === 'stage' && transform) {\n      bounds = this[PRIVATE$10].polyfill.requestStageBounds();\n      if (bounds) {\n        bounds = new XRStageBounds(bounds);\n      }\n    }\n    return new XRFrameOfReference(this[PRIVATE$10].polyfill, type, options, transform, bounds);\n  }\n  requestAnimationFrame(callback) {\n    if (this[PRIVATE$10].ended) {\n      return;\n    }\n    if (this[PRIVATE$10].suspended && this[PRIVATE$10].suspendedCallback) {\n      return;\n    }\n    if (this[PRIVATE$10].suspended && !this[PRIVATE$10].suspendedCallback) {\n      this[PRIVATE$10].suspendedCallback = callback;\n    }\n    return this[PRIVATE$10].polyfill.requestAnimationFrame(() => {\n      this[PRIVATE$10].polyfill.onFrameStart(this[PRIVATE$10].id);\n      callback(now$1(), this[PRIVATE$10].frame);\n      this[PRIVATE$10].polyfill.onFrameEnd(this[PRIVATE$10].id);\n    });\n  }\n  cancelAnimationFrame(handle) {\n    if (this[PRIVATE$10].ended) {\n      return;\n    }\n    this[PRIVATE$10].polyfill.cancelAnimationFrame(handle);\n  }\n  getInputSources() {\n    return this[PRIVATE$10].polyfill.getInputSources();\n  }\n  async end() {\n    if (this[PRIVATE$10].ended) {\n      return;\n    }\n    if (!this.immersive) {\n      this[PRIVATE$10].ended = true;\n      this[PRIVATE$10].polyfill.removeEventListener('@@webvr-polyfill/vr-present-start',\n                                                 this[PRIVATE$10].onPresentationStart);\n      this[PRIVATE$10].polyfill.removeEventListener('@@webvr-polyfill/vr-present-end',\n                                                 this[PRIVATE$10].onPresentationEnd);\n      this[PRIVATE$10].polyfill.removeEventListener('@@webvr-polyfill/input-select-start',\n                                                 this[PRIVATE$10].onSelectStart);\n      this[PRIVATE$10].polyfill.removeEventListener('@@webvr-polyfill/input-select-end',\n                                                 this[PRIVATE$10].onSelectEnd);\n      this.dispatchEvent('end', { session: this });\n    }\n    return this[PRIVATE$10].polyfill.endSession(this[PRIVATE$10].id);\n  }\n}\n\nconst PRIVATE$11 = Symbol('@@webxr-polyfill/XRDevice');\nclass XRDevice extends EventTarget {\n  constructor(polyfill) {\n    if (!polyfill) {\n      throw new Error('XRDevice must receive a PolyfilledXRDevice.');\n    }\n    super();\n    this[PRIVATE$11] = {\n      polyfill,\n      immersiveSession: null,\n      nonImmersiveSessions: new Set(),\n    };\n    this.ondeactive = undefined;\n  }\n  async supportsSession(sessionOptions={}) {\n    sessionOptions = Object.assign({}, XRSessionCreationOptions, sessionOptions);\n    if (!validateSessionOptions(sessionOptions)) {\n      return Promise.reject(null);\n    }\n    if (!this[PRIVATE$11].polyfill.supportsSession(sessionOptions)) {\n      return Promise.reject(null);\n    }\n    return null;\n  }\n  async requestSession(sessionOptions) {\n    sessionOptions = Object.assign({}, XRSessionCreationOptions, sessionOptions);\n    if (!validateSessionOptions(sessionOptions)) {\n      throw new Error('NotSupportedError');\n    }\n    if (this[PRIVATE$11].immersiveSession && sessionOptions.immersive) {\n      throw new Error('InvalidStateError');\n    }\n    const sessionId = await this[PRIVATE$11].polyfill.requestSession(sessionOptions);\n    const session = new XRSession(this[PRIVATE$11].polyfill, this, sessionOptions, sessionId);\n    if (sessionOptions.immersive) {\n      this[PRIVATE$11].immersiveSession = session;\n    } else {\n      this[PRIVATE$11].nonImmersiveSessions.add(session);\n    }\n    const onSessionEnd = () => {\n      if (session.immersive) {\n        this[PRIVATE$11].immersiveSession = null;\n      } else {\n        this[PRIVATE$11].nonImmersiveSessions.delete(session);\n      }\n      session.removeEventListener('end', onSessionEnd);\n    };\n    session.addEventListener('end', onSessionEnd);\n    return session;\n  }\n}\n\nlet domPointROExport = ('DOMPointReadOnly' in _global) ? DOMPointReadOnly : null;\nif (!domPointROExport) {\n  const PRIVATE = Symbol('@@webxr-polyfill/DOMPointReadOnly');\n  domPointROExport = class DOMPointReadOnly {\n    constructor(x, y, z, w) {\n      if (arguments.length === 1) {\n        this[PRIVATE] = {\n          x: x.x,\n          y: x.y,\n          z: x.z,\n          w: x.w\n        };\n      } else if (arguments.length === 4) {\n        this[PRIVATE] = {\n          x: x,\n          y: y,\n          z: z,\n          w: w\n        };\n      } else {\n        throw new TypeError('Must supply either 1 or 4 arguments')\n      }\n    }\n    get x() { return this[PRIVATE].x }\n    get y() { return this[PRIVATE].y }\n    get z() { return this[PRIVATE].z }\n    get w() { return this[PRIVATE].w }\n  };\n}\nvar DOMPointReadOnly$1 = domPointROExport;\n\nclass XRRay {\n  constructor(origin=new DOMPointReadOnly$1(0, 0, 0, 1),\n              direction=new DOMPointReadOnly$1(0, 0, -1, 0),\n              transformMatrix=new Float32Array(16)) {\n    if (!(origin instanceof DOMPointReadOnly$1)) {\n      throw new Error('origin must be a DOMPointReadOnly');\n    }\n    if (!(direction instanceof DOMPointReadOnly$1)) {\n      throw new Error('direction must be a DOMPointReadOnly');\n    }\n    if (!(transformMatrix instanceof Float32Array)) {\n      throw new Error('transformMatrix must be a Float32Array');\n    }\n    Object.defineProperties(this, {\n      origin: {\n        value: origin,\n        writable: false,\n      },\n      direction: {\n        value: direction,\n        writable: false,\n      },\n      transformMatrix: {\n        value: transformMatrix,\n        writable: false,\n      },\n    });\n  }\n}\n\nconst PRIVATE$12 = Symbol('@@webxr-polyfill/XRInputPose');\nclass XRInputPose {\n  constructor(inputSourceImpl, hasGripMatrix) {\n    this[PRIVATE$12] = {\n      inputSourceImpl,\n      targetRay: new XRRay(),\n      gripMatrix: hasGripMatrix ? create() : null,\n    };\n  }\n  get targetRay() { return this[PRIVATE$12].targetRay; }\n  set targetRay(value) { this[PRIVATE$12].targetRay = value; }\n  get emulatedPosition() { return this[PRIVATE$12].inputSourceImpl.emulatedPosition; }\n  get gripMatrix() { return this[PRIVATE$12].gripMatrix; }\n}\n\nconst PRIVATE$13 = Symbol('@@webxr-polyfill/XRInputSource');\nclass XRInputSource {\n  constructor(impl) {\n    this[PRIVATE$13] = {\n      impl\n    };\n  }\n  get handedness() { return this[PRIVATE$13].impl.handedness; }\n  get targetRayMode() { return this[PRIVATE$13].impl.targetRayMode; }\n}\n\nclass XRLayer {\n  constructor() {}\n  getViewport(view) {\n    return view._getViewport(this);\n  }\n}\n\nconst POLYFILLED_COMPATIBLE_XR_DEVICE = Symbol('@@webxr-polyfill/polyfilled-compatible-xr-device');\nconst COMPATIBLE_XR_DEVICE= Symbol('@@webxr-polyfill/compatible-xr-device');\n\nconst PRIVATE$14 = Symbol('@@webxr-polyfill/XRWebGLLayer');\nconst XRWebGLLayerInit = Object.freeze({\n  antialias: true,\n  depth: false,\n  stencil: false,\n  alpha: true,\n  multiview: false,\n  framebufferScaleFactor: 0,\n});\nclass XRWebGLLayer extends XRLayer {\n  constructor(session, context, layerInit={}) {\n    const config = Object.assign({}, XRWebGLLayerInit, layerInit);\n    if (!(session instanceof XRSession)) {\n      throw new Error('session must be a XRSession');\n    }\n    if (session.ended) {\n      throw new Error(`InvalidStateError`);\n    }\n    if (context[POLYFILLED_COMPATIBLE_XR_DEVICE]) {\n      if (context[COMPATIBLE_XR_DEVICE] !== session.device) {\n        throw new Error(`InvalidStateError`);\n      }\n    }\n    const framebuffer = context.getParameter(context.FRAMEBUFFER_BINDING);\n    super();\n    this[PRIVATE$14] = {\n      context,\n      config,\n      framebuffer,\n    };\n  }\n  get context() { return this[PRIVATE$14].context; }\n  get antialias() { return this[PRIVATE$14].config.antialias; }\n  get depth() { return this[PRIVATE$14].config.depth; }\n  get stencil() { return this[PRIVATE$14].config.stencil; }\n  get alpha() { return this[PRIVATE$14].config.alpha; }\n  get multiview() { return false; }\n  get framebuffer() { return this[PRIVATE$14].framebuffer; }\n  get framebufferWidth() { return this[PRIVATE$14].context.drawingBufferWidth; }\n  get framebufferHeight() { return this[PRIVATE$14].context.drawingBufferHeight; }\n  requestViewportScaling(viewportScaleFactor) {\n    console.warn('requestViewportScaling is not yet implemented');\n  }\n}\n\nvar API = {\n  XR,\n  XRDevice,\n  XRSession,\n  XRFrame,\n  XRView,\n  XRViewport,\n  XRDevicePose,\n  XRLayer,\n  XRWebGLLayer,\n  XRPresentationContext,\n  XRCoordinateSystem,\n  XRFrameOfReference,\n  XRStageBounds,\n  XRStageBoundsPoint,\n  XRInputPose,\n  XRInputSource,\n  XRRay,\n};\n\nconst polyfillSetCompatibleXRDevice = Context => {\n  if (typeof Context.prototype.setCompatibleXRDevice === 'function') {\n    return false;\n  }\n  Context.prototype.setCompatibleXRDevice = function (xrDevice) {\n    return new Promise((resolve, reject) => {\n      if (xrDevice && typeof xrDevice.requestSession === 'function') {\n        resolve();\n      } else {\n        reject();\n      }\n    }).then(() => this[COMPATIBLE_XR_DEVICE] = xrDevice);\n  };\n  return true;\n};\nconst polyfillGetContext = (Canvas, renderContextType) => {\n  const getContext = Canvas.prototype.getContext;\n  Canvas.prototype.getContext = function (contextType, glAttribs) {\n    if (renderContextType && contextType === 'xrpresent') {\n      let ctx = getContext.call(this, renderContextType, glAttribs);\n      return new XRPresentationContext(this, ctx, glAttribs);\n    }\n    const ctx = getContext.call(this, contextType, glAttribs);\n    ctx[POLYFILLED_COMPATIBLE_XR_DEVICE] = true;\n    if (glAttribs && ('compatibleXRDevice' in glAttribs)) {\n      ctx[COMPATIBLE_XR_DEVICE] = glAttribs.compatibleXRDevice;\n    }\n    return ctx;\n  };\n};\n\nfunction create$1() {\n  let out = new ARRAY_TYPE(3);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\nfunction clone$1(a) {\n  var out = new ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\nfunction length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\nfunction fromValues$1(x, y, z) {\n  let out = new ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction copy$1(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\nfunction set$1(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction add$1(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\nfunction subtract$1(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\n\n\n\n\n\n\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n\n\n\n\n\nfunction normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x*x + y*y + z*z;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction cross(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2];\n  let bx = b[0], by = b[1], bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n\n\n\nfunction transformMat4(out, a, m) {\n  let x = a[0], y = a[1], z = a[2];\n  let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\nfunction transformQuat(out, a, q) {\n    let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n    let x = a[0], y = a[1], z = a[2];\n    let uvx = qy * z - qz * y,\n        uvy = qz * x - qx * z,\n        uvz = qx * y - qy * x;\n    let uuvx = qy * uvz - qz * uvy,\n        uuvy = qz * uvx - qx * uvz,\n        uuvz = qx * uvy - qy * uvx;\n    let w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n\n\n\nfunction angle(a, b) {\n  let tempA = fromValues$1(a[0], a[1], a[2]);\n  let tempB = fromValues$1(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  let cosine = dot(tempA, tempB);\n  if(cosine > 1.0) {\n    return 0;\n  }\n  else if(cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n\n\nconst sub$1 = subtract$1;\n\n\n\n\nconst len = length;\n\nconst forEach = (function() {\n  let vec = create$1();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 3;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n    }\n    return a;\n  };\n})();\n\nconst isImageBitmapSupported = global =>\n  !!(global.ImageBitmapRenderingContext &&\n     global.createImageBitmap);\nconst poseMatrixToXRRay = poseMatrix => {\n  const rayOrigin = [];\n  const rayDirection = [];\n  set$1(rayOrigin, 0, 0, 0);\n  transformMat4(rayOrigin, rayOrigin, poseMatrix);\n  set$1(rayDirection, 0, 0, -1);\n  transformMat4(rayDirection, rayDirection, poseMatrix);\n  sub$1(rayDirection, rayDirection, rayOrigin);\n  normalize(rayDirection, rayDirection);\n  return new XRRay(new DOMPointReadOnly$1(rayOrigin[0], rayOrigin[1], rayOrigin[2], 1.0),\n                   new DOMPointReadOnly$1(rayDirection[0], rayDirection[1], rayDirection[2], 0.0),\n                   poseMatrix);\n};\nconst isMobile = global => {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true;})(global.navigator.userAgent||global.navigator.vendor||global.opera);\n  return check;\n};\nconst applyCanvasStylesForMinimalRendering = canvas => {\n  canvas.style.display = 'block';\n  canvas.style.position = 'absolute';\n  canvas.style.width = canvas.style.height = '1px';\n  canvas.style.top = canvas.style.left = '0px';\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar cardboardVrDisplay = createCommonjsModule(function (module, exports) {\n(function (global, factory) {\n\tmodule.exports = factory();\n}(commonjsGlobal, (function () { var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nvar MIN_TIMESTEP = 0.001;\nvar MAX_TIMESTEP = 1;\nvar dataUri = function dataUri(mimeType, svg) {\n  return 'data:' + mimeType + ',' + encodeURIComponent(svg);\n};\nvar lerp = function lerp(a, b, t) {\n  return a + (b - a) * t;\n};\nvar isIOS = function () {\n  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n  return function () {\n    return isIOS;\n  };\n}();\nvar isWebViewAndroid = function () {\n  var isWebViewAndroid = navigator.userAgent.indexOf('Version') !== -1 && navigator.userAgent.indexOf('Android') !== -1 && navigator.userAgent.indexOf('Chrome') !== -1;\n  return function () {\n    return isWebViewAndroid;\n  };\n}();\nvar isSafari = function () {\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  return function () {\n    return isSafari;\n  };\n}();\nvar isFirefoxAndroid = function () {\n  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 && navigator.userAgent.indexOf('Android') !== -1;\n  return function () {\n    return isFirefoxAndroid;\n  };\n}();\nvar getChromeVersion = function () {\n  var match = navigator.userAgent.match(/.*Chrome\\/([0-9]+)/);\n  var value = match ? parseInt(match[1], 10) : null;\n  return function () {\n    return value;\n  };\n}();\nvar isChromeWithoutDeviceMotion = function () {\n  var value = false;\n  if (getChromeVersion() === 65) {\n    var match = navigator.userAgent.match(/.*Chrome\\/([0-9\\.]*)/);\n    if (match) {\n      var _match$1$split = match[1].split('.'),\n          _match$1$split2 = slicedToArray(_match$1$split, 4),\n          major = _match$1$split2[0],\n          minor = _match$1$split2[1],\n          branch = _match$1$split2[2],\n          build = _match$1$split2[3];\n      value = parseInt(branch, 10) === 3325 && parseInt(build, 10) < 148;\n    }\n  }\n  return function () {\n    return value;\n  };\n}();\nvar isR7 = function () {\n  var isR7 = navigator.userAgent.indexOf('R7 Build') !== -1;\n  return function () {\n    return isR7;\n  };\n}();\nvar isLandscapeMode = function isLandscapeMode() {\n  var rtn = window.orientation == 90 || window.orientation == -90;\n  return isR7() ? !rtn : rtn;\n};\nvar isTimestampDeltaValid = function isTimestampDeltaValid(timestampDeltaS) {\n  if (isNaN(timestampDeltaS)) {\n    return false;\n  }\n  if (timestampDeltaS <= MIN_TIMESTEP) {\n    return false;\n  }\n  if (timestampDeltaS > MAX_TIMESTEP) {\n    return false;\n  }\n  return true;\n};\nvar getScreenWidth = function getScreenWidth() {\n  return Math.max(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar getScreenHeight = function getScreenHeight() {\n  return Math.min(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar requestFullscreen = function requestFullscreen(element) {\n  if (isWebViewAndroid()) {\n    return false;\n  }\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar exitFullscreen = function exitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar getFullscreenElement = function getFullscreenElement() {\n  return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n};\nvar linkProgram = function linkProgram(gl, vertexSource, fragmentSource, attribLocationMap) {\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexSource);\n  gl.compileShader(vertexShader);\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentSource);\n  gl.compileShader(fragmentShader);\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  for (var attribName in attribLocationMap) {\n    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);\n  }gl.linkProgram(program);\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n  return program;\n};\nvar getProgramUniforms = function getProgramUniforms(gl, program) {\n  var uniforms = {};\n  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  var uniformName = '';\n  for (var i = 0; i < uniformCount; i++) {\n    var uniformInfo = gl.getActiveUniform(program, i);\n    uniformName = uniformInfo.name.replace('[0]', '');\n    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n  }\n  return uniforms;\n};\nvar orthoMatrix = function orthoMatrix(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right),\n      bt = 1 / (bottom - top),\n      nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n};\nvar isMobile = function isMobile() {\n  var check = false;\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\nvar extend = function extend(dest, src) {\n  for (var key in src) {\n    if (src.hasOwnProperty(key)) {\n      dest[key] = src[key];\n    }\n  }\n  return dest;\n};\nvar safariCssSizeWorkaround = function safariCssSizeWorkaround(canvas) {\n  if (isIOS()) {\n    var width = canvas.style.width;\n    var height = canvas.style.height;\n    canvas.style.width = parseInt(width) + 1 + 'px';\n    canvas.style.height = parseInt(height) + 'px';\n    setTimeout(function () {\n      canvas.style.width = width;\n      canvas.style.height = height;\n    }, 100);\n  }\n  window.canvas = canvas;\n};\nvar frameDataFromPose = function () {\n  var piOver180 = Math.PI / 180.0;\n  var rad45 = Math.PI * 0.25;\n  function mat4_perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov ? fov.upDegrees * piOver180 : rad45),\n        downTan = Math.tan(fov ? fov.downDegrees * piOver180 : rad45),\n        leftTan = Math.tan(fov ? fov.leftDegrees * piOver180 : rad45),\n        rightTan = Math.tan(fov ? fov.rightDegrees * piOver180 : rad45),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n  }\n  function mat4_fromRotationTranslation(out, q, v) {\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n  }\n  function mat4_translate(out, a, v) {\n    var x = v[0],\n        y = v[1],\n        z = v[2],\n        a00,\n        a01,\n        a02,\n        a03,\n        a10,\n        a11,\n        a12,\n        a13,\n        a20,\n        a21,\n        a22,\n        a23;\n    if (a === out) {\n      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n      a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\n      a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\n      a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\n      out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\n      out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\n      out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\n      out[12] = a00 * x + a10 * y + a20 * z + a[12];\n      out[13] = a01 * x + a11 * y + a21 * z + a[13];\n      out[14] = a02 * x + a12 * y + a22 * z + a[14];\n      out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n  }\n  function mat4_invert(out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n  }\n  var defaultOrientation = new Float32Array([0, 0, 0, 1]);\n  var defaultPosition = new Float32Array([0, 0, 0]);\n  function updateEyeMatrices(projection, view, pose, fov, offset, vrDisplay) {\n    mat4_perspectiveFromFieldOfView(projection, fov || null, vrDisplay.depthNear, vrDisplay.depthFar);\n    var orientation = pose.orientation || defaultOrientation;\n    var position = pose.position || defaultPosition;\n    mat4_fromRotationTranslation(view, orientation, position);\n    if (offset) mat4_translate(view, view, offset);\n    mat4_invert(view, view);\n  }\n  return function (frameData, pose, vrDisplay) {\n    if (!frameData || !pose) return false;\n    frameData.pose = pose;\n    frameData.timestamp = pose.timestamp;\n    updateEyeMatrices(frameData.leftProjectionMatrix, frameData.leftViewMatrix, pose, vrDisplay._getFieldOfView(\"left\"), vrDisplay._getEyeOffset(\"left\"), vrDisplay);\n    updateEyeMatrices(frameData.rightProjectionMatrix, frameData.rightViewMatrix, pose, vrDisplay._getFieldOfView(\"right\"), vrDisplay._getEyeOffset(\"right\"), vrDisplay);\n    return true;\n  };\n}();\nvar isInsideCrossOriginIFrame = function isInsideCrossOriginIFrame() {\n  var isFramed = window.self !== window.top;\n  var refOrigin = getOriginFromUrl(document.referrer);\n  var thisOrigin = getOriginFromUrl(window.location.href);\n  return isFramed && refOrigin !== thisOrigin;\n};\nvar getOriginFromUrl = function getOriginFromUrl(url) {\n  var domainIdx;\n  var protoSepIdx = url.indexOf(\"://\");\n  if (protoSepIdx !== -1) {\n    domainIdx = protoSepIdx + 3;\n  } else {\n    domainIdx = 0;\n  }\n  var domainEndIdx = url.indexOf('/', domainIdx);\n  if (domainEndIdx === -1) {\n    domainEndIdx = url.length;\n  }\n  return url.substring(0, domainEndIdx);\n};\nvar getQuaternionAngle = function getQuaternionAngle(quat) {\n  if (quat.w > 1) {\n    console.warn('getQuaternionAngle: w > 1');\n    return 0;\n  }\n  var angle = 2 * Math.acos(quat.w);\n  return angle;\n};\nvar warnOnce = function () {\n  var observedWarnings = {};\n  return function (key, message) {\n    if (observedWarnings[key] === undefined) {\n      console.warn('webvr-polyfill: ' + message);\n      observedWarnings[key] = true;\n    }\n  };\n}();\nvar deprecateWarning = function deprecateWarning(deprecated, suggested) {\n  var alternative = suggested ? 'Please use ' + suggested + ' instead.' : '';\n  warnOnce(deprecated, deprecated + ' has been deprecated. ' + 'This may not work on native WebVR displays. ' + alternative);\n};\nfunction WGLUPreserveGLState(gl, bindings, callback) {\n  if (!bindings) {\n    callback(gl);\n    return;\n  }\n  var boundValues = [];\n  var activeTexture = null;\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    switch (binding) {\n      case gl.TEXTURE_BINDING_2D:\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {\n          console.error(\"TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit\");\n          boundValues.push(null, null);\n          break;\n        }\n        if (!activeTexture) {\n          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        }\n        gl.activeTexture(textureUnit);\n        boundValues.push(gl.getParameter(binding), null);\n        break;\n      case gl.ACTIVE_TEXTURE:\n        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        boundValues.push(null);\n        break;\n      default:\n        boundValues.push(gl.getParameter(binding));\n        break;\n    }\n  }\n  callback(gl);\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    var boundValue = boundValues[i];\n    switch (binding) {\n      case gl.ACTIVE_TEXTURE:\n        break;\n      case gl.ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);\n        break;\n      case gl.COLOR_CLEAR_VALUE:\n        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.COLOR_WRITEMASK:\n        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.CURRENT_PROGRAM:\n        gl.useProgram(boundValue);\n        break;\n      case gl.ELEMENT_ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);\n        break;\n      case gl.FRAMEBUFFER_BINDING:\n        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);\n        break;\n      case gl.RENDERBUFFER_BINDING:\n        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_2D:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_2D, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);\n        break;\n      case gl.VIEWPORT:\n        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.BLEND:\n      case gl.CULL_FACE:\n      case gl.DEPTH_TEST:\n      case gl.SCISSOR_TEST:\n      case gl.STENCIL_TEST:\n        if (boundValue) {\n          gl.enable(binding);\n        } else {\n          gl.disable(binding);\n        }\n        break;\n      default:\n        console.log(\"No GL restore behavior for 0x\" + binding.toString(16));\n        break;\n    }\n    if (activeTexture) {\n      gl.activeTexture(activeTexture);\n    }\n  }\n}\nvar glPreserveState = WGLUPreserveGLState;\nvar distortionVS = ['attribute vec2 position;', 'attribute vec3 texCoord;', 'varying vec2 vTexCoord;', 'uniform vec4 viewportOffsetScale[2];', 'void main() {', '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];', '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;', '  gl_Position = vec4( position, 1.0, 1.0 );', '}'].join('\\n');\nvar distortionFS = ['precision mediump float;', 'uniform sampler2D diffuse;', 'varying vec2 vTexCoord;', 'void main() {', '  gl_FragColor = texture2D(diffuse, vTexCoord);', '}'].join('\\n');\nfunction CardboardDistorter(gl, cardboardUI, bufferScale, dirtySubmitFrameBindings) {\n  this.gl = gl;\n  this.cardboardUI = cardboardUI;\n  this.bufferScale = bufferScale;\n  this.dirtySubmitFrameBindings = dirtySubmitFrameBindings;\n  this.ctxAttribs = gl.getContextAttributes();\n  this.meshWidth = 20;\n  this.meshHeight = 20;\n  this.bufferWidth = gl.drawingBufferWidth;\n  this.bufferHeight = gl.drawingBufferHeight;\n  this.realBindFramebuffer = gl.bindFramebuffer;\n  this.realEnable = gl.enable;\n  this.realDisable = gl.disable;\n  this.realColorMask = gl.colorMask;\n  this.realClearColor = gl.clearColor;\n  this.realViewport = gl.viewport;\n  if (!isIOS()) {\n    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');\n    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');\n  }\n  this.isPatched = false;\n  this.lastBoundFramebuffer = null;\n  this.cullFace = false;\n  this.depthTest = false;\n  this.blend = false;\n  this.scissorTest = false;\n  this.stencilTest = false;\n  this.viewport = [0, 0, 0, 0];\n  this.colorMask = [true, true, true, true];\n  this.clearColor = [0, 0, 0, 0];\n  this.attribs = {\n    position: 0,\n    texCoord: 1\n  };\n  this.program = linkProgram(gl, distortionVS, distortionFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.viewportOffsetScale = new Float32Array(8);\n  this.setTextureBounds();\n  this.vertexBuffer = gl.createBuffer();\n  this.indexBuffer = gl.createBuffer();\n  this.indexCount = 0;\n  this.renderTarget = gl.createTexture();\n  this.framebuffer = gl.createFramebuffer();\n  this.depthStencilBuffer = null;\n  this.depthBuffer = null;\n  this.stencilBuffer = null;\n  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {\n    this.depthStencilBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.depth) {\n    this.depthBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.stencil) {\n    this.stencilBuffer = gl.createRenderbuffer();\n  }\n  this.patch();\n  this.onResize();\n}\nCardboardDistorter.prototype.destroy = function () {\n  var gl = this.gl;\n  this.unpatch();\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n  gl.deleteBuffer(this.indexBuffer);\n  gl.deleteTexture(this.renderTarget);\n  gl.deleteFramebuffer(this.framebuffer);\n  if (this.depthStencilBuffer) {\n    gl.deleteRenderbuffer(this.depthStencilBuffer);\n  }\n  if (this.depthBuffer) {\n    gl.deleteRenderbuffer(this.depthBuffer);\n  }\n  if (this.stencilBuffer) {\n    gl.deleteRenderbuffer(this.stencilBuffer);\n  }\n  if (this.cardboardUI) {\n    this.cardboardUI.destroy();\n  }\n};\nCardboardDistorter.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.RENDERBUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0];\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.realClearColor.call(gl, 0, 0, 0, 1);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, self.bufferWidth, self.bufferHeight, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);\n    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.depthStencilBuffer);\n    } else if (self.ctxAttribs.depth) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, self.depthBuffer);\n    } else if (self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.stencilBuffer);\n    }\n    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      console.error('Framebuffer incomplete!');\n    }\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    self.realClearColor.apply(gl, self.clearColor);\n  });\n  if (this.cardboardUI) {\n    this.cardboardUI.onResize();\n  }\n};\nCardboardDistorter.prototype.patch = function () {\n  if (this.isPatched) {\n    return;\n  }\n  var self = this;\n  var canvas = this.gl.canvas;\n  var gl = this.gl;\n  if (!isIOS()) {\n    canvas.width = getScreenWidth() * this.bufferScale;\n    canvas.height = getScreenHeight() * this.bufferScale;\n    Object.defineProperty(canvas, 'width', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferWidth;\n      },\n      set: function set(value) {\n        self.bufferWidth = value;\n        self.realCanvasWidth.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n    Object.defineProperty(canvas, 'height', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferHeight;\n      },\n      set: function set(value) {\n        self.bufferHeight = value;\n        self.realCanvasHeight.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n  }\n  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n  if (this.lastBoundFramebuffer == null) {\n    this.lastBoundFramebuffer = this.framebuffer;\n    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  }\n  this.gl.bindFramebuffer = function (target, framebuffer) {\n    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;\n    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);\n  };\n  this.cullFace = gl.getParameter(gl.CULL_FACE);\n  this.depthTest = gl.getParameter(gl.DEPTH_TEST);\n  this.blend = gl.getParameter(gl.BLEND);\n  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);\n  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);\n  gl.enable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = true;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = true;break;\n      case gl.BLEND:\n        self.blend = true;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = true;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = true;break;\n    }\n    self.realEnable.call(gl, pname);\n  };\n  gl.disable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = false;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = false;break;\n      case gl.BLEND:\n        self.blend = false;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = false;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = false;break;\n    }\n    self.realDisable.call(gl, pname);\n  };\n  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);\n  gl.colorMask = function (r, g, b, a) {\n    self.colorMask[0] = r;\n    self.colorMask[1] = g;\n    self.colorMask[2] = b;\n    self.colorMask[3] = a;\n    self.realColorMask.call(gl, r, g, b, a);\n  };\n  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);\n  gl.clearColor = function (r, g, b, a) {\n    self.clearColor[0] = r;\n    self.clearColor[1] = g;\n    self.clearColor[2] = b;\n    self.clearColor[3] = a;\n    self.realClearColor.call(gl, r, g, b, a);\n  };\n  this.viewport = gl.getParameter(gl.VIEWPORT);\n  gl.viewport = function (x, y, w, h) {\n    self.viewport[0] = x;\n    self.viewport[1] = y;\n    self.viewport[2] = w;\n    self.viewport[3] = h;\n    self.realViewport.call(gl, x, y, w, h);\n  };\n  this.isPatched = true;\n  safariCssSizeWorkaround(canvas);\n};\nCardboardDistorter.prototype.unpatch = function () {\n  if (!this.isPatched) {\n    return;\n  }\n  var gl = this.gl;\n  var canvas = this.gl.canvas;\n  if (!isIOS()) {\n    Object.defineProperty(canvas, 'width', this.realCanvasWidth);\n    Object.defineProperty(canvas, 'height', this.realCanvasHeight);\n  }\n  canvas.width = this.bufferWidth;\n  canvas.height = this.bufferHeight;\n  gl.bindFramebuffer = this.realBindFramebuffer;\n  gl.enable = this.realEnable;\n  gl.disable = this.realDisable;\n  gl.colorMask = this.realColorMask;\n  gl.clearColor = this.realClearColor;\n  gl.viewport = this.realViewport;\n  if (this.lastBoundFramebuffer == this.framebuffer) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n  this.isPatched = false;\n  setTimeout(function () {\n    safariCssSizeWorkaround(canvas);\n  }, 1);\n};\nCardboardDistorter.prototype.setTextureBounds = function (leftBounds, rightBounds) {\n  if (!leftBounds) {\n    leftBounds = [0, 0, 0.5, 1];\n  }\n  if (!rightBounds) {\n    rightBounds = [0.5, 0, 0.5, 1];\n  }\n  this.viewportOffsetScale[0] = leftBounds[0];\n  this.viewportOffsetScale[1] = leftBounds[1];\n  this.viewportOffsetScale[2] = leftBounds[2];\n  this.viewportOffsetScale[3] = leftBounds[3];\n  this.viewportOffsetScale[4] = rightBounds[0];\n  this.viewportOffsetScale[5] = rightBounds[1];\n  this.viewportOffsetScale[6] = rightBounds[2];\n  this.viewportOffsetScale[7] = rightBounds[3];\n};\nCardboardDistorter.prototype.submitFrame = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [];\n  if (!this.dirtySubmitFrameBindings) {\n    glState.push(gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0);\n  }\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    if (self.cullFace) {\n      self.realDisable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realDisable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realDisable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realDisable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    if (self.ctxAttribs.alpha || isIOS()) {\n      self.realClearColor.call(gl, 0, 0, 0, 1);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    gl.useProgram(self.program);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.enableVertexAttribArray(self.attribs.position);\n    gl.enableVertexAttribArray(self.attribs.texCoord);\n    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.uniform1i(self.uniforms.diffuse, 0);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);\n    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);\n    if (self.cardboardUI) {\n      self.cardboardUI.renderNoState();\n    }\n    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);\n    if (!self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.call(gl, 0, 0, 0, 0);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    if (!self.dirtySubmitFrameBindings) {\n      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    }\n    if (self.cullFace) {\n      self.realEnable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realEnable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realEnable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realEnable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.apply(gl, self.clearColor);\n    }\n  });\n  if (isIOS()) {\n    var canvas = gl.canvas;\n    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {\n      self.bufferWidth = canvas.width;\n      self.bufferHeight = canvas.height;\n      self.onResize();\n    }\n  }\n};\nCardboardDistorter.prototype.updateDeviceInfo = function (deviceInfo) {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n    if (!self.indexCount) {\n      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n      self.indexCount = indices.length;\n    }\n  });\n};\nCardboardDistorter.prototype.computeMeshVertices_ = function (width, height, deviceInfo) {\n  var vertices = new Float32Array(2 * width * height * 5);\n  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n  var vidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        var u = i / (width - 1);\n        var v = j / (height - 1);\n        var s = u;\n        var t = v;\n        var x = lerp(lensFrustum[0], lensFrustum[2], u);\n        var y = lerp(lensFrustum[3], lensFrustum[1], v);\n        var d = Math.sqrt(x * x + y * y);\n        var r = deviceInfo.distortion.distortInverse(d);\n        var p = x * r / d;\n        var q = y * r / d;\n        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n        u = (viewport.x + u * viewport.width - 0.5) * 2.0;\n        v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n        vertices[vidx * 5 + 0] = u;\n        vertices[vidx * 5 + 1] = v;\n        vertices[vidx * 5 + 2] = s;\n        vertices[vidx * 5 + 3] = t;\n        vertices[vidx * 5 + 4] = e;\n      }\n    }\n    var w = lensFrustum[2] - lensFrustum[0];\n    lensFrustum[0] = -(w + lensFrustum[0]);\n    lensFrustum[2] = w - lensFrustum[2];\n    w = noLensFrustum[2] - noLensFrustum[0];\n    noLensFrustum[0] = -(w + noLensFrustum[0]);\n    noLensFrustum[2] = w - noLensFrustum[2];\n    viewport.x = 1 - (viewport.x + viewport.width);\n  }\n  return vertices;\n};\nCardboardDistorter.prototype.computeMeshIndices_ = function (width, height) {\n  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n  var halfwidth = width / 2;\n  var halfheight = height / 2;\n  var vidx = 0;\n  var iidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        if (i == 0 || j == 0) continue;\n        if (i <= halfwidth == j <= halfheight) {\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - 1;\n        } else {\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width - 1;\n        }\n      }\n    }\n  }\n  return indices;\n};\nCardboardDistorter.prototype.getOwnPropertyDescriptor_ = function (proto, attrName) {\n  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);\n  if (descriptor.get === undefined || descriptor.set === undefined) {\n    descriptor.configurable = true;\n    descriptor.enumerable = true;\n    descriptor.get = function () {\n      return this.getAttribute(attrName);\n    };\n    descriptor.set = function (val) {\n      this.setAttribute(attrName, val);\n    };\n  }\n  return descriptor;\n};\nvar uiVS = ['attribute vec2 position;', 'uniform mat4 projectionMat;', 'void main() {', '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );', '}'].join('\\n');\nvar uiFS = ['precision mediump float;', 'uniform vec4 color;', 'void main() {', '  gl_FragColor = color;', '}'].join('\\n');\nvar DEG2RAD = Math.PI / 180.0;\nvar kAnglePerGearSection = 60;\nvar kOuterRimEndAngle = 12;\nvar kInnerRimBeginAngle = 20;\nvar kOuterRadius = 1;\nvar kMiddleRadius = 0.75;\nvar kInnerRadius = 0.3125;\nvar kCenterLineThicknessDp = 4;\nvar kButtonWidthDp = 28;\nvar kTouchSlopFactor = 1.5;\nfunction CardboardUI(gl) {\n  this.gl = gl;\n  this.attribs = {\n    position: 0\n  };\n  this.program = linkProgram(gl, uiVS, uiFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.vertexBuffer = gl.createBuffer();\n  this.gearOffset = 0;\n  this.gearVertexCount = 0;\n  this.arrowOffset = 0;\n  this.arrowVertexCount = 0;\n  this.projMat = new Float32Array(16);\n  this.listener = null;\n  this.onResize();\n}\nCardboardUI.prototype.destroy = function () {\n  var gl = this.gl;\n  if (this.listener) {\n    gl.canvas.removeEventListener('click', this.listener, false);\n  }\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n};\nCardboardUI.prototype.listen = function (optionsCallback, backCallback) {\n  var canvas = this.gl.canvas;\n  this.listener = function (event) {\n    var midline = canvas.clientWidth / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor;\n    if (event.clientX > midline - buttonSize && event.clientX < midline + buttonSize && event.clientY > canvas.clientHeight - buttonSize) {\n      optionsCallback(event);\n    }\n    else if (event.clientX < buttonSize && event.clientY < buttonSize) {\n        backCallback(event);\n      }\n  };\n  canvas.addEventListener('click', this.listener, false);\n};\nCardboardUI.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = [];\n    var midline = gl.drawingBufferWidth / 2;\n    var physicalPixels = Math.max(screen.width, screen.height) * window.devicePixelRatio;\n    var scalingRatio = gl.drawingBufferWidth / physicalPixels;\n    var dps = scalingRatio * window.devicePixelRatio;\n    var lineWidth = kCenterLineThicknessDp * dps / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;\n    var buttonScale = kButtonWidthDp * dps / 2;\n    var buttonBorder = (kButtonWidthDp * kTouchSlopFactor - kButtonWidthDp) * dps;\n    vertices.push(midline - lineWidth, buttonSize);\n    vertices.push(midline - lineWidth, gl.drawingBufferHeight);\n    vertices.push(midline + lineWidth, buttonSize);\n    vertices.push(midline + lineWidth, gl.drawingBufferHeight);\n    self.gearOffset = vertices.length / 2;\n    function addGearSegment(theta, r) {\n      var angle = (90 - theta) * DEG2RAD;\n      var x = Math.cos(angle);\n      var y = Math.sin(angle);\n      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);\n      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);\n    }\n    for (var i = 0; i <= 6; i++) {\n      var segmentTheta = i * kAnglePerGearSection;\n      addGearSegment(segmentTheta, kOuterRadius);\n      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);\n      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);\n    }\n    self.gearVertexCount = vertices.length / 2 - self.gearOffset;\n    self.arrowOffset = vertices.length / 2;\n    function addArrowVertex(x, y) {\n      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);\n    }\n    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, 0);\n    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, buttonScale * 2);\n    addArrowVertex(buttonScale + angledLineWidth, buttonScale * 2 - angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(angledLineWidth, buttonScale - lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);\n    self.arrowVertexCount = vertices.length / 2 - self.arrowOffset;\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n  });\n};\nCardboardUI.prototype.render = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.CULL_FACE, gl.DEPTH_TEST, gl.BLEND, gl.SCISSOR_TEST, gl.STENCIL_TEST, gl.COLOR_WRITEMASK, gl.VIEWPORT, gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    gl.disable(gl.CULL_FACE);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.BLEND);\n    gl.disable(gl.SCISSOR_TEST);\n    gl.disable(gl.STENCIL_TEST);\n    gl.colorMask(true, true, true, true);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.renderNoState();\n  });\n};\nCardboardUI.prototype.renderNoState = function () {\n  var gl = this.gl;\n  gl.useProgram(this.program);\n  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n  gl.enableVertexAttribArray(this.attribs.position);\n  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);\n  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);\n  orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);\n  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);\n};\nfunction Distortion(coefficients) {\n  this.coefficients = coefficients;\n}\nDistortion.prototype.distortInverse = function (radius) {\n  var r0 = 0;\n  var r1 = 1;\n  var dr0 = radius - this.distort(r0);\n  while (Math.abs(r1 - r0) > 0.0001             ) {\n    var dr1 = radius - this.distort(r1);\n    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));\n    r0 = r1;\n    r1 = r2;\n    dr0 = dr1;\n  }\n  return r1;\n};\nDistortion.prototype.distort = function (radius) {\n  var r2 = radius * radius;\n  var ret = 0;\n  for (var i = 0; i < this.coefficients.length; i++) {\n    ret = r2 * (ret + this.coefficients[i]);\n  }\n  return (ret + 1) * radius;\n};\nvar degToRad = Math.PI / 180;\nvar radToDeg = 180 / Math.PI;\nvar Vector3 = function Vector3(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\nVector3.prototype = {\n  constructor: Vector3,\n  set: function set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  },\n  copy: function copy(v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  },\n  length: function length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  normalize: function normalize() {\n    var scalar = this.length();\n    if (scalar !== 0) {\n      var invScalar = 1 / scalar;\n      this.multiplyScalar(invScalar);\n    } else {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n    return this;\n  },\n  multiplyScalar: function multiplyScalar(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n  },\n  applyQuaternion: function applyQuaternion(q) {\n    var x = this.x;\n    var y = this.y;\n    var z = this.z;\n    var qx = q.x;\n    var qy = q.y;\n    var qz = q.z;\n    var qw = q.w;\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z;\n    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return this;\n  },\n  dot: function dot(v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  },\n  crossVectors: function crossVectors(a, b) {\n    var ax = a.x,\n        ay = a.y,\n        az = a.z;\n    var bx = b.x,\n        by = b.y,\n        bz = b.z;\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n    return this;\n  }\n};\nvar Quaternion = function Quaternion(x, y, z, w) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  this.w = w !== undefined ? w : 1;\n};\nQuaternion.prototype = {\n  constructor: Quaternion,\n  set: function set(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  },\n  copy: function copy(quaternion) {\n    this.x = quaternion.x;\n    this.y = quaternion.y;\n    this.z = quaternion.z;\n    this.w = quaternion.w;\n    return this;\n  },\n  setFromEulerXYZ: function setFromEulerXYZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 + s1 * s2 * c3;\n    this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    return this;\n  },\n  setFromEulerYXZ: function setFromEulerYXZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 - s1 * s2 * c3;\n    this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    return this;\n  },\n  setFromAxisAngle: function setFromAxisAngle(axis, angle) {\n    var halfAngle = angle / 2,\n        s = Math.sin(halfAngle);\n    this.x = axis.x * s;\n    this.y = axis.y * s;\n    this.z = axis.z * s;\n    this.w = Math.cos(halfAngle);\n    return this;\n  },\n  multiply: function multiply(q) {\n    return this.multiplyQuaternions(this, q);\n  },\n  multiplyQuaternions: function multiplyQuaternions(a, b) {\n    var qax = a.x,\n        qay = a.y,\n        qaz = a.z,\n        qaw = a.w;\n    var qbx = b.x,\n        qby = b.y,\n        qbz = b.z,\n        qbw = b.w;\n    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n    return this;\n  },\n  inverse: function inverse() {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    this.normalize();\n    return this;\n  },\n  normalize: function normalize() {\n    var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 1;\n    } else {\n      l = 1 / l;\n      this.x = this.x * l;\n      this.y = this.y * l;\n      this.z = this.z * l;\n      this.w = this.w * l;\n    }\n    return this;\n  },\n  slerp: function slerp(qb, t) {\n    if (t === 0) return this;\n    if (t === 1) return this.copy(qb);\n    var x = this.x,\n        y = this.y,\n        z = this.z,\n        w = this.w;\n    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n    if (cosHalfTheta < 0) {\n      this.w = -qb.w;\n      this.x = -qb.x;\n      this.y = -qb.y;\n      this.z = -qb.z;\n      cosHalfTheta = -cosHalfTheta;\n    } else {\n      this.copy(qb);\n    }\n    if (cosHalfTheta >= 1.0) {\n      this.w = w;\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      return this;\n    }\n    var halfTheta = Math.acos(cosHalfTheta);\n    var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n    if (Math.abs(sinHalfTheta) < 0.001) {\n      this.w = 0.5 * (w + this.w);\n      this.x = 0.5 * (x + this.x);\n      this.y = 0.5 * (y + this.y);\n      this.z = 0.5 * (z + this.z);\n      return this;\n    }\n    var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n        ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n    this.w = w * ratioA + this.w * ratioB;\n    this.x = x * ratioA + this.x * ratioB;\n    this.y = y * ratioA + this.y * ratioB;\n    this.z = z * ratioA + this.z * ratioB;\n    return this;\n  },\n  setFromUnitVectors: function () {\n    var v1, r;\n    var EPS = 0.000001;\n    return function (vFrom, vTo) {\n      if (v1 === undefined) v1 = new Vector3();\n      r = vFrom.dot(vTo) + 1;\n      if (r < EPS) {\n        r = 0;\n        if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n          v1.set(-vFrom.y, vFrom.x, 0);\n        } else {\n          v1.set(0, -vFrom.z, vFrom.y);\n        }\n      } else {\n        v1.crossVectors(vFrom, vTo);\n      }\n      this.x = v1.x;\n      this.y = v1.y;\n      this.z = v1.z;\n      this.w = r;\n      this.normalize();\n      return this;\n    };\n  }()\n};\nfunction Device(params) {\n  this.width = params.width || getScreenWidth();\n  this.height = params.height || getScreenHeight();\n  this.widthMeters = params.widthMeters;\n  this.heightMeters = params.heightMeters;\n  this.bevelMeters = params.bevelMeters;\n}\nvar DEFAULT_ANDROID = new Device({\n  widthMeters: 0.110,\n  heightMeters: 0.062,\n  bevelMeters: 0.004\n});\nvar DEFAULT_IOS = new Device({\n  widthMeters: 0.1038,\n  heightMeters: 0.0584,\n  bevelMeters: 0.004\n});\nvar Viewers = {\n  CardboardV1: new CardboardViewer({\n    id: 'CardboardV1',\n    label: 'Cardboard I/O 2014',\n    fov: 40,\n    interLensDistance: 0.060,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.042,\n    distortionCoefficients: [0.441, 0.156],\n    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139, -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841, 0.0651772, -0.01488963, 0.001559834]\n  }),\n  CardboardV2: new CardboardViewer({\n    id: 'CardboardV2',\n    label: 'Cardboard I/O 2015',\n    fov: 60,\n    interLensDistance: 0.064,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.039,\n    distortionCoefficients: [0.34, 0.55],\n    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051, 1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956, -9.904169E-4, 6.183535E-5, -1.6981803E-6]\n  })\n};\nfunction DeviceInfo(deviceParams, additionalViewers) {\n  this.viewer = Viewers.CardboardV2;\n  this.updateDeviceParams(deviceParams);\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n  for (var i = 0; i < additionalViewers.length; i++) {\n    var viewer = additionalViewers[i];\n    Viewers[viewer.id] = new CardboardViewer(viewer);\n  }\n}\nDeviceInfo.prototype.updateDeviceParams = function (deviceParams) {\n  this.device = this.determineDevice_(deviceParams) || this.device;\n};\nDeviceInfo.prototype.getDevice = function () {\n  return this.device;\n};\nDeviceInfo.prototype.setViewer = function (viewer) {\n  this.viewer = viewer;\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n};\nDeviceInfo.prototype.determineDevice_ = function (deviceParams) {\n  if (!deviceParams) {\n    if (isIOS()) {\n      console.warn('Using fallback iOS device measurements.');\n      return DEFAULT_IOS;\n    } else {\n      console.warn('Using fallback Android device measurements.');\n      return DEFAULT_ANDROID;\n    }\n  }\n  var METERS_PER_INCH = 0.0254;\n  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;\n  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  return new Device({\n    widthMeters: metersPerPixelX * width,\n    heightMeters: metersPerPixelY * height,\n    bevelMeters: deviceParams.bevelMm * 0.001\n  });\n};\nDeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;\n  var innerDist = viewer.interLensDistance / 2;\n  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;\n  var topDist = device.heightMeters - bottomDist;\n  var outerAngle = radToDeg * Math.atan(distortion.distort(outerDist / eyeToScreenDistance));\n  var innerAngle = radToDeg * Math.atan(distortion.distort(innerDist / eyeToScreenDistance));\n  var bottomAngle = radToDeg * Math.atan(distortion.distort(bottomDist / eyeToScreenDistance));\n  var topAngle = radToDeg * Math.atan(distortion.distort(topDist / eyeToScreenDistance));\n  return {\n    leftDegrees: Math.min(outerAngle, viewer.fov),\n    rightDegrees: Math.min(innerAngle, viewer.fov),\n    downDegrees: Math.min(bottomAngle, viewer.fov),\n    upDegrees: Math.min(topAngle, viewer.fov)\n  };\n};\nDeviceInfo.prototype.getLeftEyeVisibleTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var fovLeft = Math.tan(-degToRad * viewer.fov);\n  var fovTop = Math.tan(degToRad * viewer.fov);\n  var fovRight = Math.tan(degToRad * viewer.fov);\n  var fovBottom = Math.tan(-degToRad * viewer.fov);\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);\n  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);\n  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);\n  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);\n  var result = new Float32Array(4);\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeNoLensTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var result = new Float32Array(4);\n  var fovLeft = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var fovTop = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovRight = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovBottom = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = (centerX - halfWidth) / centerZ;\n  var screenTop = (centerY + halfHeight) / centerZ;\n  var screenRight = (centerX + halfWidth) / centerZ;\n  var screenBottom = (centerY - halfHeight) / centerZ;\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeVisibleScreenRect = function (undistortedFrustum) {\n  var viewer = this.viewer;\n  var device = this.device;\n  var dist = viewer.screenLensDistance;\n  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;\n  var eyeY = viewer.baselineLensDistance - device.bevelMeters;\n  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;\n  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;\n  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;\n  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;\n  return {\n    x: left,\n    y: bottom,\n    width: right - left,\n    height: top - bottom\n  };\n};\nDeviceInfo.prototype.getFieldOfViewLeftEye = function (opt_isUndistorted) {\n  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() : this.getDistortedFieldOfViewLeftEye();\n};\nDeviceInfo.prototype.getFieldOfViewRightEye = function (opt_isUndistorted) {\n  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);\n  return {\n    leftDegrees: fov.rightDegrees,\n    rightDegrees: fov.leftDegrees,\n    upDegrees: fov.upDegrees,\n    downDegrees: fov.downDegrees\n  };\n};\nDeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  return {\n    leftDegrees: radToDeg * Math.atan(p.outerDist),\n    rightDegrees: radToDeg * Math.atan(p.innerDist),\n    downDegrees: radToDeg * Math.atan(p.bottomDist),\n    upDegrees: radToDeg * Math.atan(p.topDist)\n  };\n};\nDeviceInfo.prototype.getUndistortedViewportLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  var viewer = this.viewer;\n  var device = this.device;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var xPxPerTanAngle = device.width / screenWidth;\n  var yPxPerTanAngle = device.height / screenHeight;\n  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);\n  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);\n  return {\n    x: x,\n    y: y,\n    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,\n    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y\n  };\n};\nDeviceInfo.prototype.getUndistortedParams_ = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var eyePosX = screenWidth / 2 - halfLensDistance;\n  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;\n  var maxFov = viewer.fov;\n  var viewerMax = distortion.distortInverse(Math.tan(degToRad * maxFov));\n  var outerDist = Math.min(eyePosX, viewerMax);\n  var innerDist = Math.min(halfLensDistance, viewerMax);\n  var bottomDist = Math.min(eyePosY, viewerMax);\n  var topDist = Math.min(screenHeight - eyePosY, viewerMax);\n  return {\n    outerDist: outerDist,\n    innerDist: innerDist,\n    topDist: topDist,\n    bottomDist: bottomDist,\n    eyePosX: eyePosX,\n    eyePosY: eyePosY\n  };\n};\nfunction CardboardViewer(params) {\n  this.id = params.id;\n  this.label = params.label;\n  this.fov = params.fov;\n  this.interLensDistance = params.interLensDistance;\n  this.baselineLensDistance = params.baselineLensDistance;\n  this.screenLensDistance = params.screenLensDistance;\n  this.distortionCoefficients = params.distortionCoefficients;\n  this.inverseCoefficients = params.inverseCoefficients;\n}\nDeviceInfo.Viewers = Viewers;\nvar format = 1;\nvar last_updated = \"2018-12-10T17:01:42Z\";\nvar devices = [{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/Nexus 7/*\"},{\"ua\":\"Nexus 7\"}],\"dpi\":[320.8,323],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_Z00AD/*\"},{\"ua\":\"ASUS_Z00AD\"}],\"dpi\":[403,404.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2 XL/*\"},{\"ua\":\"Pixel 2 XL\"}],\"dpi\":537.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3 XL/*\"},{\"ua\":\"Pixel 3 XL\"}],\"dpi\":[558.5,553.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel XL/*\"},{\"ua\":\"Pixel XL\"}],\"dpi\":[537.9,533],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3/*\"},{\"ua\":\"Pixel 3\"}],\"dpi\":442.4,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2/*\"},{\"ua\":\"Pixel 2\"}],\"dpi\":441,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel/*\"},{\"ua\":\"Pixel\"}],\"dpi\":[432.6,436.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC6435LVW/*\"},{\"ua\":\"HTC6435LVW\"}],\"dpi\":[449.7,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One XL/*\"},{\"ua\":\"HTC One XL\"}],\"dpi\":[315.3,314.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"htc/*/Nexus 9/*\"},{\"ua\":\"Nexus 9\"}],\"dpi\":289,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One M9/*\"},{\"ua\":\"HTC One M9\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One_M8/*\"},{\"ua\":\"HTC One_M8\"}],\"dpi\":[449.7,447.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One/*\"},{\"ua\":\"HTC One\"}],\"dpi\":472.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/Nexus 6P/*\"},{\"ua\":\"Nexus 6P\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BLN-L24/*\"},{\"ua\":\"HONORBLN-L24\"}],\"dpi\":480,\"bw\":4,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BKL-L09/*\"},{\"ua\":\"BKL-L09\"}],\"dpi\":403,\"bw\":3.47,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LENOVO/*/Lenovo PB2-690Y/*\"},{\"ua\":\"Lenovo PB2-690Y\"}],\"dpi\":[457.2,454.713],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5X/*\"},{\"ua\":\"Nexus 5X\"}],\"dpi\":[422,419.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS345/*\"},{\"ua\":\"LGMS345\"}],\"dpi\":[221.7,219.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D800/*\"},{\"ua\":\"LG-D800\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D850/*\"},{\"ua\":\"LG-D850\"}],\"dpi\":[537.9,541.9],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/VS985 4G/*\"},{\"ua\":\"VS985 4G\"}],\"dpi\":[537.9,535.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5/*\"},{\"ua\":\"Nexus 5 B\"}],\"dpi\":[442.4,444.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 4/*\"},{\"ua\":\"Nexus 4\"}],\"dpi\":[319.8,318.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-P769/*\"},{\"ua\":\"LG-P769\"}],\"dpi\":[240.6,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS323/*\"},{\"ua\":\"LGMS323\"}],\"dpi\":[206.6,204.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGLS996/*\"},{\"ua\":\"LGLS996\"}],\"dpi\":[403.4,401.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/4560MMX/*\"},{\"ua\":\"4560MMX\"}],\"dpi\":[240,219.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/A250/*\"},{\"ua\":\"Micromax A250\"}],\"dpi\":[480,446.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/Micromax AQ4501/*\"},{\"ua\":\"Micromax AQ4501\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G5/*\"},{\"ua\":\"Moto G (5) Plus\"}],\"dpi\":[403.4,403],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/DROID RAZR/*\"},{\"ua\":\"DROID RAZR\"}],\"dpi\":[368.1,256.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT830C/*\"},{\"ua\":\"XT830C\"}],\"dpi\":[254,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1021/*\"},{\"ua\":\"XT1021\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1023/*\"},{\"ua\":\"XT1023\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1028/*\"},{\"ua\":\"XT1028\"}],\"dpi\":[326.6,327.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1034/*\"},{\"ua\":\"XT1034\"}],\"dpi\":[326.6,328.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1053/*\"},{\"ua\":\"XT1053\"}],\"dpi\":[315.3,316.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1562/*\"},{\"ua\":\"XT1562\"}],\"dpi\":[403.4,402.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/Nexus 6/*\"},{\"ua\":\"Nexus 6 B\"}],\"dpi\":[494.3,489.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1063/*\"},{\"ua\":\"XT1063\"}],\"dpi\":[295,296.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1064/*\"},{\"ua\":\"XT1064\"}],\"dpi\":[295,295.6],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1092/*\"},{\"ua\":\"XT1092\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1095/*\"},{\"ua\":\"XT1095\"}],\"dpi\":[422,423.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G4/*\"},{\"ua\":\"Moto G (4)\"}],\"dpi\":401,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/A0001/*\"},{\"ua\":\"A0001\"}],\"dpi\":[403.4,401],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1005/*\"},{\"ua\":\"ONE E1005\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2005/*\"},{\"ua\":\"ONE A2005\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A5000/*\"},{\"ua\":\"ONEPLUS A5000 \"}],\"dpi\":[403.411,399.737],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A5010/*\"},{\"ua\":\"ONEPLUS A5010\"}],\"dpi\":[403,400],\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OPPO/*/X909/*\"},{\"ua\":\"X909\"}],\"dpi\":[442.4,444.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9082/*\"},{\"ua\":\"GT-I9082\"}],\"dpi\":[184.7,185.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G360P/*\"},{\"ua\":\"SM-G360P\"}],\"dpi\":[196.7,205.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Nexus S/*\"},{\"ua\":\"Nexus S\"}],\"dpi\":[234.5,229.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[304.8,303.9],\"bw\":5,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T230NU/*\"},{\"ua\":\"SM-T230NU\"}],\"dpi\":216,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-T399/*\"},{\"ua\":\"SGH-T399\"}],\"dpi\":[217.7,231.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-M919/*\"},{\"ua\":\"SGH-M919\"}],\"dpi\":[440.8,437.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N9005/*\"},{\"ua\":\"SM-N9005\"}],\"dpi\":[386.4,387],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SM-N900A/*\"},{\"ua\":\"SAMSUNG-SM-N900A\"}],\"dpi\":[386.4,387.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9500/*\"},{\"ua\":\"GT-I9500\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9505/*\"},{\"ua\":\"GT-I9505\"}],\"dpi\":439.4,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900F/*\"},{\"ua\":\"SM-G900F\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900M/*\"},{\"ua\":\"SM-G900M\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G800F/*\"},{\"ua\":\"SM-G800F\"}],\"dpi\":326.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G906S/*\"},{\"ua\":\"SM-G906S\"}],\"dpi\":[562.7,572.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[306.7,304.8],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T535/*\"},{\"ua\":\"SM-T535\"}],\"dpi\":[142.6,136.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920C/*\"},{\"ua\":\"SM-N920C\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920P/*\"},{\"ua\":\"SM-N920P\"}],\"dpi\":[386.3655,390.144],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920W8/*\"},{\"ua\":\"SM-N920W8\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300I/*\"},{\"ua\":\"GT-I9300I\"}],\"dpi\":[304.8,305.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9195/*\"},{\"ua\":\"GT-I9195\"}],\"dpi\":[249.4,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-L520/*\"},{\"ua\":\"SPH-L520\"}],\"dpi\":[249.4,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SGH-I717/*\"},{\"ua\":\"SAMSUNG-SGH-I717\"}],\"dpi\":285.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-D710/*\"},{\"ua\":\"SPH-D710\"}],\"dpi\":[217.7,204.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-N7100/*\"},{\"ua\":\"GT-N7100\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SCH-I605/*\"},{\"ua\":\"SCH-I605\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Galaxy Nexus/*\"},{\"ua\":\"Galaxy Nexus\"}],\"dpi\":[315.3,314.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910H/*\"},{\"ua\":\"SM-N910H\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910C/*\"},{\"ua\":\"SM-N910C\"}],\"dpi\":[515.2,520.2],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G130M/*\"},{\"ua\":\"SM-G130M\"}],\"dpi\":[165.9,164.8],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G928I/*\"},{\"ua\":\"SM-G928I\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920F/*\"},{\"ua\":\"SM-G920F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920P/*\"},{\"ua\":\"SM-G920P\"}],\"dpi\":[522.5,577],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925F/*\"},{\"ua\":\"SM-G925F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925V/*\"},{\"ua\":\"SM-G925V\"}],\"dpi\":[522.5,576.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G930F/*\"},{\"ua\":\"SM-G930F\"}],\"dpi\":576.6,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G935F/*\"},{\"ua\":\"SM-G935F\"}],\"dpi\":533,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G950F/*\"},{\"ua\":\"SM-G950F\"}],\"dpi\":[562.707,565.293],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955U/*\"},{\"ua\":\"SM-G955U\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955F/*\"},{\"ua\":\"SM-G955F\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/C6903/*\"},{\"ua\":\"C6903\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/D6653/*\"},{\"ua\":\"D6653\"}],\"dpi\":[428.6,427.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6653/*\"},{\"ua\":\"E6653\"}],\"dpi\":[428.6,425.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6853/*\"},{\"ua\":\"E6853\"}],\"dpi\":[403.4,401.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/SGP321/*\"},{\"ua\":\"SGP321\"}],\"dpi\":[224.7,224.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"TCT/*/ALCATEL ONE TOUCH Fierce/*\"},{\"ua\":\"ALCATEL ONE TOUCH Fierce\"}],\"dpi\":[240,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"THL/*/thl 5000/*\"},{\"ua\":\"thl 5000\"}],\"dpi\":[480,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Fly/*/IQ4412/*\"},{\"ua\":\"IQ4412\"}],\"dpi\":307.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"ZTE/*/ZTE Blade L2/*\"},{\"ua\":\"ZTE Blade L2\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"BENEVE/*/VR518/*\"},{\"ua\":\"VR518\"}],\"dpi\":480,\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[640,960]}],\"dpi\":[325.1,328.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[640,1136]}],\"dpi\":[317.1,320.2],\"bw\":3,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[750,1334]}],\"dpi\":326.4,\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2208]}],\"dpi\":[453.6,458.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2001]}],\"dpi\":[410.9,415.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2436]}],\"dpi\":458,\"bw\":4,\"ac\":1000}];\nvar DPDB_CACHE = {\n\tformat: format,\n\tlast_updated: last_updated,\n\tdevices: devices\n};\nfunction Dpdb(url, onDeviceParamsUpdated) {\n  this.dpdb = DPDB_CACHE;\n  this.recalculateDeviceParams_();\n  if (url) {\n    this.onDeviceParamsUpdated = onDeviceParamsUpdated;\n    var xhr = new XMLHttpRequest();\n    var obj = this;\n    xhr.open('GET', url, true);\n    xhr.addEventListener('load', function () {\n      obj.loading = false;\n      if (xhr.status >= 200 && xhr.status <= 299) {\n        obj.dpdb = JSON.parse(xhr.response);\n        obj.recalculateDeviceParams_();\n      } else {\n        console.error('Error loading online DPDB!');\n      }\n    });\n    xhr.send();\n  }\n}\nDpdb.prototype.getDeviceParams = function () {\n  return this.deviceParams;\n};\nDpdb.prototype.recalculateDeviceParams_ = function () {\n  var newDeviceParams = this.calcDeviceParams_();\n  if (newDeviceParams) {\n    this.deviceParams = newDeviceParams;\n    if (this.onDeviceParamsUpdated) {\n      this.onDeviceParamsUpdated(this.deviceParams);\n    }\n  } else {\n    console.error('Failed to recalculate device parameters.');\n  }\n};\nDpdb.prototype.calcDeviceParams_ = function () {\n  var db = this.dpdb;\n  if (!db) {\n    console.error('DPDB not available.');\n    return null;\n  }\n  if (db.format != 1) {\n    console.error('DPDB has unexpected format version.');\n    return null;\n  }\n  if (!db.devices || !db.devices.length) {\n    console.error('DPDB does not have a devices section.');\n    return null;\n  }\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  if (!db.devices) {\n    console.error('DPDB has no devices section.');\n    return null;\n  }\n  for (var i = 0; i < db.devices.length; i++) {\n    var device = db.devices[i];\n    if (!device.rules) {\n      console.warn('Device[' + i + '] has no rules section.');\n      continue;\n    }\n    if (device.type != 'ios' && device.type != 'android') {\n      console.warn('Device[' + i + '] has invalid type.');\n      continue;\n    }\n    if (isIOS() != (device.type == 'ios')) continue;\n    var matched = false;\n    for (var j = 0; j < device.rules.length; j++) {\n      var rule = device.rules[j];\n      if (this.ruleMatches_(rule, userAgent, width, height)) {\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) continue;\n    var xdpi = device.dpi[0] || device.dpi;\n    var ydpi = device.dpi[1] || device.dpi;\n    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });\n  }\n  console.warn('No DPDB device match.');\n  return null;\n};\nDpdb.prototype.ruleMatches_ = function (rule, ua, screenWidth, screenHeight) {\n  if (!rule.ua && !rule.res) return false;\n  if (rule.ua && rule.ua.substring(0, 2) === 'SM') rule.ua = rule.ua.substring(0, 7);\n  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;\n  if (rule.res) {\n    if (!rule.res[0] || !rule.res[1]) return false;\n    var resX = rule.res[0];\n    var resY = rule.res[1];\n    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) || Math.max(screenWidth, screenHeight) != Math.max(resX, resY)) {\n      return false;\n    }\n  }\n  return true;\n};\nfunction DeviceParams(params) {\n  this.xdpi = params.xdpi;\n  this.ydpi = params.ydpi;\n  this.bevelMm = params.bevelMm;\n}\nfunction SensorSample(sample, timestampS) {\n  this.set(sample, timestampS);\n}\nSensorSample.prototype.set = function (sample, timestampS) {\n  this.sample = sample;\n  this.timestampS = timestampS;\n};\nSensorSample.prototype.copy = function (sensorSample) {\n  this.set(sensorSample.sample, sensorSample.timestampS);\n};\nfunction ComplementaryFilter(kFilter, isDebug) {\n  this.kFilter = kFilter;\n  this.isDebug = isDebug;\n  this.currentAccelMeasurement = new SensorSample();\n  this.currentGyroMeasurement = new SensorSample();\n  this.previousGyroMeasurement = new SensorSample();\n  if (isIOS()) {\n    this.filterQ = new Quaternion(-1, 0, 0, 1);\n  } else {\n    this.filterQ = new Quaternion(1, 0, 0, 1);\n  }\n  this.previousFilterQ = new Quaternion();\n  this.previousFilterQ.copy(this.filterQ);\n  this.accelQ = new Quaternion();\n  this.isOrientationInitialized = false;\n  this.estimatedGravity = new Vector3();\n  this.measuredGravity = new Vector3();\n  this.gyroIntegralQ = new Quaternion();\n}\nComplementaryFilter.prototype.addAccelMeasurement = function (vector, timestampS) {\n  this.currentAccelMeasurement.set(vector, timestampS);\n};\nComplementaryFilter.prototype.addGyroMeasurement = function (vector, timestampS) {\n  this.currentGyroMeasurement.set(vector, timestampS);\n  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;\n  if (isTimestampDeltaValid(deltaT)) {\n    this.run_();\n  }\n  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);\n};\nComplementaryFilter.prototype.run_ = function () {\n  if (!this.isOrientationInitialized) {\n    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);\n    this.previousFilterQ.copy(this.accelQ);\n    this.isOrientationInitialized = true;\n    return;\n  }\n  var deltaT = this.currentGyroMeasurement.timestampS - this.previousGyroMeasurement.timestampS;\n  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);\n  this.gyroIntegralQ.multiply(gyroDeltaQ);\n  this.filterQ.copy(this.previousFilterQ);\n  this.filterQ.multiply(gyroDeltaQ);\n  var invFilterQ = new Quaternion();\n  invFilterQ.copy(this.filterQ);\n  invFilterQ.inverse();\n  this.estimatedGravity.set(0, 0, -1);\n  this.estimatedGravity.applyQuaternion(invFilterQ);\n  this.estimatedGravity.normalize();\n  this.measuredGravity.copy(this.currentAccelMeasurement.sample);\n  this.measuredGravity.normalize();\n  var deltaQ = new Quaternion();\n  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);\n  deltaQ.inverse();\n  if (this.isDebug) {\n    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)', radToDeg * getQuaternionAngle(deltaQ), this.estimatedGravity.x.toFixed(1), this.estimatedGravity.y.toFixed(1), this.estimatedGravity.z.toFixed(1), this.measuredGravity.x.toFixed(1), this.measuredGravity.y.toFixed(1), this.measuredGravity.z.toFixed(1));\n  }\n  var targetQ = new Quaternion();\n  targetQ.copy(this.filterQ);\n  targetQ.multiply(deltaQ);\n  this.filterQ.slerp(targetQ, 1 - this.kFilter);\n  this.previousFilterQ.copy(this.filterQ);\n};\nComplementaryFilter.prototype.getOrientation = function () {\n  return this.filterQ;\n};\nComplementaryFilter.prototype.accelToQuaternion_ = function (accel) {\n  var normAccel = new Vector3();\n  normAccel.copy(accel);\n  normAccel.normalize();\n  var quat = new Quaternion();\n  quat.setFromUnitVectors(new Vector3(0, 0, -1), normAccel);\n  quat.inverse();\n  return quat;\n};\nComplementaryFilter.prototype.gyroToQuaternionDelta_ = function (gyro, dt) {\n  var quat = new Quaternion();\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  quat.setFromAxisAngle(axis, gyro.length() * dt);\n  return quat;\n};\nfunction PosePredictor(predictionTimeS, isDebug) {\n  this.predictionTimeS = predictionTimeS;\n  this.isDebug = isDebug;\n  this.previousQ = new Quaternion();\n  this.previousTimestampS = null;\n  this.deltaQ = new Quaternion();\n  this.outQ = new Quaternion();\n}\nPosePredictor.prototype.getPrediction = function (currentQ, gyro, timestampS) {\n  if (!this.previousTimestampS) {\n    this.previousQ.copy(currentQ);\n    this.previousTimestampS = timestampS;\n    return currentQ;\n  }\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  var angularSpeed = gyro.length();\n  if (angularSpeed < degToRad * 20) {\n    if (this.isDebug) {\n      console.log('Moving slowly, at %s deg/s: no prediction', (radToDeg * angularSpeed).toFixed(1));\n    }\n    this.outQ.copy(currentQ);\n    this.previousQ.copy(currentQ);\n    return this.outQ;\n  }\n  var predictAngle = angularSpeed * this.predictionTimeS;\n  this.deltaQ.setFromAxisAngle(axis, predictAngle);\n  this.outQ.copy(this.previousQ);\n  this.outQ.multiply(this.deltaQ);\n  this.previousQ.copy(currentQ);\n  this.previousTimestampS = timestampS;\n  return this.outQ;\n};\nfunction FusionPoseSensor(kFilter, predictionTime, yawOnly, isDebug) {\n  this.yawOnly = yawOnly;\n  this.accelerometer = new Vector3();\n  this.gyroscope = new Vector3();\n  this.filter = new ComplementaryFilter(kFilter, isDebug);\n  this.posePredictor = new PosePredictor(predictionTime, isDebug);\n  this.isFirefoxAndroid = isFirefoxAndroid();\n  this.isIOS = isIOS();\n  var chromeVersion = getChromeVersion();\n  this.isDeviceMotionInRadians = !this.isIOS && chromeVersion && chromeVersion < 66;\n  this.isWithoutDeviceMotion = isChromeWithoutDeviceMotion();\n  this.filterToWorldQ = new Quaternion();\n  if (isIOS()) {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), Math.PI / 2);\n  } else {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n  }\n  this.inverseWorldToScreenQ = new Quaternion();\n  this.worldToScreenQ = new Quaternion();\n  this.originalPoseAdjustQ = new Quaternion();\n  this.originalPoseAdjustQ.setFromAxisAngle(new Vector3(0, 0, 1), -window.orientation * Math.PI / 180);\n  this.setScreenTransform_();\n  if (isLandscapeMode()) {\n    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ = new Quaternion();\n  this.orientationOut_ = new Float32Array(4);\n  this.start();\n}\nFusionPoseSensor.prototype.getPosition = function () {\n  return null;\n};\nFusionPoseSensor.prototype.getOrientation = function () {\n  var orientation = void 0;\n  if (this.isWithoutDeviceMotion && this._deviceOrientationQ) {\n    this.deviceOrientationFixQ = this.deviceOrientationFixQ || function () {\n      var z = new Quaternion().setFromAxisAngle(new Vector3(0, 0, -1), 0);\n      var y = new Quaternion();\n      if (window.orientation === -90) {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / -2);\n      } else {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / 2);\n      }\n      return z.multiply(y);\n    }();\n    this.deviceOrientationFilterToWorldQ = this.deviceOrientationFilterToWorldQ || function () {\n      var q = new Quaternion();\n      q.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n      return q;\n    }();\n    orientation = this._deviceOrientationQ;\n    var out = new Quaternion();\n    out.copy(orientation);\n    out.multiply(this.deviceOrientationFilterToWorldQ);\n    out.multiply(this.resetQ);\n    out.multiply(this.worldToScreenQ);\n    out.multiplyQuaternions(this.deviceOrientationFixQ, out);\n    if (this.yawOnly) {\n      out.x = 0;\n      out.z = 0;\n      out.normalize();\n    }\n    this.orientationOut_[0] = out.x;\n    this.orientationOut_[1] = out.y;\n    this.orientationOut_[2] = out.z;\n    this.orientationOut_[3] = out.w;\n    return this.orientationOut_;\n  } else {\n    var filterOrientation = this.filter.getOrientation();\n    orientation = this.posePredictor.getPrediction(filterOrientation, this.gyroscope, this.previousTimestampS);\n  }\n  var out = new Quaternion();\n  out.copy(this.filterToWorldQ);\n  out.multiply(this.resetQ);\n  out.multiply(orientation);\n  out.multiply(this.worldToScreenQ);\n  if (this.yawOnly) {\n    out.x = 0;\n    out.z = 0;\n    out.normalize();\n  }\n  this.orientationOut_[0] = out.x;\n  this.orientationOut_[1] = out.y;\n  this.orientationOut_[2] = out.z;\n  this.orientationOut_[3] = out.w;\n  return this.orientationOut_;\n};\nFusionPoseSensor.prototype.resetPose = function () {\n  this.resetQ.copy(this.filter.getOrientation());\n  this.resetQ.x = 0;\n  this.resetQ.y = 0;\n  this.resetQ.z *= -1;\n  this.resetQ.normalize();\n  if (isLandscapeMode()) {\n    this.resetQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ.multiply(this.originalPoseAdjustQ);\n};\nFusionPoseSensor.prototype.onDeviceOrientation_ = function (e) {\n  this._deviceOrientationQ = this._deviceOrientationQ || new Quaternion();\n  var alpha = e.alpha,\n      beta = e.beta,\n      gamma = e.gamma;\n  alpha = (alpha || 0) * Math.PI / 180;\n  beta = (beta || 0) * Math.PI / 180;\n  gamma = (gamma || 0) * Math.PI / 180;\n  this._deviceOrientationQ.setFromEulerYXZ(beta, alpha, -gamma);\n};\nFusionPoseSensor.prototype.onDeviceMotion_ = function (deviceMotion) {\n  this.updateDeviceMotion_(deviceMotion);\n};\nFusionPoseSensor.prototype.updateDeviceMotion_ = function (deviceMotion) {\n  var accGravity = deviceMotion.accelerationIncludingGravity;\n  var rotRate = deviceMotion.rotationRate;\n  var timestampS = deviceMotion.timeStamp / 1000;\n  var deltaS = timestampS - this.previousTimestampS;\n  if (deltaS < 0) {\n    warnOnce('fusion-pose-sensor:invalid:non-monotonic', 'Invalid timestamps detected: non-monotonic timestamp from devicemotion');\n    this.previousTimestampS = timestampS;\n    return;\n  } else if (deltaS <= MIN_TIMESTEP || deltaS > MAX_TIMESTEP) {\n    warnOnce('fusion-pose-sensor:invalid:outside-threshold', 'Invalid timestamps detected: Timestamp from devicemotion outside expected range.');\n    this.previousTimestampS = timestampS;\n    return;\n  }\n  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);\n  if (isR7()) {\n    this.gyroscope.set(-rotRate.beta, rotRate.alpha, rotRate.gamma);\n  } else {\n    this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);\n  }\n  if (!this.isDeviceMotionInRadians) {\n    this.gyroscope.multiplyScalar(Math.PI / 180);\n  }\n  this.filter.addAccelMeasurement(this.accelerometer, timestampS);\n  this.filter.addGyroMeasurement(this.gyroscope, timestampS);\n  this.previousTimestampS = timestampS;\n};\nFusionPoseSensor.prototype.onOrientationChange_ = function (screenOrientation) {\n  this.setScreenTransform_();\n};\nFusionPoseSensor.prototype.onMessage_ = function (event) {\n  var message = event.data;\n  if (!message || !message.type) {\n    return;\n  }\n  var type = message.type.toLowerCase();\n  if (type !== 'devicemotion') {\n    return;\n  }\n  this.updateDeviceMotion_(message.deviceMotionEvent);\n};\nFusionPoseSensor.prototype.setScreenTransform_ = function () {\n  this.worldToScreenQ.set(0, 0, 0, 1);\n  switch (window.orientation) {\n    case 0:\n      break;\n    case 90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), -Math.PI / 2);\n      break;\n    case -90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), Math.PI / 2);\n      break;\n    case 180:\n      break;\n  }\n  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);\n  this.inverseWorldToScreenQ.inverse();\n};\nFusionPoseSensor.prototype.start = function () {\n  this.onDeviceMotionCallback_ = this.onDeviceMotion_.bind(this);\n  this.onOrientationChangeCallback_ = this.onOrientationChange_.bind(this);\n  this.onMessageCallback_ = this.onMessage_.bind(this);\n  this.onDeviceOrientationCallback_ = this.onDeviceOrientation_.bind(this);\n  if (isIOS() && isInsideCrossOriginIFrame()) {\n    window.addEventListener('message', this.onMessageCallback_);\n  }\n  window.addEventListener('orientationchange', this.onOrientationChangeCallback_);\n  if (this.isWithoutDeviceMotion) {\n    window.addEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  } else {\n    window.addEventListener('devicemotion', this.onDeviceMotionCallback_);\n  }\n};\nFusionPoseSensor.prototype.stop = function () {\n  window.removeEventListener('devicemotion', this.onDeviceMotionCallback_);\n  window.removeEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  window.removeEventListener('orientationchange', this.onOrientationChangeCallback_);\n  window.removeEventListener('message', this.onMessageCallback_);\n};\nvar SENSOR_FREQUENCY = 60;\nvar X_AXIS = new Vector3(1, 0, 0);\nvar Z_AXIS = new Vector3(0, 0, 1);\nvar SENSOR_TO_VR = new Quaternion();\nSENSOR_TO_VR.setFromAxisAngle(X_AXIS, -Math.PI / 2);\nSENSOR_TO_VR.multiply(new Quaternion().setFromAxisAngle(Z_AXIS, Math.PI / 2));\nvar PoseSensor = function () {\n  function PoseSensor(config) {\n    classCallCheck(this, PoseSensor);\n    this.config = config;\n    this.sensor = null;\n    this.fusionSensor = null;\n    this._out = new Float32Array(4);\n    this.api = null;\n    this.errors = [];\n    this._sensorQ = new Quaternion();\n    this._outQ = new Quaternion();\n    this._onSensorRead = this._onSensorRead.bind(this);\n    this._onSensorError = this._onSensorError.bind(this);\n    this.init();\n  }\n  createClass(PoseSensor, [{\n    key: 'init',\n    value: function init() {\n      var sensor = null;\n      try {\n        sensor = new RelativeOrientationSensor({\n          frequency: SENSOR_FREQUENCY,\n          referenceFrame: 'screen'\n        });\n        sensor.addEventListener('error', this._onSensorError);\n      } catch (error) {\n        this.errors.push(error);\n        if (error.name === 'SecurityError') {\n          console.error('Cannot construct sensors due to the Feature Policy');\n          console.warn('Attempting to fall back using \"devicemotion\"; however this will ' + 'fail in the future without correct permissions.');\n          this.useDeviceMotion();\n        } else if (error.name === 'ReferenceError') {\n          this.useDeviceMotion();\n        } else {\n          console.error(error);\n        }\n      }\n      if (sensor) {\n        this.api = 'sensor';\n        this.sensor = sensor;\n        this.sensor.addEventListener('reading', this._onSensorRead);\n        this.sensor.start();\n      }\n    }\n  }, {\n    key: 'useDeviceMotion',\n    value: function useDeviceMotion() {\n      this.api = 'devicemotion';\n      this.fusionSensor = new FusionPoseSensor(this.config.K_FILTER, this.config.PREDICTION_TIME_S, this.config.YAW_ONLY, this.config.DEBUG);\n      if (this.sensor) {\n        this.sensor.removeEventListener('reading', this._onSensorRead);\n        this.sensor.removeEventListener('error', this._onSensorError);\n        this.sensor = null;\n      }\n    }\n  }, {\n    key: 'getOrientation',\n    value: function getOrientation() {\n      if (this.fusionSensor) {\n        return this.fusionSensor.getOrientation();\n      }\n      if (!this.sensor || !this.sensor.quaternion) {\n        this._out[0] = this._out[1] = this._out[2] = 0;\n        this._out[3] = 1;\n        return this._out;\n      }\n      var q = this.sensor.quaternion;\n      this._sensorQ.set(q[0], q[1], q[2], q[3]);\n      var out = this._outQ;\n      out.copy(SENSOR_TO_VR);\n      out.multiply(this._sensorQ);\n      if (this.config.YAW_ONLY) {\n        out.x = out.z = 0;\n        out.normalize();\n      }\n      this._out[0] = out.x;\n      this._out[1] = out.y;\n      this._out[2] = out.z;\n      this._out[3] = out.w;\n      return this._out;\n    }\n  }, {\n    key: '_onSensorError',\n    value: function _onSensorError(event) {\n      this.errors.push(event.error);\n      if (event.error.name === 'NotAllowedError') {\n        console.error('Permission to access sensor was denied');\n      } else if (event.error.name === 'NotReadableError') {\n        console.error('Sensor could not be read');\n      } else {\n        console.error(event.error);\n      }\n      this.useDeviceMotion();\n    }\n  }, {\n    key: '_onSensorRead',\n    value: function _onSensorRead() {}\n  }]);\n  return PoseSensor;\n}();\nvar rotateInstructionsAsset = \"<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>\";\nfunction RotateInstructions() {\n  this.loadIcon_();\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.top = 0;\n  s.right = 0;\n  s.bottom = 0;\n  s.left = 0;\n  s.backgroundColor = 'gray';\n  s.fontFamily = 'sans-serif';\n  s.zIndex = 1000000;\n  var img = document.createElement('img');\n  img.src = this.icon;\n  var s = img.style;\n  s.marginLeft = '25%';\n  s.marginTop = '25%';\n  s.width = '50%';\n  overlay.appendChild(img);\n  var text = document.createElement('div');\n  var s = text.style;\n  s.textAlign = 'center';\n  s.fontSize = '16px';\n  s.lineHeight = '24px';\n  s.margin = '24px 25%';\n  s.width = '50%';\n  text.innerHTML = 'Place your phone into your Cardboard viewer.';\n  overlay.appendChild(text);\n  var snackbar = document.createElement('div');\n  var s = snackbar.style;\n  s.backgroundColor = '#CFD8DC';\n  s.position = 'fixed';\n  s.bottom = 0;\n  s.width = '100%';\n  s.height = '48px';\n  s.padding = '14px 24px';\n  s.boxSizing = 'border-box';\n  s.color = '#656A6B';\n  overlay.appendChild(snackbar);\n  var snackbarText = document.createElement('div');\n  snackbarText.style.float = 'left';\n  snackbarText.innerHTML = 'No Cardboard viewer?';\n  var snackbarButton = document.createElement('a');\n  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';\n  snackbarButton.innerHTML = 'get one';\n  snackbarButton.target = '_blank';\n  var s = snackbarButton.style;\n  s.float = 'right';\n  s.fontWeight = 600;\n  s.textTransform = 'uppercase';\n  s.borderLeft = '1px solid gray';\n  s.paddingLeft = '24px';\n  s.textDecoration = 'none';\n  s.color = '#656A6B';\n  snackbar.appendChild(snackbarText);\n  snackbar.appendChild(snackbarButton);\n  this.overlay = overlay;\n  this.text = text;\n  this.hide();\n}\nRotateInstructions.prototype.show = function (parent) {\n  if (!parent && !this.overlay.parentElement) {\n    document.body.appendChild(this.overlay);\n  } else if (parent) {\n    if (this.overlay.parentElement && this.overlay.parentElement != parent) this.overlay.parentElement.removeChild(this.overlay);\n    parent.appendChild(this.overlay);\n  }\n  this.overlay.style.display = 'block';\n  var img = this.overlay.querySelector('img');\n  var s = img.style;\n  if (isLandscapeMode()) {\n    s.width = '20%';\n    s.marginLeft = '40%';\n    s.marginTop = '3%';\n  } else {\n    s.width = '50%';\n    s.marginLeft = '25%';\n    s.marginTop = '25%';\n  }\n};\nRotateInstructions.prototype.hide = function () {\n  this.overlay.style.display = 'none';\n};\nRotateInstructions.prototype.showTemporarily = function (ms, parent) {\n  this.show(parent);\n  this.timer = setTimeout(this.hide.bind(this), ms);\n};\nRotateInstructions.prototype.disableShowTemporarily = function () {\n  clearTimeout(this.timer);\n};\nRotateInstructions.prototype.update = function () {\n  this.disableShowTemporarily();\n  if (!isLandscapeMode() && isMobile()) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\nRotateInstructions.prototype.loadIcon_ = function () {\n  this.icon = dataUri('image/svg+xml', rotateInstructionsAsset);\n};\nvar DEFAULT_VIEWER = 'CardboardV1';\nvar VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';\nvar CLASS_NAME = 'webvr-polyfill-viewer-selector';\nfunction ViewerSelector(defaultViewer) {\n  try {\n    this.selectedKey = localStorage.getItem(VIEWER_KEY);\n  } catch (error) {\n    console.error('Failed to load viewer profile: %s', error);\n  }\n  if (!this.selectedKey) {\n    this.selectedKey = defaultViewer || DEFAULT_VIEWER;\n  }\n  this.dialog = this.createDialog_(DeviceInfo.Viewers);\n  this.root = null;\n  this.onChangeCallbacks_ = [];\n}\nViewerSelector.prototype.show = function (root) {\n  this.root = root;\n  root.appendChild(this.dialog);\n  var selected = this.dialog.querySelector('#' + this.selectedKey);\n  selected.checked = true;\n  this.dialog.style.display = 'block';\n};\nViewerSelector.prototype.hide = function () {\n  if (this.root && this.root.contains(this.dialog)) {\n    this.root.removeChild(this.dialog);\n  }\n  this.dialog.style.display = 'none';\n};\nViewerSelector.prototype.getCurrentViewer = function () {\n  return DeviceInfo.Viewers[this.selectedKey];\n};\nViewerSelector.prototype.getSelectedKey_ = function () {\n  var input = this.dialog.querySelector('input[name=field]:checked');\n  if (input) {\n    return input.id;\n  }\n  return null;\n};\nViewerSelector.prototype.onChange = function (cb) {\n  this.onChangeCallbacks_.push(cb);\n};\nViewerSelector.prototype.fireOnChange_ = function (viewer) {\n  for (var i = 0; i < this.onChangeCallbacks_.length; i++) {\n    this.onChangeCallbacks_[i](viewer);\n  }\n};\nViewerSelector.prototype.onSave_ = function () {\n  this.selectedKey = this.getSelectedKey_();\n  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {\n    console.error('ViewerSelector.onSave_: this should never happen!');\n    return;\n  }\n  this.fireOnChange_(DeviceInfo.Viewers[this.selectedKey]);\n  try {\n    localStorage.setItem(VIEWER_KEY, this.selectedKey);\n  } catch (error) {\n    console.error('Failed to save viewer profile: %s', error);\n  }\n  this.hide();\n};\nViewerSelector.prototype.createDialog_ = function (options) {\n  var container = document.createElement('div');\n  container.classList.add(CLASS_NAME);\n  container.style.display = 'none';\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.left = 0;\n  s.top = 0;\n  s.width = '100%';\n  s.height = '100%';\n  s.background = 'rgba(0, 0, 0, 0.3)';\n  overlay.addEventListener('click', this.hide.bind(this));\n  var width = 280;\n  var dialog = document.createElement('div');\n  var s = dialog.style;\n  s.boxSizing = 'border-box';\n  s.position = 'fixed';\n  s.top = '24px';\n  s.left = '50%';\n  s.marginLeft = -width / 2 + 'px';\n  s.width = width + 'px';\n  s.padding = '24px';\n  s.overflow = 'hidden';\n  s.background = '#fafafa';\n  s.fontFamily = \"'Roboto', sans-serif\";\n  s.boxShadow = '0px 5px 20px #666';\n  dialog.appendChild(this.createH1_('Select your viewer'));\n  for (var id in options) {\n    dialog.appendChild(this.createChoice_(id, options[id].label));\n  }\n  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));\n  container.appendChild(overlay);\n  container.appendChild(dialog);\n  return container;\n};\nViewerSelector.prototype.createH1_ = function (name) {\n  var h1 = document.createElement('h1');\n  var s = h1.style;\n  s.color = 'black';\n  s.fontSize = '20px';\n  s.fontWeight = 'bold';\n  s.marginTop = 0;\n  s.marginBottom = '24px';\n  h1.innerHTML = name;\n  return h1;\n};\nViewerSelector.prototype.createChoice_ = function (id, name) {\n  var div = document.createElement('div');\n  div.style.marginTop = '8px';\n  div.style.color = 'black';\n  var input = document.createElement('input');\n  input.style.fontSize = '30px';\n  input.setAttribute('id', id);\n  input.setAttribute('type', 'radio');\n  input.setAttribute('value', id);\n  input.setAttribute('name', 'field');\n  var label = document.createElement('label');\n  label.style.marginLeft = '4px';\n  label.setAttribute('for', id);\n  label.innerHTML = name;\n  div.appendChild(input);\n  div.appendChild(label);\n  return div;\n};\nViewerSelector.prototype.createButton_ = function (label, onclick) {\n  var button = document.createElement('button');\n  button.innerHTML = label;\n  var s = button.style;\n  s.float = 'right';\n  s.textTransform = 'uppercase';\n  s.color = '#1094f7';\n  s.fontSize = '14px';\n  s.letterSpacing = 0;\n  s.border = 0;\n  s.background = 'none';\n  s.marginTop = '16px';\n  button.addEventListener('click', onclick);\n  return button;\n};\nvar commonjsGlobal$$1 = typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : typeof self !== 'undefined' ? self : {};\nfunction unwrapExports$$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule$$1(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\nvar NoSleep = createCommonjsModule$$1(function (module, exports) {\n(function webpackUniversalModuleDefinition(root, factory) {\n\tmodule.exports = factory();\n})(commonjsGlobal$$1, function() {\nreturn          (function(modules) {\n         \tvar installedModules = {};\n         \tfunction __webpack_require__(moduleId) {\n         \t\tif(installedModules[moduleId]) {\n         \t\t\treturn installedModules[moduleId].exports;\n         \t\t}\n         \t\tvar module = installedModules[moduleId] = {\n         \t\t\ti: moduleId,\n         \t\t\tl: false,\n         \t\t\texports: {}\n         \t\t};\n         \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n         \t\tmodule.l = true;\n         \t\treturn module.exports;\n         \t}\n         \t__webpack_require__.m = modules;\n         \t__webpack_require__.c = installedModules;\n         \t__webpack_require__.d = function(exports, name, getter) {\n         \t\tif(!__webpack_require__.o(exports, name)) {\n         \t\t\tObject.defineProperty(exports, name, {\n         \t\t\t\tconfigurable: false,\n         \t\t\t\tenumerable: true,\n         \t\t\t\tget: getter\n         \t\t\t});\n         \t\t}\n         \t};\n         \t__webpack_require__.n = function(module) {\n         \t\tvar getter = module && module.__esModule ?\n         \t\t\tfunction getDefault() { return module['default']; } :\n         \t\t\tfunction getModuleExports() { return module; };\n         \t\t__webpack_require__.d(getter, 'a', getter);\n         \t\treturn getter;\n         \t};\n         \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n         \t__webpack_require__.p = \"\";\n         \treturn __webpack_require__(__webpack_require__.s = 0);\n         })\n         ([\n      (function(module, exports, __webpack_require__) {\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar mediaFile = __webpack_require__(1);\nvar oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\nvar NoSleep = function () {\n  function NoSleep() {\n    _classCallCheck(this, NoSleep);\n    if (oldIOS) {\n      this.noSleepTimer = null;\n    } else {\n      this.noSleepVideo = document.createElement('video');\n      this.noSleepVideo.setAttribute('playsinline', '');\n      this.noSleepVideo.setAttribute('src', mediaFile);\n      this.noSleepVideo.addEventListener('timeupdate', function (e) {\n        if (this.noSleepVideo.currentTime > 0.5) {\n          this.noSleepVideo.currentTime = Math.random();\n        }\n      }.bind(this));\n    }\n  }\n  _createClass(NoSleep, [{\n    key: 'enable',\n    value: function enable() {\n      if (oldIOS) {\n        this.disable();\n        this.noSleepTimer = window.setInterval(function () {\n          window.location.href = '/';\n          window.setTimeout(window.stop, 0);\n        }, 15000);\n      } else {\n        this.noSleepVideo.play();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      if (oldIOS) {\n        if (this.noSleepTimer) {\n          window.clearInterval(this.noSleepTimer);\n          this.noSleepTimer = null;\n        }\n      } else {\n        this.noSleepVideo.pause();\n      }\n    }\n  }]);\n  return NoSleep;\n}();\nmodule.exports = NoSleep;\n      }),\n      (function(module, exports, __webpack_require__) {\nmodule.exports = 'data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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';\n      })\n         ]);\n});\n});\nvar NoSleep$1 = unwrapExports$$1(NoSleep);\nvar nextDisplayId = 1000;\nvar defaultLeftBounds = [0, 0, 0.5, 1];\nvar defaultRightBounds = [0.5, 0, 0.5, 1];\nvar raf = window.requestAnimationFrame;\nvar caf = window.cancelAnimationFrame;\nfunction VRFrameData() {\n  this.leftProjectionMatrix = new Float32Array(16);\n  this.leftViewMatrix = new Float32Array(16);\n  this.rightProjectionMatrix = new Float32Array(16);\n  this.rightViewMatrix = new Float32Array(16);\n  this.pose = null;\n}\nfunction VRDisplayCapabilities(config) {\n  Object.defineProperties(this, {\n    hasPosition: {\n      writable: false, enumerable: true, value: config.hasPosition\n    },\n    hasExternalDisplay: {\n      writable: false, enumerable: true, value: config.hasExternalDisplay\n    },\n    canPresent: {\n      writable: false, enumerable: true, value: config.canPresent\n    },\n    maxLayers: {\n      writable: false, enumerable: true, value: config.maxLayers\n    },\n    hasOrientation: {\n      enumerable: true, get: function get() {\n        deprecateWarning('VRDisplayCapabilities.prototype.hasOrientation', 'VRDisplay.prototype.getFrameData');\n        return config.hasOrientation;\n      }\n    }\n  });\n}\nfunction VRDisplay(config) {\n  config = config || {};\n  var USE_WAKELOCK = 'wakelock' in config ? config.wakelock : true;\n  this.isPolyfilled = true;\n  this.displayId = nextDisplayId++;\n  this.displayName = '';\n  this.depthNear = 0.01;\n  this.depthFar = 10000.0;\n  this.isPresenting = false;\n  Object.defineProperty(this, 'isConnected', {\n    get: function get() {\n      deprecateWarning('VRDisplay.prototype.isConnected', 'VRDisplayCapabilities.prototype.hasExternalDisplay');\n      return false;\n    }\n  });\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: false,\n    hasExternalDisplay: false,\n    canPresent: false,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.waitingForPresent_ = false;\n  this.layer_ = null;\n  this.originalParent_ = null;\n  this.fullscreenElement_ = null;\n  this.fullscreenWrapper_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n  if (USE_WAKELOCK && isMobile()) {\n    this.wakelock_ = new NoSleep$1();\n  }\n}\nVRDisplay.prototype.getFrameData = function (frameData) {\n  return frameDataFromPose(frameData, this._getPose(), this);\n};\nVRDisplay.prototype.getPose = function () {\n  deprecateWarning('VRDisplay.prototype.getPose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.resetPose = function () {\n  deprecateWarning('VRDisplay.prototype.resetPose');\n  return this._resetPose();\n};\nVRDisplay.prototype.getImmediatePose = function () {\n  deprecateWarning('VRDisplay.prototype.getImmediatePose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.requestAnimationFrame = function (callback) {\n  return raf(callback);\n};\nVRDisplay.prototype.cancelAnimationFrame = function (id) {\n  return caf(id);\n};\nVRDisplay.prototype.wrapForFullscreen = function (element) {\n  if (isIOS()) {\n    return element;\n  }\n  if (!this.fullscreenWrapper_) {\n    this.fullscreenWrapper_ = document.createElement('div');\n    var cssProperties = ['height: ' + Math.min(screen.height, screen.width) + 'px !important', 'top: 0 !important', 'left: 0 !important', 'right: 0 !important', 'border: 0', 'margin: 0', 'padding: 0', 'z-index: 999999 !important', 'position: fixed'];\n    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');\n    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');\n  }\n  if (this.fullscreenElement_ == element) {\n    return this.fullscreenWrapper_;\n  }\n  if (this.fullscreenElement_) {\n    if (this.originalParent_) {\n      this.originalParent_.appendChild(this.fullscreenElement_);\n    } else {\n      this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_);\n    }\n  }\n  this.fullscreenElement_ = element;\n  this.originalParent_ = element.parentElement;\n  if (!this.originalParent_) {\n    document.body.appendChild(element);\n  }\n  if (!this.fullscreenWrapper_.parentElement) {\n    var parent = this.fullscreenElement_.parentElement;\n    parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);\n    parent.removeChild(this.fullscreenElement_);\n  }\n  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);\n  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');\n  var self = this;\n  function applyFullscreenElementStyle() {\n    if (!self.fullscreenElement_) {\n      return;\n    }\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0', 'width: ' + Math.max(screen.width, screen.height) + 'px', 'height: ' + Math.min(screen.height, screen.width) + 'px', 'border: 0', 'margin: 0', 'padding: 0'];\n    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');\n  }\n  applyFullscreenElementStyle();\n  return this.fullscreenWrapper_;\n};\nVRDisplay.prototype.removeFullscreenWrapper = function () {\n  if (!this.fullscreenElement_) {\n    return;\n  }\n  var element = this.fullscreenElement_;\n  if (this.fullscreenElementCachedStyle_) {\n    element.setAttribute('style', this.fullscreenElementCachedStyle_);\n  } else {\n    element.removeAttribute('style');\n  }\n  this.fullscreenElement_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  var parent = this.fullscreenWrapper_.parentElement;\n  this.fullscreenWrapper_.removeChild(element);\n  if (this.originalParent_ === parent) {\n    parent.insertBefore(element, this.fullscreenWrapper_);\n  }\n  else if (this.originalParent_) {\n      this.originalParent_.appendChild(element);\n    }\n  parent.removeChild(this.fullscreenWrapper_);\n  return element;\n};\nVRDisplay.prototype.requestPresent = function (layers) {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  if (!(layers instanceof Array)) {\n    deprecateWarning('VRDisplay.prototype.requestPresent with non-array argument', 'an array of VRLayers as the first argument');\n    layers = [layers];\n  }\n  return new Promise(function (resolve, reject) {\n    if (!self.capabilities.canPresent) {\n      reject(new Error('VRDisplay is not capable of presenting.'));\n      return;\n    }\n    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {\n      reject(new Error('Invalid number of layers.'));\n      return;\n    }\n    var incomingLayer = layers[0];\n    if (!incomingLayer.source) {\n      resolve();\n      return;\n    }\n    var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;\n    var rightBounds = incomingLayer.rightBounds || defaultRightBounds;\n    if (wasPresenting) {\n      var layer = self.layer_;\n      if (layer.source !== incomingLayer.source) {\n        layer.source = incomingLayer.source;\n      }\n      for (var i = 0; i < 4; i++) {\n        layer.leftBounds[i] = leftBounds[i];\n        layer.rightBounds[i] = rightBounds[i];\n      }\n      self.wrapForFullscreen(self.layer_.source);\n      self.updatePresent_();\n      resolve();\n      return;\n    }\n    self.layer_ = {\n      predistorted: incomingLayer.predistorted,\n      source: incomingLayer.source,\n      leftBounds: leftBounds.slice(0),\n      rightBounds: rightBounds.slice(0)\n    };\n    self.waitingForPresent_ = false;\n    if (self.layer_ && self.layer_.source) {\n      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);\n      var onFullscreenChange = function onFullscreenChange() {\n        var actualFullscreenElement = getFullscreenElement();\n        self.isPresenting = fullscreenElement === actualFullscreenElement;\n        if (self.isPresenting) {\n          if (screen.orientation && screen.orientation.lock) {\n            screen.orientation.lock('landscape-primary').catch(function (error) {\n              console.error('screen.orientation.lock() failed due to', error.message);\n            });\n          }\n          self.waitingForPresent_ = false;\n          self.beginPresent_();\n          resolve();\n        } else {\n          if (screen.orientation && screen.orientation.unlock) {\n            screen.orientation.unlock();\n          }\n          self.removeFullscreenWrapper();\n          self.disableWakeLock();\n          self.endPresent_();\n          self.removeFullscreenListeners_();\n        }\n        self.fireVRDisplayPresentChange_();\n      };\n      var onFullscreenError = function onFullscreenError() {\n        if (!self.waitingForPresent_) {\n          return;\n        }\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.disableWakeLock();\n        self.waitingForPresent_ = false;\n        self.isPresenting = false;\n        reject(new Error('Unable to present.'));\n      };\n      self.addFullscreenListeners_(fullscreenElement, onFullscreenChange, onFullscreenError);\n      if (requestFullscreen(fullscreenElement)) {\n        self.enableWakeLock();\n        self.waitingForPresent_ = true;\n      } else if (isIOS() || isWebViewAndroid()) {\n        self.enableWakeLock();\n        self.isPresenting = true;\n        self.beginPresent_();\n        self.fireVRDisplayPresentChange_();\n        resolve();\n      }\n    }\n    if (!self.waitingForPresent_ && !isIOS()) {\n      exitFullscreen();\n      reject(new Error('Unable to present.'));\n    }\n  });\n};\nVRDisplay.prototype.exitPresent = function () {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  this.isPresenting = false;\n  this.layer_ = null;\n  this.disableWakeLock();\n  return new Promise(function (resolve, reject) {\n    if (wasPresenting) {\n      if (!exitFullscreen() && isIOS()) {\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      if (isWebViewAndroid()) {\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      resolve();\n    } else {\n      reject(new Error('Was not presenting to VRDisplay.'));\n    }\n  });\n};\nVRDisplay.prototype.getLayers = function () {\n  if (this.layer_) {\n    return [this.layer_];\n  }\n  return [];\n};\nVRDisplay.prototype.fireVRDisplayPresentChange_ = function () {\n  var event = new CustomEvent('vrdisplaypresentchange', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.fireVRDisplayConnect_ = function () {\n  var event = new CustomEvent('vrdisplayconnect', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.addFullscreenListeners_ = function (element, changeHandler, errorHandler) {\n  this.removeFullscreenListeners_();\n  this.fullscreenEventTarget_ = element;\n  this.fullscreenChangeHandler_ = changeHandler;\n  this.fullscreenErrorHandler_ = errorHandler;\n  if (changeHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenchange', changeHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenchange', changeHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', changeHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenchange', changeHandler, false);\n    }\n  }\n  if (errorHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenerror', errorHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenerror', errorHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenerror', errorHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenerror', errorHandler, false);\n    }\n  }\n};\nVRDisplay.prototype.removeFullscreenListeners_ = function () {\n  if (!this.fullscreenEventTarget_) return;\n  var element = this.fullscreenEventTarget_;\n  if (this.fullscreenChangeHandler_) {\n    var changeHandler = this.fullscreenChangeHandler_;\n    element.removeEventListener('fullscreenchange', changeHandler, false);\n    element.removeEventListener('webkitfullscreenchange', changeHandler, false);\n    document.removeEventListener('mozfullscreenchange', changeHandler, false);\n    element.removeEventListener('msfullscreenchange', changeHandler, false);\n  }\n  if (this.fullscreenErrorHandler_) {\n    var errorHandler = this.fullscreenErrorHandler_;\n    element.removeEventListener('fullscreenerror', errorHandler, false);\n    element.removeEventListener('webkitfullscreenerror', errorHandler, false);\n    document.removeEventListener('mozfullscreenerror', errorHandler, false);\n    element.removeEventListener('msfullscreenerror', errorHandler, false);\n  }\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n};\nVRDisplay.prototype.enableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.enable();\n  }\n};\nVRDisplay.prototype.disableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.disable();\n  }\n};\nVRDisplay.prototype.beginPresent_ = function () {\n};\nVRDisplay.prototype.endPresent_ = function () {\n};\nVRDisplay.prototype.submitFrame = function (pose) {\n};\nVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  return null;\n};\nvar config = {\n  ADDITIONAL_VIEWERS: [],\n  DEFAULT_VIEWER: '',\n  MOBILE_WAKE_LOCK: true,\n  DEBUG: false,\n  DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n  K_FILTER: 0.98,\n  PREDICTION_TIME_S: 0.040,\n  CARDBOARD_UI_DISABLED: false,\n  ROTATE_INSTRUCTIONS_DISABLED: false,\n  YAW_ONLY: false,\n  BUFFER_SCALE: 0.5,\n  DIRTY_SUBMIT_FRAME_BINDINGS: false\n};\nvar Eye = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\nfunction CardboardVRDisplay(config$$1) {\n  var defaults = extend({}, config);\n  config$$1 = extend(defaults, config$$1 || {});\n  VRDisplay.call(this, {\n    wakelock: config$$1.MOBILE_WAKE_LOCK\n  });\n  this.config = config$$1;\n  this.displayName = 'Cardboard VRDisplay';\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: true,\n    hasExternalDisplay: false,\n    canPresent: true,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.bufferScale_ = this.config.BUFFER_SCALE;\n  this.poseSensor_ = new PoseSensor(this.config);\n  this.distorter_ = null;\n  this.cardboardUI_ = null;\n  this.dpdb_ = new Dpdb(this.config.DPDB_URL, this.onDeviceParamsUpdated_.bind(this));\n  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams(), config$$1.ADDITIONAL_VIEWERS);\n  this.viewerSelector_ = new ViewerSelector(config$$1.DEFAULT_VIEWER);\n  this.viewerSelector_.onChange(this.onViewerChanged_.bind(this));\n  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());\n  if (!this.config.ROTATE_INSTRUCTIONS_DISABLED) {\n    this.rotateInstructions_ = new RotateInstructions();\n  }\n  if (isIOS()) {\n    window.addEventListener('resize', this.onResize_.bind(this));\n  }\n}\nCardboardVRDisplay.prototype = Object.create(VRDisplay.prototype);\nCardboardVRDisplay.prototype._getPose = function () {\n  return {\n    position: null,\n    orientation: this.poseSensor_.getOrientation(),\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\nCardboardVRDisplay.prototype._resetPose = function () {\n  if (this.poseSensor_.resetPose) {\n    this.poseSensor_.resetPose();\n  }\n};\nCardboardVRDisplay.prototype._getFieldOfView = function (whichEye) {\n  var fieldOfView;\n  if (whichEye == Eye.LEFT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();\n  } else if (whichEye == Eye.RIGHT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return fieldOfView;\n};\nCardboardVRDisplay.prototype._getEyeOffset = function (whichEye) {\n  var offset;\n  if (whichEye == Eye.LEFT) {\n    offset = [-this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else if (whichEye == Eye.RIGHT) {\n    offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return offset;\n};\nCardboardVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  var offset = this._getEyeOffset(whichEye);\n  var fieldOfView = this._getFieldOfView(whichEye);\n  var eyeParams = {\n    offset: offset,\n    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,\n    renderHeight: this.deviceInfo_.device.height * this.bufferScale_\n  };\n  Object.defineProperty(eyeParams, 'fieldOfView', {\n    enumerable: true,\n    get: function get() {\n      deprecateWarning('VRFieldOfView', 'VRFrameData\\'s projection matrices');\n      return fieldOfView;\n    }\n  });\n  return eyeParams;\n};\nCardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function (newParams) {\n  if (this.config.DEBUG) {\n    console.log('DPDB reported that device params were updated.');\n  }\n  this.deviceInfo_.updateDeviceParams(newParams);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n};\nCardboardVRDisplay.prototype.updateBounds_ = function () {\n  if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {\n    this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);\n  }\n};\nCardboardVRDisplay.prototype.beginPresent_ = function () {\n  var gl = this.layer_.source.getContext('webgl');\n  if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n  if (!gl) gl = this.layer_.source.getContext('webgl2');\n  if (!gl) return;\n  if (this.layer_.predistorted) {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      gl.canvas.width = getScreenWidth() * this.bufferScale_;\n      gl.canvas.height = getScreenHeight() * this.bufferScale_;\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n  } else {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n    this.distorter_ = new CardboardDistorter(gl, this.cardboardUI_, this.config.BUFFER_SCALE, this.config.DIRTY_SUBMIT_FRAME_BINDINGS);\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.listen(function (e) {\n      this.viewerSelector_.show(this.layer_.source.parentElement);\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this), function (e) {\n      this.exitPresent();\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this));\n  }\n  if (this.rotateInstructions_) {\n    if (isLandscapeMode() && isMobile()) {\n      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);\n    } else {\n      this.rotateInstructions_.update();\n    }\n  }\n  this.orientationHandler = this.onOrientationChange_.bind(this);\n  window.addEventListener('orientationchange', this.orientationHandler);\n  this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);\n  window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.endPresent_ = function () {\n  if (this.distorter_) {\n    this.distorter_.destroy();\n    this.distorter_ = null;\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.destroy();\n    this.cardboardUI_ = null;\n  }\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.hide();\n  }\n  this.viewerSelector_.hide();\n  window.removeEventListener('orientationchange', this.orientationHandler);\n  window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n};\nCardboardVRDisplay.prototype.updatePresent_ = function () {\n  this.endPresent_();\n  this.beginPresent_();\n};\nCardboardVRDisplay.prototype.submitFrame = function (pose) {\n  if (this.distorter_) {\n    this.updateBounds_();\n    this.distorter_.submitFrame();\n  } else if (this.cardboardUI_ && this.layer_) {\n    var canvas = this.layer_.source.getContext('webgl').canvas;\n    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {\n      this.cardboardUI_.onResize();\n    }\n    this.lastWidth = canvas.width;\n    this.lastHeight = canvas.height;\n    this.cardboardUI_.render();\n  }\n};\nCardboardVRDisplay.prototype.onOrientationChange_ = function (e) {\n  this.viewerSelector_.hide();\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.update();\n  }\n  this.onResize_();\n};\nCardboardVRDisplay.prototype.onResize_ = function (e) {\n  if (this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0',\n    'width: 100vw', 'height: 100vh', 'border: 0', 'margin: 0',\n    'padding: 0px', 'box-sizing: content-box'];\n    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');\n    safariCssSizeWorkaround(gl.canvas);\n  }\n};\nCardboardVRDisplay.prototype.onViewerChanged_ = function (viewer) {\n  this.deviceInfo_.setViewer(viewer);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function () {\n  var event = new CustomEvent('vrdisplaydeviceparamschange', {\n    detail: {\n      vrdisplay: this,\n      deviceInfo: this.deviceInfo_\n    }\n  });\n  window.dispatchEvent(event);\n};\nCardboardVRDisplay.VRFrameData = VRFrameData;\nCardboardVRDisplay.VRDisplay = VRDisplay;\nreturn CardboardVRDisplay;\n})));\n});\nvar CardboardVRDisplay = unwrapExports(cardboardVrDisplay);\n\nclass PolyfilledXRDevice extends EventTarget {\n  constructor(global) {\n    super();\n    this.global = global;\n    this.onWindowResize = this.onWindowResize.bind(this);\n    this.global.window.addEventListener('resize', this.onWindowResize);\n    this.environmentBlendMode = 'opaque';\n  }\n  get depthNear() { throw new Error('Not implemented'); }\n  set depthNear(val) { throw new Error('Not implemented'); }\n  get depthFar() { throw new Error('Not implemented'); }\n  set depthFar(val) { throw new Error('Not implemented'); }\n  onBaseLayerSet(sessionId, layer) { throw new Error('Not implemented'); }\n  supportsSession(options={}) { throw new Error('Not implemented'); }\n  async requestSession(options={}) { throw new Error('Not implemented'); }\n  requestAnimationFrame(callback) { throw new Error('Not implemented'); }\n  onFrameStart(sessionId) { throw new Error('Not implemented'); }\n  onFrameEnd(sessionId) { throw new Error('Not implemented'); }\n  requestStageBounds() { throw new Error('Not implemented'); }\n  async requestFrameOfReferenceTransform(type, options) {\n    return undefined;\n  }\n  cancelAnimationFrame(handle) { throw new Error('Not implemented'); }\n  endSession(sessionId) { throw new Error('Not implemented'); }\n  getViewport(sessionId, eye, layer, target) { throw new Error('Not implemented'); }\n  getProjectionMatrix(eye) { throw new Error('Not implemented'); }\n  getBasePoseMatrix() { throw new Error('Not implemented'); }\n  getBaseViewMatrix(eye) { throw new Error('Not implemented'); }\n  getInputSources() { throw new Error('Not implemented'); }\n  getInputPose(inputSource, coordinateSystem) { throw new Error('Not implemented'); }\n  onWindowResize() {\n    this.onWindowResize();\n  }\n}\n\nfunction create$2() {\n  let out = new ARRAY_TYPE(9);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\nfunction create$3() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n  return out;\n}\nfunction clone$3(a) {\n  let out = new ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nfunction copy$3(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction normalize$1(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  let len = x*x + y*y + z*z + w*w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n  }\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst forEach$1 = (function() {\n  let vec = create$3();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 4;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n    }\n    return a;\n  };\n})();\n\nfunction create$4() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  out[3] = 1;\n  return out;\n}\n\nfunction setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  let s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\nfunction multiply$4(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n\n\n\nfunction slerp(out, a, b, t) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  let omega, cosom, sinom, scale0, scale1;\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  if ( cosom < 0.0 ) {\n    cosom = -cosom;\n    bx = - bx;\n    by = - by;\n    bz = - bz;\n    bw = - bw;\n  }\n  if ( (1.0 - cosom) > EPSILON ) {\n    omega  = Math.acos(cosom);\n    sinom  = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n\nfunction invert$2(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let dot$$1 = a0*a0 + a1*a1 + a2*a2 + a3*a3;\n  let invDot = dot$$1 ? 1.0/dot$$1 : 0;\n  out[0] = -a0*invDot;\n  out[1] = -a1*invDot;\n  out[2] = -a2*invDot;\n  out[3] = a3*invDot;\n  return out;\n}\n\nfunction fromMat3(out, m) {\n  let fTrace = m[0] + m[4] + m[8];\n  let fRoot;\n  if ( fTrace > 0.0 ) {\n    fRoot = Math.sqrt(fTrace + 1.0);\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5/fRoot;\n    out[0] = (m[5]-m[7])*fRoot;\n    out[1] = (m[6]-m[2])*fRoot;\n    out[2] = (m[1]-m[3])*fRoot;\n  } else {\n    let i = 0;\n    if ( m[4] > m[0] )\n      i = 1;\n    if ( m[8] > m[i*3+i] )\n      i = 2;\n    let j = (i+1)%3;\n    let k = (i+2)%3;\n    fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n    out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n    out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n  }\n  return out;\n}\nfunction fromEuler(out, x, y, z) {\n    let halfToRad = 0.5 * Math.PI / 180.0;\n    x *= halfToRad;\n    y *= halfToRad;\n    z *= halfToRad;\n    let sx = Math.sin(x);\n    let cx = Math.cos(x);\n    let sy = Math.sin(y);\n    let cy = Math.cos(y);\n    let sz = Math.sin(z);\n    let cz = Math.cos(z);\n    out[0] = sx * cy * cz - cx * sy * sz;\n    out[1] = cx * sy * cz + sx * cy * sz;\n    out[2] = cx * cy * sz - sx * sy * cz;\n    out[3] = cx * cy * cz + sx * sy * sz;\n    return out;\n}\n\nconst clone$4 = clone$3;\n\nconst copy$4 = copy$3;\n\n\n\n\n\n\n\n\n\n\nconst normalize$2 = normalize$1;\n\n\nconst rotationTo = (function() {\n  let tmpvec3 = create$1();\n  let xUnitVec3 = fromValues$1(1,0,0);\n  let yUnitVec3 = fromValues$1(0,1,0);\n  return function(out, a, b) {\n    let dot$$1 = dot(a, b);\n    if (dot$$1 < -0.999999) {\n      cross(tmpvec3, xUnitVec3, a);\n      if (len(tmpvec3) < 0.000001)\n        cross(tmpvec3, yUnitVec3, a);\n      normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot$$1 > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot$$1;\n      return normalize$2(out, out);\n    }\n  };\n})();\nconst sqlerp = (function () {\n  let temp1 = create$4();\n  let temp2 = create$4();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}());\nconst setAxes = (function() {\n  let matr = create$2();\n  return function(out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize$2(out, fromMat3(out, matr));\n  };\n})();\n\nconst HEAD_ELBOW_OFFSET_RIGHTHANDED = fromValues$1(0.155, -0.465, -0.15);\nconst HEAD_ELBOW_OFFSET_LEFTHANDED = fromValues$1(-0.155, -0.465, -0.15);\nconst ELBOW_WRIST_OFFSET = fromValues$1(0, 0, -0.25);\nconst WRIST_CONTROLLER_OFFSET = fromValues$1(0, 0, 0.05);\nconst ARM_EXTENSION_OFFSET = fromValues$1(-0.08, 0.14, 0.08);\nconst ELBOW_BEND_RATIO = 0.4;\nconst EXTENSION_RATIO_WEIGHT = 0.4;\nconst MIN_ANGULAR_SPEED = 0.61;\nconst MIN_ANGLE_DELTA = 0.175;\nconst MIN_EXTENSION_COS = 0.12;\nconst MAX_EXTENSION_COS = 0.87;\nconst RAD_TO_DEG = 180 / Math.PI;\nfunction eulerFromQuaternion(out, q, order) {\n  function clamp(value, min$$1, max$$1) {\n    return (value < min$$1 ? min$$1 : (value > max$$1 ? max$$1 : value));\n  }\n  var sqx = q[0] * q[0];\n  var sqy = q[1] * q[1];\n  var sqz = q[2] * q[2];\n  var sqw = q[3] * q[3];\n  if ( order === 'XYZ' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[1] * q[2] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[0] * q[2] + q[1] * q[3] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order ===  'YXZ' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] - q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZXY' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] + q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[2] * q[0] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZYX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[2] * q[1] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[1] * q[3] - q[0] * q[2] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order === 'YZX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[2] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[0] * q[2] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[0] * q[1] + q[2] * q[3] ), -1, 1 ) );\n  } else if ( order === 'XZY' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[1] * q[2] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[2] * q[3] - q[0] * q[1] ), -1, 1 ) );\n  } else {\n    console.log('No order given for quaternion to euler conversion.');\n    return;\n  }\n}\nclass OrientationArmModel {\n  constructor() {\n    this.hand = 'right';\n    this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n    this.controllerQ = create$4();\n    this.lastControllerQ = create$4();\n    this.headQ = create$4();\n    this.headPos = create$1();\n    this.elbowPos = create$1();\n    this.wristPos = create$1();\n    this.time = null;\n    this.lastTime = null;\n    this.rootQ = create$4();\n    this.position = create$1();\n  }\n  setHandedness(hand) {\n    if (this.hand != hand) {\n      this.hand = hand;\n      if (this.hand == 'left') {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_LEFTHANDED;\n      } else {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n      }\n    }\n  }\n  update(controllerOrientation, headPoseMatrix) {\n    this.time = now$1();\n    if (controllerOrientation) {\n      copy$4(this.lastControllerQ, this.controllerQ);\n      copy$4(this.controllerQ, controllerOrientation);\n    }\n    if (headPoseMatrix) {\n      getTranslation(this.headPos, headPoseMatrix);\n      getRotation(this.headQ, headPoseMatrix);\n    }\n    let headYawQ = this.getHeadYawOrientation_();\n    let angleDelta = this.quatAngle_(this.lastControllerQ, this.controllerQ);\n    let timeDelta = (this.time - this.lastTime) / 1000;\n    let controllerAngularSpeed = angleDelta / timeDelta;\n    if (controllerAngularSpeed > MIN_ANGULAR_SPEED) {\n      slerp(this.rootQ, this.rootQ, headYawQ,\n                 Math.min(angleDelta / MIN_ANGLE_DELTA, 1.0));\n    } else {\n      copy$4(this.rootQ, headYawQ);\n    }\n    let controllerForward = fromValues$1(0, 0, -1.0);\n    transformQuat(controllerForward, controllerForward, this.controllerQ);\n    let controllerDotY = dot(controllerForward, [0, 1, 0]);\n    let extensionRatio = this.clamp_(\n        (controllerDotY - MIN_EXTENSION_COS) / MAX_EXTENSION_COS, 0.0, 1.0);\n    let controllerCameraQ = clone$4(this.rootQ);\n    invert$2(controllerCameraQ, controllerCameraQ);\n    multiply$4(controllerCameraQ, controllerCameraQ, this.controllerQ);\n    let elbowPos = this.elbowPos;\n    copy$1(elbowPos, this.headPos);\n    add$1(elbowPos, elbowPos, this.headElbowOffset);\n    let elbowOffset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(elbowOffset, elbowOffset, extensionRatio);\n    add$1(elbowPos, elbowPos, elbowOffset);\n    let totalAngle = this.quatAngle_(controllerCameraQ, create$4());\n    let totalAngleDeg = totalAngle * RAD_TO_DEG;\n    let lerpSuppression = 1 - Math.pow(totalAngleDeg / 180, 4);let elbowRatio = ELBOW_BEND_RATIO;\n    let wristRatio = 1 - ELBOW_BEND_RATIO;\n    let lerpValue = lerpSuppression *\n        (elbowRatio + wristRatio * extensionRatio * EXTENSION_RATIO_WEIGHT);\n    let wristQ = create$4();\n    slerp(wristQ, wristQ, controllerCameraQ, lerpValue);\n    let invWristQ = invert$2(create$4(), wristQ);\n    let elbowQ = clone$4(controllerCameraQ);\n    multiply$4(elbowQ, elbowQ, invWristQ);\n    let wristPos = this.wristPos;\n    copy$1(wristPos, WRIST_CONTROLLER_OFFSET);\n    transformQuat(wristPos, wristPos, wristQ);\n    add$1(wristPos, wristPos, ELBOW_WRIST_OFFSET);\n    transformQuat(wristPos, wristPos, elbowQ);\n    add$1(wristPos, wristPos, elbowPos);\n    let offset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(offset, offset, extensionRatio);\n    add$1(this.position, this.wristPos, offset);\n    transformQuat(this.position, this.position, this.rootQ);\n    this.lastTime = this.time;\n  }\n  getPosition() {\n    return this.position;\n  }\n  getHeadYawOrientation_() {\n    let headEuler = create$1();\n    eulerFromQuaternion(headEuler, this.headQ, 'YXZ');\n    let destinationQ = fromEuler(create$4(), 0, headEuler[1] * RAD_TO_DEG, 0);\n    return destinationQ;\n  }\n  clamp_(value, min$$1, max$$1) {\n    return Math.min(Math.max(value, min$$1), max$$1);\n  }\n  quatAngle_(q1, q2) {\n    let vec1 = [0, 0, -1];\n    let vec2 = [0, 0, -1];\n    transformQuat(vec1, vec1, q1);\n    transformQuat(vec2, vec2, q2);\n    return angle(vec1, vec2);\n  }\n}\n\nclass GamepadXRInputSource {\n  constructor(polyfill, primaryButtonIndex = 0) {\n    this.polyfill = polyfill;\n    this.gamepad = null;\n    this.inputSource = new XRInputSource(this);\n    this.lastPosition = create$1();\n    this.emulatedPosition = false;\n    this.basePoseMatrix = create();\n    this.inputPoses = new WeakMap();\n    this.primaryButtonIndex = primaryButtonIndex;\n    this.primaryActionPressed = false;\n    this.handedness = '';\n    this.targetRayMode = 'gaze';\n    this.armModel = null;\n  }\n  updateFromGamepad(gamepad) {\n    this.gamepad = gamepad;\n    this.handedness = gamepad.hand;\n    if (gamepad.pose) {\n      this.targetRayMode = 'tracked-pointer';\n      this.emulatedPosition = !gamepad.pose.hasPosition;\n    } else if (gamepad.hand === '') {\n      this.targetRayMode = 'gaze';\n      this.emulatedPosition = false;\n    }\n  }\n  updateBasePoseMatrix() {\n    if (this.gamepad && this.gamepad.pose) {\n      let pose = this.gamepad.pose;\n      let position = pose.position;\n      let orientation = pose.orientation;\n      if (!position && !orientation) {\n        return;\n      }\n      if (!position) {\n        if (!pose.hasPosition) {\n          if (!this.armModel) {\n            this.armModel = new OrientationArmModel();\n          }\n          this.armModel.setHandedness(this.gamepad.hand);\n          this.armModel.update(orientation, this.polyfill.getBasePoseMatrix());\n          position = this.armModel.getPosition();\n        } else {\n          position = this.lastPosition;\n        }\n      } else {\n        this.lastPosition[0] = position[0];\n        this.lastPosition[1] = position[1];\n        this.lastPosition[2] = position[2];\n      }\n      fromRotationTranslation(this.basePoseMatrix, orientation, position);\n    } else {\n      copy(this.basePoseMatrix, this.polyfill.getBasePoseMatrix());\n    }\n    return this.basePoseMatrix;\n  }\n  getXRInputPose(coordinateSystem) {\n    this.updateBasePoseMatrix();\n    let inputPose = this.inputPoses.get(coordinateSystem);\n    if (!inputPose) {\n      inputPose = new XRInputPose(this, this.gamepad && this.gamepad.pose);\n      this.inputPoses.set(coordinateSystem, inputPose);\n    }\n    const rayTransformMatrix = new Float32Array(16);\n    coordinateSystem.transformBasePoseMatrix(rayTransformMatrix, this.basePoseMatrix);\n    inputPose.targetRay = poseMatrixToXRRay(rayTransformMatrix);\n    if (inputPose.gripMatrix) {\n      coordinateSystem.transformBasePoseMatrix(inputPose.gripMatrix, this.basePoseMatrix);\n    }\n    return inputPose;\n  }\n}\n\nconst TEST_ENV = \"production\" === 'test';\nconst EXTRA_PRESENTATION_ATTRIBUTES = {\n  highRefreshRate: true,\n};\nconst PRIMARY_BUTTON_MAP = {\n  oculus: 1,\n  openvr: 1,\n  'spatial controller (spatial interaction source)': 1\n};\nlet SESSION_ID = 0;\nclass Session {\n  constructor(sessionOptions, polyfillOptions={}) {\n    this.outputContext = sessionOptions.outputContext;\n    this.immersive = sessionOptions.immersive;\n    this.ended = null;\n    this.baseLayer = null;\n    this.id = ++SESSION_ID;\n    this.modifiedCanvasLayer = false;\n    if (this.outputContext && !TEST_ENV) {\n      const renderContextType = polyfillOptions.renderContextType || '2d';\n      this.renderContext = this.outputContext.canvas.getContext(renderContextType);\n    }\n  }\n}\nclass WebVRDevice extends PolyfilledXRDevice {\n  constructor(global, display) {\n    const { canPresent } = display.capabilities;\n    super(global);\n    this.display = display;\n    this.frame = new global.VRFrameData();\n    this.sessions = new Map();\n    this.immersiveSession = null;\n    this.canPresent = canPresent;\n    this.baseModelMatrix = create();\n    this.gamepadInputSources = {};\n    this.tempVec3 = new Float32Array(3);\n    this.onVRDisplayPresentChange = this.onVRDisplayPresentChange.bind(this);\n    global.window.addEventListener('vrdisplaypresentchange', this.onVRDisplayPresentChange);\n    this.CAN_USE_GAMEPAD = global.navigator && ('getGamepads' in global.navigator);\n    this.HAS_BITMAP_SUPPORT = isImageBitmapSupported(global);\n  }\n  get depthNear() { return this.display.depthNear; }\n  set depthNear(val) { this.display.depthNear = val; }\n  get depthFar() { return this.display.depthFar; }\n  set depthFar(val) { this.display.depthFar = val; }\n  onBaseLayerSet(sessionId, layer) {\n    const session = this.sessions.get(sessionId);\n    const canvas = layer.context.canvas;\n    if (session.immersive) {\n      const left = this.display.getEyeParameters('left');\n      const right = this.display.getEyeParameters('right');\n      canvas.width = Math.max(left.renderWidth, right.renderWidth) * 2;\n      canvas.height = Math.max(left.renderHeight, right.renderHeight);\n      this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES\n        }]).then(() => {\n        if (!TEST_ENV && !this.global.document.body.contains(canvas)) {\n          session.modifiedCanvasLayer = true;\n          this.global.document.body.appendChild(canvas);\n          applyCanvasStylesForMinimalRendering(canvas);\n        }\n        session.baseLayer = layer;\n      });\n    }\n    else if (session.outputContext) {\n      session.baseLayer = layer;\n    }\n  }\n  supportsSession(options={}) {\n    if (options.immersive === true && this.canPresent === false) {\n      return false;\n    }\n    return true;\n  }\n  async requestSession(options={}) {\n    if (!this.supportsSession(options)) {\n      return Promise.reject();\n    }\n    if (options.immersive) {\n      const canvas = this.global.document.createElement('canvas');\n      if (!TEST_ENV) {\n        const ctx = canvas.getContext('webgl');\n      }\n      await this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES }]);\n    }\n    const session = new Session(options, {\n      renderContextType: this.HAS_BITMAP_SUPPORT ? 'bitmaprenderer' : '2d'\n    });\n    this.sessions.set(session.id, session);\n    if (options.immersive) {\n      this.immersiveSession = session;\n      this.dispatchEvent('@@webxr-polyfill/vr-present-start', session.id);\n    }\n    return Promise.resolve(session.id);\n  }\n  requestAnimationFrame(callback) {\n    return this.display.requestAnimationFrame(callback);\n  }\n  getPrimaryButtonIndex(gamepad) {\n    let primaryButton = 0;\n    let name = gamepad.id.toLowerCase();\n    for (let key in PRIMARY_BUTTON_MAP) {\n      if (name.includes(key)) {\n        primaryButton = PRIMARY_BUTTON_MAP[key];\n        break;\n      }\n    }\n    return Math.min(primaryButton, gamepad.buttons.length - 1);\n  }\n  onFrameStart(sessionId) {\n    this.display.getFrameData(this.frame);\n    const session = this.sessions.get(sessionId);\n    if (session.immersive && this.CAN_USE_GAMEPAD) {\n      let prevInputSources = this.gamepadInputSources;\n      this.gamepadInputSources = {};\n      let gamepads = this.global.navigator.getGamepads();\n      for (let i = 0; i < gamepads.length; ++i) {\n        let gamepad = gamepads[i];\n        if (gamepad && gamepad.displayId === this.display.displayId) {\n          let inputSourceImpl = prevInputSources[i];\n          if (!inputSourceImpl) {\n            inputSourceImpl = new GamepadXRInputSource(this, this.getPrimaryButtonIndex(gamepad));\n          }\n          inputSourceImpl.updateFromGamepad(gamepad);\n          this.gamepadInputSources[i] = inputSourceImpl;\n          if (inputSourceImpl.primaryButtonIndex != -1) {\n            let primaryActionPressed = gamepad.buttons[inputSourceImpl.primaryButtonIndex].pressed;\n            if (primaryActionPressed && !inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-start', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            } else if (!primaryActionPressed && inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-end', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            }\n            inputSourceImpl.primaryActionPressed = primaryActionPressed;\n          }\n        }\n      }\n    }\n    if (TEST_ENV) {\n      return;\n    }\n    if (session.outputContext && !session.immersive) {\n      const outputCanvas = session.outputContext.canvas;\n      const oWidth = outputCanvas.offsetWidth;\n      const oHeight = outputCanvas.offsetHeight;\n      if (outputCanvas.width != oWidth) {\n        outputCanvas.width = oWidth;\n      }\n      if (outputCanvas.height != oHeight) {\n        outputCanvas.height = oHeight;\n      }\n      const canvas = session.baseLayer.context.canvas;\n      if (!this.immersiveSession ||\n          canvas !== this.immersiveSession.baseLayer.context.canvas) {\n        if (canvas.width != oWidth) {\n          canvas.width = oWidth;\n        }\n        if (canvas.height != oHeight) {\n          canvas.height = oHeight;\n        }\n        perspective(this.frame.leftProjectionMatrix, Math.PI * 0.4,\n                         oWidth/oHeight, this.depthNear, this.depthFar);\n      }\n    }\n  }\n  onFrameEnd(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended || !session.baseLayer) {\n      return;\n    }\n    if (session.outputContext &&\n        !(session.immersive && !this.display.capabilities.hasExternalDisplay)) {\n      const mirroring =\n        session.immersive && this.display.capabilities.hasExternalDisplay;\n      const iCanvas = session.baseLayer.context.canvas;\n      const iWidth = mirroring ? iCanvas.width / 2 : iCanvas.width;\n      const iHeight = iCanvas.height;\n      if (!TEST_ENV) {\n        const oCanvas = session.outputContext.canvas;\n        const oWidth = oCanvas.width;\n        const oHeight = oCanvas.height;\n        const renderContext = session.renderContext;\n        if (this.HAS_BITMAP_SUPPORT) {\n          if (iCanvas.transferToImageBitmap) {\n            renderContext.transferFromImageBitmap(iCanvas.transferToImageBitmap());\n          }\n          else {\n            this.global.createImageBitmap(iCanvas, 0, 0, iWidth, iHeight, {\n              resizeWidth: oWidth,\n              resizeHeight: oHeight,\n            }).then(bitmap => renderContext.transferFromImageBitmap(bitmap));\n          }\n        } else {\n          renderContext.drawImage(iCanvas, 0, 0, iWidth, iHeight,\n                                           0, 0, oWidth, oHeight);\n        }\n      }\n    }\n    if (session.immersive && session.baseLayer) {\n      this.display.submitFrame();\n    }\n  }\n  cancelAnimationFrame(handle) {\n    this.display.cancelAnimationFrame(handle);\n  }\n  async endSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return;\n    }\n    if (session.immersive) {\n      return this.display.exitPresent();\n    } else {\n      session.ended = true;\n    }\n  }\n  requestStageBounds() {\n    if (this.display.stageParameters) {\n      const width = this.display.stageParameters.sizeX;\n      const depth = this.display.stageParameters.sizeZ;\n      const data = [];\n      data.push(-width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(depth / 2);\n      data.push(-width / 2);\n      data.push(depth / 2);\n      return data;\n    }\n    return null;\n  }\n  async requestFrameOfReferenceTransform(type, options) {\n    if (type === 'stage' && this.display.stageParameters &&\n                            this.display.stageParameters.sittingToStandingTransform) {\n      return this.display.stageParameters.sittingToStandingTransform;\n    }\n  }\n  getProjectionMatrix(eye) {\n    if (eye === 'left') {\n      return this.frame.leftProjectionMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightProjectionMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getViewport(sessionId, eye, layer, target) {\n    const session = this.sessions.get(sessionId);\n    const { width, height } = layer.context.canvas;\n    if (!session.immersive) {\n      target.x = target.y = 0;\n      target.width = width;\n      target.height = height;\n      return true;\n    }\n    if (eye === 'left') {\n      target.x = 0;\n    } else if (eye === 'right') {\n      target.x = width / 2;\n    } else {\n      return false;\n    }\n    target.y = 0;\n    target.width = width / 2;\n    target.height = height;\n    return true;\n  }\n  getBasePoseMatrix() {\n    let { position, orientation } = this.frame.pose;\n    if (!position && !orientation) {\n      return this.baseModelMatrix;\n    }\n    if (!position) {\n      position = this.tempVec3;\n      position[0] = position[1] = position[2] = 0;\n    }\n    fromRotationTranslation(this.baseModelMatrix, orientation, position);\n    return this.baseModelMatrix;\n  }\n  getBaseViewMatrix(eye) {\n    if (eye === 'left') {\n      return this.frame.leftViewMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightViewMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getInputSources() {\n    let inputSources = [];\n    for (let i in this.gamepadInputSources) {\n      inputSources.push(this.gamepadInputSources[i].inputSource);\n    }\n    return inputSources;\n  }\n  getInputPose(inputSource, coordinateSystem) {\n    if (!coordinateSystem) {\n      return null;\n    }\n    for (let i in this.gamepadInputSources) {\n      let inputSourceImpl = this.gamepadInputSources[i];\n      if (inputSourceImpl.inputSource === inputSource) {\n        return inputSourceImpl.getXRInputPose(coordinateSystem);\n      }\n    }\n    return null;\n  }\n  onWindowResize() {\n  }\n  onVRDisplayPresentChange(e) {\n    if (!this.display.isPresenting) {\n      this.sessions.forEach(session => {\n        if (session.immersive && !session.ended) {\n          if (session.modifiedCanvasLayer) {\n            const canvas = session.baseLayer.context.canvas;\n            document.body.removeChild(canvas);\n            canvas.setAttribute('style', '');\n          }\n          if (this.immersiveSession === session) {\n            this.immersiveSession = null;\n          }\n          this.dispatchEvent('@@webxr-polyfill/vr-present-end', session.id);\n        }\n      });\n    }\n  }\n}\n\nclass CardboardXRDevice extends WebVRDevice {\n  constructor(global) {\n    const display = new CardboardVRDisplay();\n    super(global, display);\n    this.display = display;\n    this.frame = {\n      rightViewMatrix: new Float32Array(16),\n      leftViewMatrix: new Float32Array(16),\n      rightProjectionMatrix: new Float32Array(16),\n      leftProjectionMatrix: new Float32Array(16),\n      pose: null,\n      timestamp: null,\n    };\n  }\n}\n\nconst getXRDevice = async function (global) {\n  let device = null;\n  if ('xr' in global.navigator) {\n    try {\n      device = await global.navigator.xr.requestDevice();\n    } catch (e) {}\n  }\n  return device;\n};\nconst getVRDisplay = async function (global) {\n  let device = null;\n  if ('getVRDisplays' in global.navigator) {\n    try {\n      const displays = await global.navigator.getVRDisplays();\n      if (displays && displays.length) {\n        device = new WebVRDevice(global, displays[0]);\n      }\n    } catch (e) {}\n  }\n  return device;\n};\nconst requestDevice = async function (global, config) {\n  let device = await getXRDevice(global);\n  if (device) {\n    return device;\n  }\n  if (config.webvr) {\n    device = await getVRDisplay(global);\n    if (device) {\n      return new XRDevice(device);\n    }\n  }\n  if (config.cardboard && isMobile(global)) {\n    if (!global.VRFrameData) {\n      global.VRFrameData = function () {\n        this.rightViewMatrix = new Float32Array(16);\n        this.leftViewMatrix = new Float32Array(16);\n        this.rightProjectionMatrix = new Float32Array(16);\n        this.leftProjectionMatrix = new Float32Array(16);\n        this.pose = null;\n      };\n    }\n    return new XRDevice(new CardboardXRDevice(global));\n  }\n  return null;\n};\n\nconst CONFIG_DEFAULTS = {\n  webvr: true,\n  cardboard: true,\n};\nconst partials = ['navigator', 'HTMLCanvasElement', 'WebGLRenderingContext'];\nclass WebXRPolyfill {\n  constructor(global, config={}) {\n    this.global = global || _global;\n    this.config = Object.freeze(Object.assign({}, CONFIG_DEFAULTS, config));\n    this.nativeWebXR = 'xr' in this.global.navigator;\n    this.injected = false;\n    if (!this.nativeWebXR) {\n      this._injectPolyfill(this.global);\n    }\n    else if (this.config.cardboard && isMobile(this.global)) {\n      this._patchRequestDevice();\n    }\n  }\n  _injectPolyfill(global) {\n    if (!partials.every(iface => !!global[iface])) {\n      throw new Error(`Global must have the following attributes : ${partials}`);\n    }\n    for (const className of Object.keys(API)) {\n      if (global[className] !== undefined) {\n        console.warn(`${className} already defined on global.`);\n      } else {\n        global[className] = API[className];\n      }\n    }\n    {\n      const polyfilledCtx = polyfillSetCompatibleXRDevice(global.WebGLRenderingContext);\n      if (polyfilledCtx) {\n        const renderContextType = isImageBitmapSupported(global) ? 'bitmaprenderer' : '2d';\n        polyfillGetContext(global.HTMLCanvasElement, renderContextType);\n        if (global.OffscreenCanvas) {\n          polyfillGetContext(global.OffscreenCanvas, null);\n        }\n        if (global.WebGL2RenderingContext){\n          polyfillSetCompatibleXRDevice(global.WebGL2RenderingContext);\n        }\n      }\n    }\n    this.injected = true;\n    this._patchRequestDevice();\n  }\n  _patchRequestDevice() {\n    const device = requestDevice(this.global, this.config);\n    this.xr = new XR(device);\n    Object.defineProperty(this.global.navigator, 'xr', {\n      value: this.xr,\n      configurable: true,\n    });\n  }\n}\n\nexport default WebXRPolyfill;\n","import WebXRPolyfill from 'webxr-polyfill';\r\n\r\nexport default () => {\r\n\r\n    let xrDevice = null;\r\n    let xrSession = null;\r\n    let xrFrameOfRef = null;\r\n\r\n    let gl = null;\r\n\r\n    let curClearColor = null;\r\n\r\n    p5.prototype.createVRCanvas = function () {\r\n        noLoop();\r\n        var polyfill = new WebXRPolyfill();\r\n        var versionShim = new WebXRVersionShim();\r\n        initVR(this);\r\n    }\r\n\r\n    // Called when we've successfully acquired a XRSession. In response we\r\n    // will set up the necessary session state and kick off the frame loop.\r\n    function onVRSessionStarted(session) {\r\n        // xrSession = session;\r\n        // Listen for the sessions 'end' event so we can respond if the user\r\n        // or UA ends the session for any reason.\r\n        session.addEventListener('end', onSessionEnded);\r\n        // Create a WebGL context to render with, initialized to be compatible\r\n        // with the XRDisplay we're presenting to.\r\n        createCanvas(windowWidth, windowHeight, WEBGL);\r\n        p5.instance._decrementPreload();\r\n        console.log('MADE VR CANVAS OF WIDTH:' + width + ' AND HEIGHT:' + height);\r\n        let canvas = p5.instance.canvas;\r\n        gl = canvas.getContext('webgl', {\r\n            compatibleXRDevice: session.device\r\n        });\r\n        // Use the new WebGL context to create a XRWebGLLayer and set it as the\r\n        // sessions baseLayer. This allows any content rendered to the layer to\r\n        // be displayed on the XRDevice.\r\n        session.baseLayer = new XRWebGLLayer(session, gl);\r\n        // Get a frame of reference, which is required for querying poses. In\r\n        // this case an 'eye-level' frame of reference means that all poses will\r\n        // be relative to the location where the XRDevice was first detected.\r\n        session.requestFrameOfReference('eye-level').then((frameOfRef) => {\r\n            xrFrameOfRef = frameOfRef;\r\n            // Inform the session that we're ready to begin drawing.\r\n            session.requestAnimationFrame(onXRFrame);\r\n        });\r\n    }\r\n\r\n    function initVR() {\r\n        // Is WebXR available on this UA?\r\n        // Is WebXR available on this UA?\r\n        let xrButton = new XRDeviceButton({\r\n            onRequestSession: onVRButtonClicked,\r\n            onEndSession: onSessionEnded\r\n        });\r\n        document.querySelector('header').appendChild(xrButton.domElement);\r\n        console.log('supported');\r\n        if (navigator.xr) {\r\n            // Request a list of all the XR Devices connected to the system.\r\n            navigator.xr.requestDevice().then((device) => {\r\n                // If the device allows creation of immersive sessions set it as the\r\n                // target of the 'Enter XR' button.\r\n                device.supportsSession({ immersive: true }).then(() => {\r\n                    xrButton.setDevice(device);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function onVRButtonClicked(device) {\r\n        console.log('clicked');\r\n        // requestSession must be called within a user gesture event\r\n        // like click or touch when requesting an immersive session.\r\n        device.requestSession({ immersive: true }).then(onVRSessionStarted);\r\n    }\r\n\r\n\r\n    function onXRFrame(t, frame) {\r\n        let session = frame.session;\r\n        // Inform the session that we're ready for the next frame.\r\n        session.requestAnimationFrame(onXRFrame);\r\n        // Get the XRDevice pose relative to the Frame of Reference we created\r\n        // earlier.\r\n        let pose = frame.getDevicePose(xrFrameOfRef);\r\n        // Getting the pose may fail if, for example, tracking is lost. So we\r\n        // have to check to make sure that we got a valid pose before attempting\r\n        // to render with it. If not in this case we'll just leave the\r\n        // framebuffer cleared, so tracking loss means the scene will simply\r\n        // dissapear.\r\n        if (pose) {\r\n            // If we do have a valid pose, bind the WebGL layer's framebuffer,\r\n            // which is where any content to be displayed on the XRDevice must be\r\n            // rendered.\r\n            gl.bindFramebuffer(gl.FRAMEBUFFER, session.baseLayer.framebuffer);\r\n            // Update the clear color so that we can observe the color in the\r\n            // headset changing over time.\r\n            let time = Date.now();\r\n            // Normally you'd loop through each of the views reported by the frame\r\n            // and draw them into the corresponding viewport here, but we're\r\n            // keeping this sample slim so we're not bothering to draw any\r\n            // geometry.\r\n            _clearVR();\r\n            for (let view of frame.views) {\r\n                let viewport = session.baseLayer.getViewport(view);\r\n                gl.viewport(viewport.x, viewport.y,\r\n                    viewport.width, viewport.height);\r\n                p5.instance._renderer.uMVMatrix.set(pose.getViewMatrix(view));\r\n                p5.instance._renderer.uPMatrix.set(view.projectionMatrix);\r\n                _drawEye();\r\n            }\r\n        }\r\n    }\r\n\r\n    p5.prototype.setVRBackgroundColor = function(r, g, b) {\r\n        curClearColor = color(r, g, b);\r\n    }\r\n\r\n    function _clearVR() {\r\n        if(curClearColor === null) {\r\n            return;\r\n        }\r\n\r\n        background(curClearColor);\r\n    }\r\n\r\n    function _drawEye() {\r\n        // \r\n        if (!p5.instance._renderer.isP3D) {\r\n            return;\r\n        }\r\n\r\n        var context = window;\r\n        var userSetup = context.setup;\r\n        var userDraw = context.draw;\r\n        if (typeof userDraw === 'function') {\r\n            if (typeof userSetup === 'undefined') {\r\n                context.scale(context._pixelDensity, context._pixelDensity);\r\n            }\r\n            var callMethod = function (f) {\r\n                f.call(context);\r\n            };\r\n            if (context._renderer.isP3D) {\r\n                context._renderer._update();\r\n            }\r\n            context._setProperty('frameCount', context.frameCount + 1);\r\n            context._registeredMethods.pre.forEach(callMethod);\r\n            p5.instance._inUserDraw = true;\r\n            try {\r\n                userDraw();\r\n            } finally {\r\n                p5.instance._inUserDraw = false;\r\n            }\r\n            context._registeredMethods.post.forEach(callMethod);\r\n        }\r\n    }\r\n\r\n    function onEndSession(session) {\r\n        session.end();\r\n    }\r\n    // Called either when the user has explicitly ended the session (like in\r\n    // onEndSession()) or when the UA has ended the session for any reason.\r\n    // At this point the session object is no longer usable and should be\r\n    // discarded.\r\n    function onSessionEnded(event) {\r\n        xrSession = null;\r\n        xrButton.innerHTML = 'Enter VR';\r\n        // In this simple case discard the WebGL context too, since we're not\r\n        // rendering anything else to the screen with it.\r\n        gl = null;\r\n    }\r\n\r\n    p5.RendererGL.prototype._update = function () {\r\n        /* TODO: Figure out how to avoid overwriting this function */\r\n        /* IE: Override the resetting of cameraMatrices in _update */\r\n        /*\r\n        /*\r\n        /*\r\n        /*\r\n        /*\r\n        */\r\n\r\n        // reset model view and apply initial camera transform\r\n        // (containing only look at info; no projection).\r\n        // this.uMVMatrix.set(\r\n        //   this._curCamera.cameraMatrix.mat4[0],\r\n        //   this._curCamera.cameraMatrix.mat4[1],\r\n        //   this._curCamera.cameraMatrix.mat4[2],\r\n        //   this._curCamera.cameraMatrix.mat4[3],\r\n        //   this._curCamera.cameraMatrix.mat4[4],\r\n        //   this._curCamera.cameraMatrix.mat4[5],\r\n        //   this._curCamera.cameraMatrix.mat4[6],\r\n        //   this._curCamera.cameraMatrix.mat4[7],\r\n        //   this._curCamera.cameraMatrix.mat4[8],\r\n        //   this._curCamera.cameraMatrix.mat4[9],\r\n        //   this._curCamera.cameraMatrix.mat4[10],\r\n        //   this._curCamera.cameraMatrix.mat4[11],\r\n        //   this._curCamera.cameraMatrix.mat4[12],\r\n        //   this._curCamera.cameraMatrix.mat4[13],\r\n        //   this._curCamera.cameraMatrix.mat4[14],\r\n        //   this._curCamera.cameraMatrix.mat4[15]\r\n        // );\r\n        // p5.instance._renderer.uMVMatrix.set(viewMat);\r\n        // p5.instance._renderer.uPMatrix.set(projMat);\r\n        // reset light data for new frame.\r\n\r\n        /*\r\n        /*\r\n        /*\r\n        /*\r\n        /*\r\n        */\r\n        /* TODO: Figure out how to avoid overwriting this function */\r\n        /* IE: Override the resetting of cameraMatrices in _update */\r\n\r\n        this.ambientLightColors.length = 0;\r\n        this.directionalLightDirections.length = 0;\r\n        this.directionalLightColors.length = 0;\r\n\r\n        this.pointLightPositions.length = 0;\r\n        this.pointLightColors.length = 0;\r\n    };\r\n};","import WebXRPolyfill from 'webxr-polyfill';\r\n\r\nexport default () => {\r\n\r\n    let arDevice;\r\n\r\n    let arSession = null;\r\n    let arFrameOfRef = null;\r\n\r\n    let gl = null;\r\n\r\n    /**\r\n     * Fetches the XRDevice, if available.\r\n     */\r\n    p5.prototype.createARCanvas = function () {\r\n        // The entry point of the WebXR Device API is on `navigator.xr`.\r\n        // We also want to ensure that `XRSession` has `requestHitTest`,\r\n        // indicating that the #webxr-hit-test flag is enabled.\r\n        var polyfill = new WebXRPolyfill();\r\n        var versionShim = new WebXRVersionShim();\r\n        console.log('start');\r\n        initAR();\r\n    };\r\n\r\n    function onRequestSession() {\r\n        onEnterAR();\r\n    }\r\n\r\n    function onEndSession() { }\r\n\r\n    function initAR() {\r\n\r\n        let xrButton = new XRDeviceButton({\r\n            onRequestSession: onRequestSession,\r\n            onEndSession: onEndSession,\r\n            textEnterXRTitle: \"START AR\",\r\n            textXRNotFoundTitle: \"AR NOT FOUND\",\r\n            textExitXRTitle: \"EXIT  AR\",\r\n        });\r\n        document.querySelector('header').appendChild(xrButton.domElement);\r\n\r\n        if (navigator.xr) {\r\n            console.log(navigator.xr);\r\n            // if (XRSession.prototype.requestHitTest) {\r\n            //     console.log('hit test');\r\n            // } else {\r\n            //     console.log('no hit test');\r\n            // }\r\n            navigator.xr.requestDevice().then((device) => {\r\n                // If the device allows creation of immersive sessions set it as the\r\n                // target of the 'Enter XR' button.\r\n                device.supportsSession({immersive: true}).then(() => {\r\n                    console.log('SUPPORTED');\r\n                    xrButton.setDevice(device);\r\n                    arDevice = device;\r\n                });\r\n            });\r\n\r\n            // We found an XRDevice! Bind a click listener on our \"Enter AR\" button\r\n            // since the spec requires calling `device.requestSession()` within a\r\n            // user gesture.\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle a click event on the '#enter-ar' button and attempt to\r\n     * start an XRSession.\r\n     */\r\n    function onEnterAR() {\r\n        // Now that we have an XRDevice, and are responding to a user\r\n        // gesture, we must create an XRPresentationContext on a\r\n        // canvas element.\r\n\r\n        createCanvas(windowWidth, windowHeight, WEBGL);\r\n        let canvas = p5.instance.canvas;\r\n        let ctx = canvas.getContext('xrpresent');\r\n        \r\n        const session = arDevice.requestSession({\r\n                outputContext: ctx,\r\n                environmentIntegration: true,\r\n            }).then(onARSessionStarted);\r\n\r\n            // If `requestSession` is successful, add the canvas to the\r\n            // DOM since we know it will now be used.\r\n            \r\n            // If `requestSession` fails, the canvas is not added, and we\r\n            // call our function for unsupported browsers.\r\n            // this.onNoXRDevice();\r\n    }\r\n\r\n    function onARSessionStarted(session){\r\n        console.log('AR SESSION STARTED');\r\n        gl = p5.instance.canvas.getContext('webgl', {\r\n            compatibleXRDevice: session.device\r\n        });\r\n        \r\n        session.baseLayer = new XRWebGLLayer(session, gl);\r\n        // Get a frame of reference, which is required for querying poses. In\r\n        // this case an 'eye-level' frame of reference means that all poses will\r\n        // be relative to the location where the XRDevice was first detected.\r\n        session.requestFrameOfReference('eye-level').then((frameOfRef) => {\r\n            arFrameOfRef = frameOfRef;\r\n            // Inform the session that we're ready to begin drawing.\r\n            session.requestAnimationFrame(onXRFrame);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Toggle on a class on the page to disable the \"Enter AR\"\r\n     * button and display the unsupported browser message.\r\n     */\r\n    function onNoXRDevice() {\r\n        console.log('unsupported');\r\n        document.body.classList.add('unsupported');\r\n    }\r\n\r\n    /**\r\n     * Called when the XRSession has begun. Here we set up our three.js\r\n     * renderer, scene, and camera and attach our XRWebGLLayer to the\r\n     * XRSession and kick off the render loop.\r\n     */\r\n    function onSessionStarted(session) {\r\n        // this.session = session;\r\n\r\n        // // Add the `ar` class to our body, which will hide our 2D components\r\n        // document.body.classList.add('ar');\r\n\r\n        // // To help with working with 3D on the web, we'll use three.js. Set up\r\n        // // the WebGLRenderer, which handles rendering to our session's base layer.\r\n        // this.renderer = new THREE.WebGLRenderer({\r\n        //     alpha: true,\r\n        //     preserveDrawingBuffer: true,\r\n        // });\r\n        // this.renderer.autoClear = false;\r\n\r\n        // // We must tell the renderer that it needs to render shadows.\r\n        // this.renderer.shadowMap.enabled = true;\r\n        // this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n\r\n        // this.gl = this.renderer.getContext();\r\n\r\n        // // Ensure that the context we want to write to is compatible\r\n        // // with our XRDevice\r\n        // await this.gl.setCompatibleXRDevice(this.session.device);\r\n\r\n        // // Set our session's baseLayer to an XRWebGLLayer\r\n        // // using our new renderer's context\r\n        // this.session.baseLayer = new XRWebGLLayer(this.session, this.gl);\r\n\r\n        // // Set the XRSession framebuffer on our three.js renderer rather\r\n        // // than using the default framebuffer -- this is necessary for things\r\n        // // in three.js that use other render targets, like shadows.\r\n        // const framebuffer = this.session.baseLayer.framebuffer;\r\n        // this.renderer.setFramebuffer(framebuffer);\r\n\r\n        // // A THREE.Scene contains the scene graph for all objects in the\r\n        // // render scene. Call our utility which gives us a THREE.Scene\r\n        // // with a few lights and surface to render our shadows. Lights need\r\n        // // to be configured in order to use shadows, see `shared/utils.js`\r\n        // // for more information.\r\n        // this.scene = DemoUtils.createLitScene();\r\n\r\n        // // Use the DemoUtils.loadModel to load our OBJ and MTL. The promise\r\n        // // resolves to a THREE.Group containing our mesh information.\r\n        // // Dont await this promise, as we want to start the rendering\r\n        // // process before this finishes.\r\n        // DemoUtils.loadModel(MODEL_OBJ_URL, MODEL_MTL_URL).then(model => {\r\n        //     this.model = model;\r\n\r\n        //     // Some models contain multiple meshes, so we want to make sure\r\n        //     // all of our meshes within the model case a shadow.\r\n        //     this.model.children.forEach(mesh => mesh.castShadow = true);\r\n\r\n        //     // Every model is different -- you may have to adjust the scale\r\n        //     // of a model depending on the use.\r\n        //     this.model.scale.set(MODEL_SCALE, MODEL_SCALE, MODEL_SCALE);\r\n        // });\r\n\r\n        // // We'll update the camera matrices directly from API, so\r\n        // // disable matrix auto updates so three.js doesn't attempt\r\n        // // to handle the matrices independently.\r\n        // this.camera = new THREE.PerspectiveCamera();\r\n        // this.camera.matrixAutoUpdate = false;\r\n\r\n        // // Add a Reticle object, which will help us find surfaces by drawing\r\n        // // a ring shape onto found surfaces. See source code\r\n        // // of Reticle in shared/utils.js for more details.\r\n        // this.reticle = new Reticle(this.session, this.camera);\r\n        // this.scene.add(this.reticle);\r\n\r\n        // this.frameOfRef = await this.session.requestFrameOfReference('eye-level');\r\n        // this.session.requestAnimationFrame(this.onXRFrame);\r\n\r\n        // window.addEventListener('click', this.onClick);\r\n    }\r\n\r\n    /**\r\n     * Called on the XRSession's requestAnimationFrame.\r\n     * Called with the time and XRPresentationFrame.\r\n     */\r\n    function onXRFrame(time, frame) {\r\n        // let session = frame.session;\r\n        // let pose = frame.getDevicePose(this.frameOfRef);\r\n\r\n        // // Update the reticle's position\r\n        // this.reticle.update(this.frameOfRef);\r\n\r\n        // // If the reticle has found a hit (is visible) and we have\r\n        // // not yet marked our app as stabilized, do so\r\n        // if (this.reticle.visible && !this.stabilized) {\r\n        //     this.stabilized = true;\r\n        //     document.body.classList.add('stabilized');\r\n        // }\r\n\r\n        // // Queue up the next frame\r\n        // session.requestAnimationFrame(this.onXRFrame);\r\n\r\n        // // Bind the framebuffer to our baseLayer's framebuffer\r\n        // this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.session.baseLayer.framebuffer);\r\n\r\n        // if (pose) {\r\n        //     // Our XRFrame has an array of views. In the VR case, we'll have\r\n        //     // two views, one for each eye. In mobile AR, however, we only\r\n        //     // have one view.\r\n        //     for (let view of frame.views) {\r\n        //         const viewport = session.baseLayer.getViewport(view);\r\n        //         this.renderer.setSize(viewport.width, viewport.height);\r\n\r\n        //         // Set the view matrix and projection matrix from XRDevicePose\r\n        //         // and XRView onto our THREE.Camera.\r\n        //         this.camera.projectionMatrix.fromArray(view.projectionMatrix);\r\n        //         const viewMatrix = new THREE.Matrix4().fromArray(pose.getViewMatrix(view));\r\n        //         this.camera.matrix.getInverse(viewMatrix);\r\n        //         this.camera.updateMatrixWorld(true);\r\n\r\n        //         // Render our scene with our THREE.WebGLRenderer\r\n        //         this.renderer.render(this.scene, this.camera);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    /**\r\n     * This method is called when tapping on the page once an XRSession\r\n     * has started. We're going to be firing a ray from the center of\r\n     * the screen, and if a hit is found, use it to place our object\r\n     * at the point of collision.\r\n     */\r\n    function onClick(e) {\r\n        // // If our model is not yet loaded, abort\r\n        // if (!this.model) {\r\n        //     return;\r\n        // }\r\n\r\n        // // We're going to be firing a ray from the center of the screen.\r\n        // // The requestHitTest function takes an x and y coordinate in\r\n        // // Normalized Device Coordinates, where the upper left is (-1, 1)\r\n        // // and the bottom right is (1, -1). This makes (0, 0) our center.\r\n        // const x = 0;\r\n        // const y = 0;\r\n\r\n        // // Create a THREE.Raycaster if one doesn't already exist,\r\n        // // and use it to generate an origin and direction from\r\n        // // our camera (device) using the tap coordinates.\r\n        // // Learn more about THREE.Raycaster:\r\n        // // https://threejs.org/docs/#api/core/Raycaster\r\n        // this.raycaster = this.raycaster || new THREE.Raycaster();\r\n        // this.raycaster.setFromCamera({ x, y }, this.camera);\r\n        // const ray = this.raycaster.ray;\r\n\r\n        // // Fire the hit test to see if our ray collides with a real\r\n        // // surface. Note that we must turn our THREE.Vector3 origin and\r\n        // // direction into an array of x, y, and z values. The proposal\r\n        // // for `XRSession.prototype.requestHitTest` can be found here:\r\n        // // https://github.com/immersive-web/hit-test\r\n        // const origin = new Float32Array(ray.origin.toArray());\r\n        // const direction = new Float32Array(ray.direction.toArray());\r\n        // const hits = await this.session.requestHitTest(origin,\r\n        //     direction,\r\n        //     this.frameOfRef);\r\n\r\n        // // If we found at least one hit...\r\n        // if (hits.length) {\r\n        //     // We can have multiple collisions per hit test. Let's just take the\r\n        //     // first hit, the nearest, for now.\r\n        //     const hit = hits[0];\r\n\r\n        //     // Our XRHitResult object has one property, `hitMatrix`, a\r\n        //     // Float32Array(16) representing a 4x4 Matrix encoding position where\r\n        //     // the ray hit an object, and the orientation has a Y-axis that corresponds\r\n        //     // with the normal of the object at that location.\r\n        //     // Turn this matrix into a THREE.Matrix4().\r\n        //     const hitMatrix = new THREE.Matrix4().fromArray(hit.hitMatrix);\r\n\r\n        //     // Now apply the position from the hitMatrix onto our model.\r\n        //     this.model.position.setFromMatrixPosition(hitMatrix);\r\n\r\n        //     // Rather than using the rotation encoded by the `modelMatrix`,\r\n        //     // rotate the model to face the camera. Use this utility to\r\n        //     // rotate the model only on the Y axis.\r\n        //     DemoUtils.lookAtOnY(this.model, this.camera);\r\n\r\n        //     // Now that we've found a collision from the hit test, let's use\r\n        //     // the Y position of that hit and assume that's the floor. We created\r\n        //     // a mesh in `DemoUtils.createLitScene()` that receives shadows, so set\r\n        //     // it's Y position to that of the hit matrix so that shadows appear to be\r\n        //     // cast on the ground under the model.\r\n        //     const shadowMesh = this.scene.children.find(c => c.name === 'shadowMesh');\r\n        //     shadowMesh.position.y = this.model.position.y;\r\n\r\n        //     // Ensure our model has been added to the scene.\r\n        //     this.scene.add(this.model);\r\n    }\r\n};\r\n","\r\nimport p5vr from '../src/p5xr/p5vr/p5vr.js'\r\nimport p5ar from '../src/p5xr/p5ar/p5ar.js'\r\n\r\np5vr();\r\np5ar();\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}